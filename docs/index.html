<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AWSPrepAI - AWS Certification Study Tool</title>
  <meta name="description" content="Master AWS certifications with practice questions, flashcards, and mock exams. Cloud Practitioner & Solutions Architect.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚òÅÔ∏è</text></svg>">
  <style>
    :root{--bg:#0f172a;--card:#1e293b;--accent:#f59e0b;--accent-2:#fbbf24;--success:#10b981;--warning:#f59e0b;--danger:#ef4444;--text:#f1f5f9;--muted:#94a3b8;--border:#334155;--radius:12px;--aws-orange:#ff9900}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh}
    .container{max-width:1200px;margin:0 auto;padding:1rem}
    header{background:linear-gradient(135deg,#232f3e 0%,#1a2332 100%);border-bottom:3px solid var(--aws-orange);padding:1rem 0}
    .header-content{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
    .logo{display:flex;align-items:center;gap:.75rem;font-size:1.5rem;font-weight:800;color:var(--aws-orange);text-decoration:none}
    .cert-selector{background:var(--bg);border:2px solid var(--aws-orange);color:var(--text);padding:.5rem 1rem;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer}
    .cert-selector:focus{outline:none}
    .nav-tabs{display:flex;gap:.5rem;flex-wrap:wrap}
    .nav-tab{background:transparent;border:1px solid var(--border);color:var(--muted);padding:.5rem 1rem;border-radius:8px;cursor:pointer;font-weight:600;transition:all .2s;font-size:.875rem}
    .nav-tab:hover{border-color:var(--aws-orange);color:var(--aws-orange)}
    .nav-tab.active{background:var(--aws-orange);color:#000;border-color:var(--aws-orange)}
    main{padding:1.5rem 0}
    .app-section{display:none}
    .app-section.active{display:block}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:1.5rem;margin-bottom:1.5rem}
    .card-title{font-size:1.25rem;font-weight:700;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}
    .card-orange{border-left:4px solid var(--aws-orange)}
    .form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}
    .btn{padding:.75rem 1.5rem;border-radius:8px;font-weight:700;cursor:pointer;transition:all .2s;border:none;font-size:.9rem}
    .btn-primary{background:var(--aws-orange);color:#000}
    .btn-primary:hover{background:var(--accent-2)}
    .btn-success{background:var(--success);color:#fff}
    .btn-danger{background:var(--danger);color:#fff}
    .btn-secondary{background:var(--card);color:var(--text);border:1px solid var(--border)}
    .btn-group{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:1rem}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem;margin-bottom:1.5rem}
    .stat-card{background:var(--card);padding:1.25rem;border-radius:var(--radius);text-align:center;border:1px solid var(--border)}
    .stat-value{font-size:2rem;font-weight:800;color:var(--aws-orange)}
    .stat-label{font-size:.75rem;color:var(--muted);margin-top:.25rem}
    .progress-bar{background:var(--border);border-radius:999px;height:12px;margin:.5rem 0;overflow:hidden}
    .progress-fill{height:100%;border-radius:999px;transition:width .3s}
    .progress-fill.good{background:var(--success)}
    .progress-fill.medium{background:var(--warning)}
    .progress-fill.low{background:var(--danger)}
    .quiz-question{font-size:1.25rem;margin-bottom:1.5rem;line-height:1.5}
    .quiz-options{display:grid;gap:.75rem}
    .quiz-option{background:var(--bg);padding:1rem;border-radius:8px;cursor:pointer;border:2px solid var(--border);transition:all .2s}
    .quiz-option:hover{border-color:var(--aws-orange);background:#232f3e}
    .quiz-option.correct{border-color:var(--success);background:rgba(16,185,129,.15)}
    .quiz-option.incorrect{border-color:var(--danger);background:rgba(239,68,68,.15)}
    .data-list{max-height:400px;overflow-y:auto}
    .data-item{background:var(--bg);padding:1rem;border-radius:8px;margin-bottom:.5rem;display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:all .2s}
    .data-item:hover{border-left:3px solid var(--aws-orange)}
    .data-item-info{flex:1}
    .data-item-title{font-weight:600}
    .data-item-meta{font-size:.875rem;color:var(--muted)}
    .data-item-value{font-size:1.25rem;font-weight:700}
    .insight{background:var(--bg);padding:1rem;border-radius:8px;margin-bottom:.75rem;border-left:4px solid var(--aws-orange)}
    .insight.positive{border-left-color:var(--success)}
    .insight.warning{border-left-color:var(--warning)}
    .service-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem}
    .service-card{background:var(--bg);padding:1rem;border-radius:8px;border-left:4px solid var(--aws-orange)}
    .service-name{font-weight:700;font-size:1.1rem;color:var(--aws-orange)}
    .service-desc{font-size:.9rem;color:var(--muted);margin-top:.5rem}
    .exam-timer{font-size:2rem;font-weight:800;color:var(--aws-orange);text-align:center;padding:1rem}
    .cert-badge{display:inline-block;padding:.25rem .75rem;border-radius:999px;font-size:.75rem;font-weight:700;margin-left:.5rem}
    .cert-badge.clf{background:#10b981;color:#fff}
    .cert-badge.saa{background:#3b82f6;color:#fff}
    @media(max-width:768px){.nav-tabs{justify-content:center}.header-content{justify-content:center;flex-direction:column}.stats-grid{grid-template-columns:repeat(2,1fr)}}
    .floating-tips-btn{position:fixed;bottom:2rem;right:2rem;width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,var(--aws-orange),var(--accent-2));border:3px solid var(--bg);font-size:1.5rem;cursor:pointer;box-shadow:0 4px 12px rgba(255,153,0,.4);transition:all .3s;z-index:1000;animation:pulse 2s infinite}
    .floating-tips-btn:hover{transform:scale(1.1);box-shadow:0 6px 20px rgba(255,153,0,.6)}
    @keyframes pulse{0%,100%{box-shadow:0 4px 12px rgba(255,153,0,.4)}50%{box-shadow:0 4px 20px rgba(255,153,0,.7)}}
    .tips-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:2000;align-items:center;justify-content:center}
    .tips-modal.active{display:flex}
    .tips-content{background:var(--card);border:2px solid var(--aws-orange);border-radius:var(--radius);padding:2rem;max-width:600px;max-height:80vh;overflow-y:auto;margin:1rem}
    .tips-close{position:absolute;top:1rem;right:1rem;background:transparent;border:none;color:var(--text);font-size:2rem;cursor:pointer;line-height:1}
    footer{background:linear-gradient(135deg,#232f3e 0%,#1a2332 100%);border-top:3px solid var(--aws-orange);padding:2rem 0;margin-top:3rem}
    .footer-content{max-width:1200px;margin:0 auto;padding:0 1rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1.5rem}
    .footer-left{display:flex;flex-direction:column;gap:.5rem}
    .footer-title{font-size:1.25rem;font-weight:700;color:var(--aws-orange)}
    .footer-subtitle{color:var(--muted);font-size:.9rem}
    .footer-right{display:flex;gap:1rem;align-items:center;flex-wrap:wrap}
    .footer-link{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--card);border:1px solid var(--border);border-radius:8px;color:var(--text);text-decoration:none;font-weight:600;transition:all .2s;font-size:.9rem}
    .footer-link:hover{border-color:var(--aws-orange);color:var(--aws-orange);transform:translateY(-2px)}
    .tech-badge{display:inline-block;padding:.25rem .75rem;background:var(--bg);border:1px solid var(--border);border-radius:6px;font-size:.75rem;color:var(--muted);font-weight:600}
    @media(max-width:768px){.footer-content{flex-direction:column;text-align:center}.footer-right{justify-content:center}}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div style="display:flex;align-items:center;gap:1rem;flex-wrap:wrap">
          <a href="#" class="logo">‚òÅÔ∏è AWSPrepAI</a>
          <select class="cert-selector" id="certSelector" onchange="switchCert()">
            <option value="clf">‚òÅÔ∏è Cloud Practitioner (CLF-C02)</option>
            <option value="saa">üèóÔ∏è Solutions Architect (SAA-C03)</option>
          </select>
        </div>
        <nav class="nav-tabs">
          <button class="nav-tab active" data-tab="dashboard"><span class="icon">üìä</span><span>Dashboard</span></button>
          <button class="nav-tab" data-tab="quiz"><span class="icon">‚ùì</span><span>Practice</span></button>
          <button class="nav-tab" data-tab="exam"><span class="icon">üìù</span><span>Mock Exam</span></button>
          <button class="nav-tab" data-tab="study-guide"><span class="icon">üéì</span><span>Study Guide</span></button>
          <button class="nav-tab" data-tab="services"><span class="icon">üìö</span><span>Services</span></button>
        </nav>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Dashboard -->
    <section id="dashboard" class="app-section active">
      <div class="card card-orange">
        <div class="card-title">üéØ Current Certification: <span id="currentCertName">Cloud Practitioner</span><span class="cert-badge clf" id="certBadge">CLF-C02</span></div>
        <p style="color:var(--muted)">Pass score: <span id="passScore">70%</span> | Questions: <span id="examQuestions">65</span> | Time: <span id="examTime">90 min</span></p>
      </div>

      <div class="stats-grid">
        <div class="stat-card"><div class="stat-value" id="totalAnswered">0</div><div class="stat-label">Questions Answered</div></div>
        <div class="stat-card"><div class="stat-value" id="totalAccuracy">--%</div><div class="stat-label">Overall Accuracy</div></div>
        <div class="stat-card"><div class="stat-value" id="bestStreak">0</div><div class="stat-label">Best Streak</div></div>
        <div class="stat-card"><div class="stat-value" id="examReady">No</div><div class="stat-label">Exam Ready?</div></div>
      </div>

      <div class="card">
        <div class="card-title">üìà Progress by Domain</div>
        <div class="form-grid" id="domainProgress"></div>
      </div>

      <div class="card">
        <div class="card-title">‚ö†Ô∏è Weak Areas</div>
        <div id="weakAreas" class="data-list">
          <div class="insight">Complete some questions to identify weak areas!</div>
        </div>
      </div>
    </section>

    <!-- Practice Quiz -->
    <section id="quiz" class="app-section">
      <!-- Floating Tips Button -->
      <button id="floatingTips" class="floating-tips-btn" onclick="showQuickTips()" title="Quick Study Tips" style="display:none">
        üí°
      </button>

      <div class="card">
        <div class="card-title">üéØ Select Domain</div>
        <div class="btn-group" id="categoryBtns"></div>
      </div>

      <div class="card card-orange">
        <div class="card-title">‚òÅÔ∏è <span id="quizCertTitle">AWS Cloud Practitioner</span> <span id="questionCounter" style="font-weight:400;color:var(--muted);font-size:.9rem"></span></div>
        <div id="quizCategory" style="color:var(--aws-orange);font-size:.875rem;margin-bottom:.5rem"></div>
        <div class="quiz-question" id="quizQuestion">Loading question...</div>
        <div class="quiz-options" id="quizOptions"></div>
        <div id="quizExplanation" style="display:none;margin-top:1rem;padding:1rem;background:var(--bg);border-radius:8px;border-left:4px solid var(--aws-orange)"></div>
        <div class="btn-group" style="margin-top:1.5rem">
          <button class="btn btn-primary" id="nextQuizBtn" onclick="nextQuestion()" style="display:none">Next Question ‚Üí</button>
          <button class="btn btn-secondary" onclick="resetQuiz()">üîÑ Reset Progress</button>
        </div>
      </div>
    </section>

    <!-- Tips Modal -->
    <div id="tipsModal" class="tips-modal">
      <div class="tips-content" style="position:relative">
        <button class="tips-close" onclick="closeTips()">√ó</button>
        <div class="card-title" style="margin-bottom:1rem">üí° Quick Study Tips</div>
        <div id="tipsContent"></div>
      </div>
    </div>

    <!-- Mock Exam -->
    <section id="exam" class="app-section">
      <div class="card card-orange">
        <div class="card-title">üìù Mock Certification Exam</div>
        <div id="examStart">
          <div class="stats-grid">
            <div class="stat-card"><div class="stat-value" id="examQCount">65</div><div class="stat-label">Questions</div></div>
            <div class="stat-card"><div class="stat-value" id="examTCount">90</div><div class="stat-label">Minutes</div></div>
            <div class="stat-card"><div class="stat-value" id="examPScore">70%</div><div class="stat-label">Pass Score</div></div>
          </div>
          <button class="btn btn-primary" onclick="startExam()" style="width:100%;padding:1rem;font-size:1.1rem">üöÄ Start Mock Exam</button>
        </div>
        <div id="examInProgress" style="display:none">
          <div class="exam-timer" id="examTimer">90:00</div>
          <div style="text-align:center;color:var(--muted);margin-bottom:1rem" id="examProgress">Question 1 of 65</div>
          <div class="quiz-question" id="examQuestion"></div>
          <div class="quiz-options" id="examOptions"></div>
          <div class="btn-group" style="margin-top:1.5rem">
            <button class="btn btn-primary" onclick="examNext()">Next ‚Üí</button>
            <button class="btn btn-danger" onclick="endExam()">End Exam</button>
          </div>
        </div>
        <div id="examResults" style="display:none">
          <div class="stats-grid">
            <div class="stat-card"><div class="stat-value" id="examScore">0%</div><div class="stat-label">Your Score</div></div>
            <div class="stat-card"><div class="stat-value" id="examCorrect">0</div><div class="stat-label">Correct</div></div>
            <div class="stat-card"><div class="stat-value" id="examResult">--</div><div class="stat-label">Result</div></div>
          </div>
          <button class="btn btn-primary" onclick="restartExam()" style="width:100%">Try Again</button>
        </div>
      </div>
    </section>

    <!-- Study Guide -->
    <section id="study-guide" class="app-section">
      <div class="card card-orange">
        <div class="card-title">üéì SAA-C03 Smart Study Guide</div>
        <p style="color:var(--muted)">Based on analysis of all 505 SAA-C03 practice questions</p>
      </div>

      <div class="stats-grid" style="margin-bottom:1.5rem">
        <div class="stat-card"><div class="stat-value">152</div><div class="stat-label">Design-Performant</div></div>
        <div class="stat-card"><div class="stat-value">144</div><div class="stat-label">Design-Secure</div></div>
        <div class="stat-card"><div class="stat-value">119</div><div class="stat-label">Design-Resilient</div></div>
        <div class="stat-card"><div class="stat-value">90</div><div class="stat-label">Design-Cost</div></div>
      </div>

      <!-- Domain Selector -->
      <div class="card">
        <div class="card-title">üìö Select Domain</div>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="showDomain('secure')">üîê Design Secure</button>
          <button class="btn btn-secondary" onclick="showDomain('resilient')">üõ°Ô∏è Design Resilient</button>
          <button class="btn btn-secondary" onclick="showDomain('performant')">‚ö° Design Performant</button>
          <button class="btn btn-secondary" onclick="showDomain('cost')">üí∞ Design Cost</button>
        </div>
      </div>

      <!-- Design Secure -->
      <div id="domain-secure" class="domain-content">
        <div class="card">
          <div class="card-title">üîê Design Secure Architectures (144 Questions)</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üèÜ Top 10 Most Tested Services</h3>
          <div style="display:grid;gap:.5rem;margin-bottom:1.5rem">
            <div class="data-item"><span>1. S3</span><span class="data-item-value">145</span></div>
            <div class="data-item"><span>2. IAM</span><span class="data-item-value">101</span></div>
            <div class="data-item"><span>3. VPC</span><span class="data-item-value">85</span></div>
            <div class="data-item"><span>4. EC2</span><span class="data-item-value">84</span></div>
            <div class="data-item"><span>5. CloudFront</span><span class="data-item-value">35</span></div>
            <div class="data-item"><span>6. Route 53</span><span class="data-item-value">33</span></div>
            <div class="data-item"><span>7. WAF</span><span class="data-item-value">30</span></div>
            <div class="data-item"><span>8. VPN</span><span class="data-item-value">30</span></div>
            <div class="data-item"><span>9. Direct Connect</span><span class="data-item-value">29</span></div>
            <div class="data-item"><span>10. RDS</span><span class="data-item-value">26</span></div>
          </div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üéØ Key Topics to Master</h3>
          <div class="insight positive">‚úÖ <strong>IAM:</strong> Roles vs policies, cross-account access, resource-based policies, permissions boundaries</div>
          <div class="insight positive">‚úÖ <strong>Encryption:</strong> KMS, SSE-S3, SSE-C, SSE-KMS, SSL/TLS, client-side encryption</div>
          <div class="insight positive">‚úÖ <strong>VPC Security:</strong> Security Groups (stateful) vs NACLs (stateless), VPC endpoints, PrivateLink</div>
          <div class="insight positive">‚úÖ <strong>S3 Security:</strong> Bucket policies, ACLs, encryption at rest, versioning, MFA delete</div>
          <div class="insight positive">‚úÖ <strong>Security Services:</strong> GuardDuty, WAF, Shield, Macie, Security Hub, Inspector</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">‚ö†Ô∏è Common Wrong Answer Traps</h3>
          <div class="insight warning">‚ùå Using Internet Gateway instead of NAT Gateway for private subnets</div>
          <div class="insight warning">‚ùå Confusing Security Groups (instance-level) with NACLs (subnet-level)</div>
          <div class="insight warning">‚ùå Using VPC Peering for complex connectivity (use Transit Gateway instead)</div>
          <div class="insight warning">‚ùå Making resources public when private access is possible</div>
          <div class="insight warning">‚ùå Confusing Gateway Endpoints (S3/DynamoDB only) with Interface Endpoints (other services)</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üí° Quick Reference</h3>
          <div class="insight">üîë <strong>Cross-Account Access:</strong> Requires BOTH IAM role AND resource-based policy</div>
          <div class="insight">üîë <strong>Security Groups:</strong> Stateful, instance-level, allow rules only</div>
          <div class="insight">üîë <strong>NACLs:</strong> Stateless, subnet-level, allow + deny rules</div>
          <div class="insight">üîë <strong>VPC Endpoints:</strong> Gateway (S3/DynamoDB) vs Interface (all others)</div>
          <div class="insight">üîë <strong>Encryption at rest:</strong> KMS, SSE-S3, SSE-C, EBS encryption, RDS encryption</div>
        </div>
      </div>

      <!-- Design Resilient -->
      <div id="domain-resilient" class="domain-content" style="display:none">
        <div class="card">
          <div class="card-title">üõ°Ô∏è Design Resilient Architectures (119 Questions)</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üèÜ Top 10 Most Tested Services</h3>
          <div style="display:grid;gap:.5rem;margin-bottom:1.5rem">
            <div class="data-item"><span>1. EC2</span><span class="data-item-value">82</span></div>
            <div class="data-item"><span>2. S3</span><span class="data-item-value">50</span></div>
            <div class="data-item"><span>3. Multi-AZ</span><span class="data-item-value">48</span></div>
            <div class="data-item"><span>4. SQS</span><span class="data-item-value">39</span></div>
            <div class="data-item"><span>5. RDS</span><span class="data-item-value">37</span></div>
            <div class="data-item"><span>6. Auto Scaling</span><span class="data-item-value">35</span></div>
            <div class="data-item"><span>7. Aurora</span><span class="data-item-value">30</span></div>
            <div class="data-item"><span>8. Lambda</span><span class="data-item-value">29</span></div>
            <div class="data-item"><span>9. DynamoDB</span><span class="data-item-value">28</span></div>
            <div class="data-item"><span>10. SNS</span><span class="data-item-value">26</span></div>
          </div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üéØ Key Topics to Master</h3>
          <div class="insight positive">‚úÖ <strong>Multi-AZ:</strong> RDS, Aurora, ELB, NAT Gateway - automatic failover, high availability</div>
          <div class="insight positive">‚úÖ <strong>Auto Scaling:</strong> Target tracking, step scaling, scheduled scaling, lifecycle hooks</div>
          <div class="insight positive">‚úÖ <strong>Load Balancing:</strong> ALB (Layer 7), NLB (Layer 4), health checks, cross-zone</div>
          <div class="insight positive">‚úÖ <strong>Decoupling:</strong> SQS (standard vs FIFO), SNS, EventBridge</div>
          <div class="insight positive">‚úÖ <strong>Database HA:</strong> Multi-AZ vs Read Replicas vs Aurora Global Database</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">‚ö†Ô∏è Common Wrong Answer Traps</h3>
          <div class="insight warning">‚ùå Confusing Read Replicas (read scaling) with Multi-AZ (HA/failover)</div>
          <div class="insight warning">‚ùå Confusing CloudWatch (metrics) with CloudTrail (API logs)</div>
          <div class="insight warning">‚ùå Using single AZ for production workloads</div>
          <div class="insight warning">‚ùå Forgetting Read Replicas don't provide automatic failover</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üí° Quick Reference</h3>
          <div class="insight">üîë <strong>Multi-AZ:</strong> Automatic failover, synchronous replication, RTO: 1-2 minutes</div>
          <div class="insight">üîë <strong>Read Replicas:</strong> Read scaling, asynchronous, manual promotion required</div>
          <div class="insight">üîë <strong>SQS Standard:</strong> At-least-once delivery, best-effort ordering</div>
          <div class="insight">üîë <strong>SQS FIFO:</strong> Exactly-once processing, strict ordering, 3000 msg/sec with batching</div>
          <div class="insight">üîë <strong>Minimum AZs:</strong> Always use at least 2 AZs for high availability</div>
        </div>
      </div>

      <!-- Design Performant -->
      <div id="domain-performant" class="domain-content" style="display:none">
        <div class="card">
          <div class="card-title">‚ö° Design High-Performing Architectures (152 Questions)</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üèÜ Top 10 Most Tested Services</h3>
          <div style="display:grid;gap:.5rem;margin-bottom:1.5rem">
            <div class="data-item"><span>1. S3</span><span class="data-item-value">138</span></div>
            <div class="data-item"><span>2. EC2</span><span class="data-item-value">81</span></div>
            <div class="data-item"><span>3. Lambda</span><span class="data-item-value">58</span></div>
            <div class="data-item"><span>4. DynamoDB</span><span class="data-item-value">46</span></div>
            <div class="data-item"><span>5. Kinesis</span><span class="data-item-value">43</span></div>
            <div class="data-item"><span>6. CloudFront</span><span class="data-item-value">42</span></div>
            <div class="data-item"><span>7. RDS</span><span class="data-item-value">40</span></div>
            <div class="data-item"><span>8. Auto Scaling</span><span class="data-item-value">35</span></div>
            <div class="data-item"><span>9. Aurora</span><span class="data-item-value">34</span></div>
            <div class="data-item"><span>10. API Gateway</span><span class="data-item-value">31</span></div>
          </div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üéØ Key Topics to Master</h3>
          <div class="insight positive">‚úÖ <strong>Caching:</strong> CloudFront (edge), ElastiCache (Redis/Memcached), DAX (DynamoDB)</div>
          <div class="insight positive">‚úÖ <strong>Database Performance:</strong> Aurora, DynamoDB, read replicas, proper indexing</div>
          <div class="insight positive">‚úÖ <strong>Serverless:</strong> Lambda optimization, API Gateway, Step Functions</div>
          <div class="insight positive">‚úÖ <strong>S3 Performance:</strong> Transfer Acceleration, Multipart Upload, prefixes for scaling</div>
          <div class="insight positive">‚úÖ <strong>Data Processing:</strong> Kinesis, EMR, Glue, Athena, Redshift</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">‚ö†Ô∏è Common Wrong Answer Traps</h3>
          <div class="insight warning">‚ùå Not using caching when latency is critical</div>
          <div class="insight warning">‚ùå Using wrong EBS type (IOPS vs throughput)</div>
          <div class="insight warning">‚ùå Spot Instances for stable workloads (use Reserved)</div>
          <div class="insight warning">‚ùå Not using CloudFront for global content delivery</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üí° Quick Reference</h3>
          <div class="insight">üîë <strong>ElastiCache:</strong> Redis (complex data) vs Memcached (simple key-value)</div>
          <div class="insight">üîë <strong>DAX:</strong> DynamoDB-specific cache, microsecond latency, API-compatible</div>
          <div class="insight">üîë <strong>S3 Transfer Acceleration:</strong> Uses CloudFront edge locations for faster uploads</div>
          <div class="insight">üîë <strong>Multipart Upload:</strong> For files >100MB, parallel uploads improve throughput</div>
          <div class="insight">üîë <strong>Aurora:</strong> 5x faster than MySQL, 3x faster than PostgreSQL, auto-scaling storage</div>
        </div>
      </div>

      <!-- Design Cost -->
      <div id="domain-cost" class="domain-content" style="display:none">
        <div class="card">
          <div class="card-title">üí∞ Design Cost-Optimized Architectures (90 Questions)</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üèÜ Top 10 Most Tested Services</h3>
          <div style="display:grid;gap:.5rem;margin-bottom:1.5rem">
            <div class="data-item"><span>1. S3</span><span class="data-item-value">167</span></div>
            <div class="data-item"><span>2. EC2</span><span class="data-item-value">50</span></div>
            <div class="data-item"><span>3. EFS</span><span class="data-item-value">44</span></div>
            <div class="data-item"><span>4. Lambda</span><span class="data-item-value">34</span></div>
            <div class="data-item"><span>5. Glacier</span><span class="data-item-value">31</span></div>
            <div class="data-item"><span>6. EBS</span><span class="data-item-value">25</span></div>
            <div class="data-item"><span>7. CloudFront</span><span class="data-item-value">21</span></div>
            <div class="data-item"><span>8. VPC</span><span class="data-item-value">16</span></div>
            <div class="data-item"><span>9. Fargate</span><span class="data-item-value">13</span></div>
            <div class="data-item"><span>10. DynamoDB</span><span class="data-item-value">12</span></div>
          </div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üéØ Key Topics to Master</h3>
          <div class="insight positive">‚úÖ <strong>EC2 Pricing:</strong> On-Demand, Reserved (1/3yr), Spot (up to 90% off), Savings Plans</div>
          <div class="insight positive">‚úÖ <strong>S3 Storage Classes:</strong> Standard, IA, One Zone-IA, Intelligent-Tiering, Glacier</div>
          <div class="insight positive">‚úÖ <strong>Serverless:</strong> Lambda (pay per invocation), Fargate, S3, DynamoDB</div>
          <div class="insight positive">‚úÖ <strong>Data Transfer:</strong> CloudFront, VPC endpoints reduce egress costs</div>
          <div class="insight positive">‚úÖ <strong>Cost Tools:</strong> Cost Explorer, Budgets, Trusted Advisor, Compute Optimizer</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">‚ö†Ô∏è Common Wrong Answer Traps</h3>
          <div class="insight warning">‚ùå Using S3 Standard for infrequent access (use S3 IA)</div>
          <div class="insight warning">‚ùå Over-provisioning EBS volumes</div>
          <div class="insight warning">‚ùå Not using lifecycle policies for S3</div>
          <div class="insight warning">‚ùå On-Demand for predictable workloads (use Reserved/Savings Plans)</div>

          <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üí° Quick Reference</h3>
          <div class="insight">üîë <strong>Reserved Instances:</strong> Up to 72% savings, 1 or 3-year commitment</div>
          <div class="insight">üîë <strong>Spot Instances:</strong> Up to 90% off, for interruptible workloads</div>
          <div class="insight">üîë <strong>S3 Intelligent-Tiering:</strong> Auto-moves objects between tiers, no retrieval fees</div>
          <div class="insight">üîë <strong>S3 Glacier:</strong> $1/TB/month for archives, retrieval in minutes to hours</div>
          <div class="insight">üîë <strong>VPC Gateway Endpoint:</strong> Free access to S3/DynamoDB, no data transfer charges</div>
        </div>
      </div>

      <!-- Exam Strategy -->
      <div class="card">
        <div class="card-title">üìù Exam Preparation Strategy</div>
        <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">‚è±Ô∏è Time Management (130 minutes / 65 questions)</h3>
        <div class="insight">‚è∞ Average <strong>2 minutes per question</strong></div>
        <div class="insight">‚è∞ Mark difficult questions, return later</div>
        <div class="insight">‚è∞ Reserve 15-20 minutes for final review</div>

        <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">üéØ Domain Weighting (Approximate)</h3>
        <div class="insight">üìä Design Resilient: ~30% (20 questions)</div>
        <div class="insight">üìä Design Performant: ~28% (18 questions)</div>
        <div class="insight">üìä Design Secure: ~24% (16 questions)</div>
        <div class="insight">üìä Design Cost: ~18% (11 questions)</div>

        <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">‚ùå Red Flags (Usually Wrong)</h3>
        <div class="insight warning">Overly complex solutions</div>
        <div class="insight warning">Manual processes instead of automation</div>
        <div class="insight warning">Self-managed vs AWS-managed services</div>
        <div class="insight warning">Single AZ for production</div>
        <div class="insight warning">Storing credentials in code</div>

        <h3 style="margin-top:1rem;margin-bottom:.5rem;color:var(--aws-orange)">‚úÖ Green Flags (Usually Correct)</h3>
        <div class="insight positive">Managed AWS services</div>
        <div class="insight positive">Automation over manual intervention</div>
        <div class="insight positive">Multi-AZ for high availability</div>
        <div class="insight positive">Least privilege for security</div>
        <div class="insight positive">Decoupled architectures</div>
      </div>
    </section>

    <!-- Services Reference -->
    <section id="services" class="app-section">
      <div class="card">
        <div class="card-title">üîç Search AWS Services</div>
        <input type="text" id="serviceSearch" placeholder="Search services..." style="width:100%;padding:.75rem;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text);font-size:1rem" oninput="filterServices()">
      </div>
      <div class="service-grid" id="serviceGrid"></div>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-left">
        <div class="footer-title">‚òÅÔ∏è AWSPrepAI</div>
        <div class="footer-subtitle">Built by Ihab Saloum ‚Ä¢ Open Source Project</div>
        <div style="display:flex;gap:.5rem;margin-top:.5rem;flex-wrap:wrap">
          <span class="tech-badge">JavaScript</span>
          <span class="tech-badge">HTML5</span>
          <span class="tech-badge">CSS3</span>
          <span class="tech-badge">LocalStorage</span>
          <span class="tech-badge">AI Analysis</span>
        </div>
      </div>
      <div class="footer-right">
        <a href="https://github.com/Isaloum/AWSPrepAI" target="_blank" class="footer-link">
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          View Source Code
        </a>
        <a href="https://github.com/Isaloum" target="_blank" class="footer-link">
          More Projects ‚Üí
        </a>
      </div>
    </div>
  </footer>

  <script>
    const DB = {
      get: (key) => JSON.parse(localStorage.getItem('awsprep_' + key) || '[]'),
      set: (key, data) => localStorage.setItem('awsprep_' + key, JSON.stringify(data)),
      getOne: (key) => JSON.parse(localStorage.getItem('awsprep_' + key) || 'null'),
      setOne: (key, data) => localStorage.setItem('awsprep_' + key, JSON.stringify(data))
    };

    // Tab Navigation
    document.querySelectorAll('.nav-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.app-section').forEach(s => s.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');

        // Hide floating tips button when not on quiz tab
        if (tab.dataset.tab !== 'quiz') {
          document.getElementById('floatingTips').style.display = 'none';
        }
      });
    });

    // Study Guide Domain Switching
    function showDomain(domain) {
      // Hide all domain content
      document.querySelectorAll('.domain-content').forEach(d => d.style.display = 'none');

      // Show selected domain
      document.getElementById('domain-' + domain).style.display = 'block';

      // Update button styles
      document.querySelectorAll('#study-guide .btn-group .btn').forEach(btn => {
        btn.classList.remove('btn-primary');
        btn.classList.add('btn-secondary');
      });
      event.target.classList.remove('btn-secondary');
      event.target.classList.add('btn-primary');
    }

    // Quick Tips Modal
    const domainTips = {
      'design-secure': {
        title: 'üîê Design Secure Architectures',
        tips: [
          '<strong>IAM Best Practices:</strong> Use roles over users, enable MFA, apply least privilege principle',
          '<strong>Encryption:</strong> EBS/S3 encryption at rest, TLS in transit, KMS for key management',
          '<strong>VPC Security:</strong> Security Groups are stateful, NACLs are stateless and subnet-level',
          '<strong>Common Traps:</strong> Don\'t confuse IAM policies with S3 bucket policies, Security Groups with NACLs',
          '<strong>Key Services:</strong> IAM (89 questions), KMS (45), VPC (34), Security Groups (28), CloudTrail (23)'
        ]
      },
      'design-resilient': {
        title: 'üõ°Ô∏è Design Resilient Architectures',
        tips: [
          '<strong>High Availability:</strong> Multi-AZ deployments, ELB for load distribution, Auto Scaling',
          '<strong>Disaster Recovery:</strong> Backup/Restore ‚Üí Pilot Light ‚Üí Warm Standby ‚Üí Multi-Site',
          '<strong>Decoupling:</strong> Use SQS for queues, SNS for pub/sub, EventBridge for events',
          '<strong>Common Traps:</strong> Don\'t use ALB for Layer 4 (use NLB), don\'t skip health checks',
          '<strong>Key Services:</strong> Auto Scaling (34 questions), ELB (28), RDS Multi-AZ (23), S3 (67)'
        ]
      },
      'design-performant': {
        title: '‚ö° Design High-Performing Architectures',
        tips: [
          '<strong>Caching:</strong> CloudFront for global, ElastiCache (Redis/Memcached) for database',
          '<strong>Database:</strong> RDS for relational, DynamoDB for NoSQL, Aurora for performance',
          '<strong>Compute:</strong> EC2 for baseline, Lambda for serverless, ECS/Fargate for containers',
          '<strong>Common Traps:</strong> Don\'t use RDS for high-write workloads (use DynamoDB)',
          '<strong>Key Services:</strong> S3 (145 questions), Lambda (45), CloudFront (34), ElastiCache (23)'
        ]
      },
      'design-cost': {
        title: 'üí∞ Design Cost-Optimized Architectures',
        tips: [
          '<strong>S3 Storage:</strong> Standard ‚Üí IA ‚Üí Glacier ‚Üí Deep Archive based on access patterns',
          '<strong>Compute:</strong> Savings Plans, Reserved Instances, Spot for fault-tolerant workloads',
          '<strong>Monitoring:</strong> Cost Explorer, Budgets, CloudWatch for resource optimization',
          '<strong>Common Traps:</strong> Don\'t keep unused EBS volumes, NAT Gateway costs add up',
          '<strong>Key Services:</strong> S3 (78 questions), EC2 (34), RDS (28), Cost Explorer (12)'
        ]
      }
    };

    function showQuickTips() {
      const currentCat = window.currentQuestion?.cat || 'design-secure';
      const tips = domainTips[currentCat];

      if (!tips) return;

      const content = `
        <div style="margin-bottom:1rem">
          <h3 style="color:var(--aws-orange);margin-bottom:.5rem">${tips.title}</h3>
          <p style="color:var(--muted);font-size:.9rem">Context-sensitive tips for your current domain</p>
        </div>
        <div style="display:grid;gap:.75rem">
          ${tips.tips.map(tip => `
            <div style="background:var(--bg);padding:1rem;border-radius:8px;border-left:3px solid var(--aws-orange)">
              ${tip}
            </div>
          `).join('')}
        </div>
        <div style="margin-top:1.5rem;text-align:center">
          <button class="btn btn-primary" onclick="closeTips()">Got it! üëç</button>
        </div>
      `;

      document.getElementById('tipsContent').innerHTML = content;
      document.getElementById('tipsModal').classList.add('active');
    }

    function closeTips() {
      document.getElementById('tipsModal').classList.remove('active');
    }

    // Close modal on background click
    document.getElementById('tipsModal')?.addEventListener('click', (e) => {
      if (e.target.id === 'tipsModal') closeTips();
    });

    // Certification Data
    const certifications = {
      clf: {
        name: "Cloud Practitioner",
        code: "CLF-C02",
        passScore: 70,
        questions: 65,
        time: 90,
        domains: ["cloud-concepts", "security", "technology", "billing"],
        domainLabels: { "cloud-concepts": "‚òÅÔ∏è Cloud Concepts", "security": "üîê Security", "technology": "üñ•Ô∏è Technology", "billing": "üí∞ Billing & Pricing" }
      },
      saa: {
        name: "Solutions Architect Associate",
        code: "SAA-C03",
        passScore: 72,
        questions: 65,
        time: 130,
        domains: ["design-secure", "design-resilient", "design-performant", "design-cost"],
        domainLabels: { "design-secure": "üîê Secure Architectures", "design-resilient": "üõ°Ô∏è Resilient Architectures", "design-performant": "‚ö° High-Performing", "design-cost": "üí∞ Cost-Optimized" }
      }
    };

    // CLF-C02 Questions
    const clfQuestions = [
      { cat: "cloud-concepts", q: "What does EC2 stand for?", options: ["Elastic Compute Cloud", "Electronic Computing Center", "Enterprise Cloud Computing", "Elastic Container Cluster"], answer: 0, explain: "EC2 = Elastic Compute Cloud. Virtual servers in the cloud." },
      { cat: "cloud-concepts", q: "What is AWS Lambda?", options: ["Database service", "Serverless compute", "Storage service", "Networking tool"], answer: 1, explain: "Lambda runs code without provisioning servers." },
      { cat: "cloud-concepts", q: "Which service provides object storage?", options: ["EBS", "S3", "RDS", "EC2"], answer: 1, explain: "S3 (Simple Storage Service) stores objects with unlimited scalability." },
      { cat: "cloud-concepts", q: "What is the benefit of cloud computing elasticity?", options: ["Lower security", "Fixed capacity", "Scale up/down based on demand", "Higher latency"], answer: 2, explain: "Elasticity means automatically adjusting resources to match demand." },
      { cat: "cloud-concepts", q: "What is a Region in AWS?", options: ["A single data center", "A geographical area with multiple AZs", "A virtual network", "A security group"], answer: 1, explain: "A Region is a geographical area containing multiple Availability Zones." },
      { cat: "cloud-concepts", q: "What is an Availability Zone?", options: ["Multiple regions combined", "One or more data centers", "A virtual machine", "A storage bucket"], answer: 1, explain: "An AZ is one or more discrete data centers with redundant power and networking." },
      { cat: "cloud-concepts", q: "What EC2 pricing offers biggest discount for long-term?", options: ["On-Demand", "Spot", "Reserved Instances", "Dedicated"], answer: 2, explain: "Reserved Instances offer up to 72% discount for 1-3 year commitments." },
      { cat: "cloud-concepts", q: "What are Spot Instances?", options: ["Free instances", "Unused capacity at discount", "Premium instances", "Dedicated hardware"], answer: 1, explain: "Spot uses spare EC2 capacity at up to 90% discount but can be interrupted." },
      { cat: "cloud-concepts", q: "What is AWS Elastic Beanstalk?", options: ["Container service", "PaaS for apps", "Database", "CDN"], answer: 1, explain: "Elastic Beanstalk is PaaS that handles deployment automatically." },
      { cat: "cloud-concepts", q: "What does an AMI contain?", options: ["Just OS", "Template for EC2", "Container images", "Database"], answer: 1, explain: "AMI is a template with OS, applications, and configurations." },

      { cat: "security", q: "What does IAM stand for?", options: ["Internet Access Management", "Identity and Access Management", "Integrated Application Module", "Instance Availability Manager"], answer: 1, explain: "IAM manages users, groups, roles, and permissions." },
      { cat: "security", q: "What is the shared responsibility model?", options: ["AWS manages all", "Customer manages all", "AWS: infrastructure, Customer: data", "Only enterprise"], answer: 2, explain: "AWS secures the cloud; customers secure what's IN the cloud." },
      { cat: "security", q: "What is an IAM role?", options: ["User account", "Temporary credentials", "Group of users", "Password policy"], answer: 1, explain: "Roles provide temporary credentials for services or cross-account access." },
      { cat: "security", q: "Which service provides DDoS protection?", options: ["WAF", "Shield", "GuardDuty", "Inspector"], answer: 1, explain: "AWS Shield provides DDoS protection." },
      { cat: "security", q: "What is AWS KMS?", options: ["Container management", "Key management", "Kubernetes", "Monitoring"], answer: 1, explain: "KMS creates and manages encryption keys." },
      { cat: "security", q: "What is MFA?", options: ["Multiple Firewall Access", "Multi-Factor Authentication", "Managed File Access", "Main Function Admin"], answer: 1, explain: "MFA adds an extra authentication factor beyond password." },
      { cat: "security", q: "What is principle of least privilege?", options: ["Max permissions", "Only needed permissions", "No permissions", "Admin for all"], answer: 1, explain: "Grant only minimum permissions required for a task." },
      { cat: "security", q: "What does AWS WAF protect against?", options: ["DDoS only", "SQL injection & XSS", "Physical theft", "Power outage"], answer: 1, explain: "WAF protects web apps from common exploits." },

      { cat: "technology", q: "What is VPC?", options: ["Virtual Private Cloud", "Virtual Processing Center", "Verified Public Connection", "Variable Pricing"], answer: 0, explain: "VPC is your isolated network in AWS." },
      { cat: "technology", q: "What is CloudFront?", options: ["DNS service", "CDN", "Database", "Compute"], answer: 1, explain: "CloudFront is a CDN for fast global content delivery." },
      { cat: "technology", q: "What is Route 53?", options: ["CDN", "DNS service", "VPN", "Storage"], answer: 1, explain: "Route 53 is DNS and domain registration service." },
      { cat: "technology", q: "What database is DynamoDB?", options: ["Relational", "Graph", "NoSQL key-value", "Time-series"], answer: 2, explain: "DynamoDB is NoSQL with single-digit ms latency." },
      { cat: "technology", q: "What is RDS?", options: ["NoSQL database", "Managed relational DB", "Cache", "Storage"], answer: 1, explain: "RDS manages MySQL, PostgreSQL, SQL Server, etc." },
      { cat: "technology", q: "What is ElastiCache for?", options: ["Storage", "In-memory caching", "Compute", "Networking"], answer: 1, explain: "ElastiCache provides Redis or Memcached caching." },
      { cat: "technology", q: "What is EBS?", options: ["Object storage", "Block storage for EC2", "File storage", "Archive"], answer: 1, explain: "EBS provides persistent block storage for EC2." },
      { cat: "technology", q: "What is EFS?", options: ["Block storage", "Shared file system", "Object storage", "Archive"], answer: 1, explain: "EFS is shared NFS file storage for multiple EC2." },

      { cat: "billing", q: "What is AWS Free Tier?", options: ["Always free only", "12 months free for new accounts", "Students only", "None"], answer: 1, explain: "Free Tier includes 12 months limited free usage plus always-free services." },
      { cat: "billing", q: "What is Cost Explorer?", options: ["Service catalog", "Visualize costs", "Calculator", "Alarm"], answer: 1, explain: "Cost Explorer visualizes spending patterns." },
      { cat: "billing", q: "What estimates costs before deployment?", options: ["Cost Explorer", "Pricing Calculator", "Budgets", "Trusted Advisor"], answer: 1, explain: "Pricing Calculator estimates costs before use." },
      { cat: "billing", q: "What is AWS Budgets?", options: ["Calculate prices", "Set cost alerts", "Pay bills", "Get refunds"], answer: 1, explain: "Budgets sets alerts when costs exceed thresholds." },
      { cat: "billing", q: "Which support has TAM?", options: ["Basic", "Developer", "Business", "Enterprise"], answer: 3, explain: "Enterprise Support includes Technical Account Manager." },
      { cat: "billing", q: "What is always free?", options: ["EC2 t2.micro", "S3 5GB", "IAM", "RDS"], answer: 2, explain: "IAM is always free - no charge for users, roles, policies." },
      { cat: "billing", q: "What is Consolidated Billing?", options: ["Single bill for multiple accounts", "Installments", "Auto discounts", "Free tier extension"], answer: 0, explain: "Combines usage across accounts for volume discounts." },
      { cat: "billing", q: "On-Demand pricing means?", options: ["Long commitment", "No upfront, pay as you go", "Reserved", "Free"], answer: 1, explain: "On-Demand: pay by hour/second with no commitment." }
    ];

    // SAA-C03 Questions (Solutions Architect) - Full 65-Question Mock Exam
    const saaQuestions = [
      // Design Secure Architectures (16 questions)
      { cat: "design-secure", q: "A Lambda function in Account A needs to access an S3 bucket in Account B. What is required?", options: ["Only IAM role in Account A", "Only bucket policy in Account B", "IAM execution role + resource-based bucket policy", "VPC peering between accounts"], answer: 2, explain: "Cross-account access requires both identity-based policy (IAM role) AND resource-based policy (bucket policy) working together." },
      { cat: "design-secure", q: "How to enable EC2 instances to access S3 without storing credentials?", options: ["Store access keys in environment variables", "Attach IAM role to EC2 instance", "Use S3 pre-signed URLs only", "Enable public access on bucket"], answer: 1, explain: "IAM roles attached to EC2 provide temporary credentials automatically rotated by AWS STS." },
      { cat: "design-secure", q: "What enables private connectivity from VPC to S3 without internet?", options: ["Internet Gateway", "NAT Gateway", "VPC Gateway Endpoint", "AWS PrivateLink"], answer: 2, explain: "VPC Gateway Endpoints for S3 and DynamoDB allow private access without traversing the internet." },
      { cat: "design-secure", q: "Which KMS key type does AWS fully manage including rotation?", options: ["Customer managed CMK", "AWS managed key", "Imported key material", "CloudHSM key"], answer: 1, explain: "AWS managed keys are created, managed, and rotated automatically by AWS for integrated services." },
      { cat: "design-secure", q: "How to restrict S3 bucket access to only requests from a specific VPC?", options: ["Security group rules", "Bucket policy with aws:sourceVpc condition", "S3 Access Points only", "IAM user policies"], answer: 1, explain: "Bucket policies with aws:sourceVpc or aws:sourceVpce conditions restrict access to specific VPCs/endpoints." },
      { cat: "design-secure", q: "What automatically encrypts all new EBS volumes?", options: ["Lambda function on creation", "Account-level default EBS encryption", "CloudWatch Events trigger", "EC2 user data script"], answer: 1, explain: "Enable default EBS encryption at the account/region level to auto-encrypt all new volumes." },
      { cat: "design-secure", q: "Which service uses ML to continuously monitor for malicious activity?", options: ["AWS Inspector", "Amazon GuardDuty", "AWS Config", "AWS Shield"], answer: 1, explain: "GuardDuty uses machine learning and threat intelligence to detect threats across AWS accounts." },
      { cat: "design-secure", q: "How should secrets be stored for an application running on EC2?", options: ["Hardcoded in application code", "Environment variables in user data", "AWS Secrets Manager with IAM role", "S3 bucket with encryption"], answer: 2, explain: "Secrets Manager securely stores and automatically rotates secrets, accessed via IAM roles." },
      { cat: "design-secure", q: "What provides web application protection against SQL injection and XSS?", options: ["Security Groups", "NACLs", "AWS WAF", "AWS Shield Standard"], answer: 2, explain: "AWS WAF (Web Application Firewall) protects against common web exploits like SQLi and XSS." },
      { cat: "design-secure", q: "How to enforce MFA for all IAM users accessing the AWS Console?", options: ["Enable MFA on root only", "IAM policy with aws:MultiFactorAuthPresent condition", "Security Hub requirement", "CloudTrail logging"], answer: 1, explain: "IAM policies with MFA conditions can deny access unless MFA is authenticated." },
      { cat: "design-secure", q: "Which service discovers and protects sensitive data in S3?", options: ["AWS Inspector", "Amazon Macie", "AWS Config", "S3 Object Lock"], answer: 1, explain: "Amazon Macie uses ML to discover, classify, and protect sensitive data like PII in S3." },
      { cat: "design-secure", q: "How to securely connect on-premises network to AWS VPC?", options: ["Internet Gateway", "AWS Site-to-Site VPN", "NAT Gateway", "VPC Peering"], answer: 1, explain: "Site-to-Site VPN creates encrypted IPsec tunnel between on-premises and AWS VPC." },
      { cat: "design-secure", q: "What validates that AWS resources comply with security policies?", options: ["AWS Config Rules", "CloudWatch Alarms", "CloudTrail Logs", "IAM Access Analyzer"], answer: 0, explain: "AWS Config Rules evaluate resource configurations against desired security settings." },
      { cat: "design-secure", q: "How to grant temporary cross-account access without sharing credentials?", options: ["Share IAM user credentials", "IAM role with trust policy for external account", "Create IAM user in both accounts", "Use same root account"], answer: 1, explain: "IAM roles with cross-account trust policies allow secure temporary access via AssumeRole." },
      { cat: "design-secure", q: "What encrypts data in transit to RDS?", options: ["KMS encryption", "SSL/TLS certificates", "S3 SSE", "EBS encryption"], answer: 1, explain: "SSL/TLS encrypts data in transit; KMS/EBS encrypts at rest." },
      { cat: "design-secure", q: "Which service provides centralized security findings across AWS accounts?", options: ["AWS Organizations", "AWS Security Hub", "Amazon Detective", "AWS Artifact"], answer: 1, explain: "Security Hub aggregates security findings from GuardDuty, Inspector, Macie, and third-party tools." },

      // Design Resilient Architectures (17 questions)
      { cat: "design-resilient", q: "What automatically replaces unhealthy EC2 instances?", options: ["Elastic Load Balancer", "Auto Scaling Group", "Route 53 health checks", "CloudWatch Alarms"], answer: 1, explain: "Auto Scaling Groups detect unhealthy instances and automatically launch replacements." },
      { cat: "design-resilient", q: "Minimum number of Availability Zones for high availability?", options: ["1", "2", "3", "4"], answer: 1, explain: "At least 2 AZs are required for high availability to survive a single AZ failure." },
      { cat: "design-resilient", q: "What replicates S3 objects to another AWS Region automatically?", options: ["S3 Transfer Acceleration", "S3 Cross-Region Replication", "S3 Lifecycle Rules", "AWS DataSync"], answer: 1, explain: "S3 CRR automatically replicates objects to a bucket in another region for DR." },
      { cat: "design-resilient", q: "What does RDS Multi-AZ deployment provide?", options: ["Read scaling", "Automatic failover to standby", "Cost reduction", "Cross-region replication"], answer: 1, explain: "Multi-AZ maintains a synchronous standby replica with automatic failover." },
      { cat: "design-resilient", q: "How does Route 53 improve availability?", options: ["Caches DNS responses", "Health checks with failover routing", "Reduces latency only", "Provides DDoS protection"], answer: 1, explain: "Route 53 health checks detect failures and route traffic to healthy endpoints." },
      { cat: "design-resilient", q: "What is the durability of S3 Standard?", options: ["99.9%", "99.99%", "99.999999999% (11 9s)", "99.95%"], answer: 2, explain: "S3 Standard provides 99.999999999% durability by storing across multiple AZs." },
      { cat: "design-resilient", q: "What decouples application components for better fault tolerance?", options: ["Direct synchronous API calls", "Amazon SQS queues", "Shared database", "Hard-coded endpoints"], answer: 1, explain: "SQS queues decouple producers and consumers, allowing independent scaling and failure handling." },
      { cat: "design-resilient", q: "Aurora provides automatic failover to which resource?", options: ["Read Replica in same region", "Standby in another AZ", "S3 backup", "Manual snapshot"], answer: 0, explain: "Aurora automatically promotes a read replica to primary during failure." },
      { cat: "design-resilient", q: "How to protect against Regional AWS outages?", options: ["Multiple AZs only", "Multi-Region architecture", "Larger instance types", "More security groups"], answer: 1, explain: "Multi-Region deployments with Route 53 failover protect against regional failures." },
      { cat: "design-resilient", q: "What enables stateless application design for better scaling?", options: ["Store sessions in EC2 memory", "Store sessions in ElastiCache/DynamoDB", "Use sticky sessions only", "Single large instance"], answer: 1, explain: "External session storage (ElastiCache/DynamoDB) enables stateless instances that scale horizontally." },
      { cat: "design-resilient", q: "Lambda function timeout and how to handle long processes?", options: ["Increase to 24 hours", "Use Step Functions for orchestration", "Run synchronously only", "Disable timeout"], answer: 1, explain: "Lambda has 15-minute max timeout; Step Functions orchestrate long-running workflows." },
      { cat: "design-resilient", q: "What AWS service provides managed message queuing with exactly-once processing?", options: ["Amazon SNS", "Amazon SQS FIFO", "Amazon Kinesis", "AWS EventBridge"], answer: 1, explain: "SQS FIFO queues provide exactly-once processing and message ordering." },
      { cat: "design-resilient", q: "How to ensure DynamoDB data survives regional disaster?", options: ["Point-in-time recovery only", "DynamoDB Global Tables", "Export to S3 daily", "Provisioned capacity"], answer: 1, explain: "Global Tables provide multi-region, multi-active replication with automatic failover." },
      { cat: "design-resilient", q: "What enables EBS volume recovery from point-in-time snapshots?", options: ["EBS Lifecycle Manager", "AWS Backup", "Both A and B", "Manual snapshots only"], answer: 2, explain: "Both EBS Lifecycle Manager and AWS Backup automate EBS snapshot scheduling." },
      { cat: "design-resilient", q: "How does Application Load Balancer improve resilience?", options: ["Terminates SSL only", "Distributes traffic across healthy targets in multiple AZs", "Provides static IPs", "Blocks DDoS attacks"], answer: 1, explain: "ALB health checks route traffic only to healthy targets across multiple AZs." },
      { cat: "design-resilient", q: "What is the RTO difference between Multi-AZ and Read Replicas?", options: ["Same RTO", "Multi-AZ: minutes, Read Replica: manual promotion", "Read Replica faster", "Neither provides DR"], answer: 1, explain: "Multi-AZ provides automatic failover (1-2 min); Read Replica requires manual promotion." },
      { cat: "design-resilient", q: "How to implement circuit breaker pattern in AWS?", options: ["Security Groups", "Step Functions with error handling", "CloudWatch Alarms", "VPC Flow Logs"], answer: 1, explain: "Step Functions can implement circuit breakers with retry logic and error states." },

      // Design High-Performing Architectures (16 questions)
      { cat: "design-performant", q: "What caches frequently accessed database queries?", options: ["RDS Proxy", "Amazon ElastiCache", "DynamoDB DAX", "Both B and C"], answer: 3, explain: "ElastiCache (Redis/Memcached) caches RDS queries; DAX caches DynamoDB queries." },
      { cat: "design-performant", q: "Which EBS volume type provides highest IOPS?", options: ["gp3", "io2 Block Express", "st1", "sc1"], answer: 1, explain: "io2 Block Express provides up to 256,000 IOPS for demanding workloads." },
      { cat: "design-performant", q: "What accelerates global uploads to S3?", options: ["CloudFront", "S3 Transfer Acceleration", "Direct Connect", "S3 Intelligent-Tiering"], answer: 1, explain: "Transfer Acceleration uses CloudFront edge locations for faster long-distance uploads." },
      { cat: "design-performant", q: "How does CloudFront improve application performance?", options: ["Larger EC2 instances", "Edge location caching near users", "Database optimization", "Load balancing"], answer: 1, explain: "CloudFront caches content at 400+ edge locations, reducing latency globally." },
      { cat: "design-performant", q: "What provides microsecond latency for DynamoDB reads?", options: ["Provisioned capacity", "DynamoDB Accelerator (DAX)", "Global Tables", "On-demand capacity"], answer: 1, explain: "DAX is an in-memory cache providing microsecond read latency for DynamoDB." },
      { cat: "design-performant", q: "How to scale Lambda function performance?", options: ["Increase instance type", "Allocate more memory (also increases CPU)", "Add more ENIs", "Use larger VPC"], answer: 1, explain: "Lambda CPU scales proportionally with memory allocation (128MB to 10GB)." },
      { cat: "design-performant", q: "What offloads read traffic from primary RDS database?", options: ["Multi-AZ standby", "Read Replicas", "RDS Proxy", "Parameter groups"], answer: 1, explain: "Read Replicas handle read queries, scaling read capacity up to 5x (15 for Aurora)." },
      { cat: "design-performant", q: "How does Global Accelerator improve performance?", options: ["Database caching", "Routes traffic over AWS global network", "Increases instance size", "Compresses data"], answer: 1, explain: "Global Accelerator uses anycast IPs and AWS backbone for consistent low latency." },
      { cat: "design-performant", q: "What is the best storage for high-performance computing (HPC)?", options: ["EBS gp2", "Amazon FSx for Lustre", "S3 Standard", "EFS General Purpose"], answer: 1, explain: "FSx for Lustre provides sub-millisecond latencies for HPC and ML workloads." },
      { cat: "design-performant", q: "How to reduce Lambda cold starts?", options: ["Smaller package size", "Provisioned Concurrency", "Longer timeout", "Both A and B"], answer: 3, explain: "Smaller packages and Provisioned Concurrency both reduce cold start times." },
      { cat: "design-performant", q: "What enables parallel processing of Kinesis data streams?", options: ["Single shard", "Multiple shards", "Batch processing only", "S3 export"], answer: 1, explain: "Each Kinesis shard provides 1MB/s input, 2MB/s output; add shards for parallelism." },
      { cat: "design-performant", q: "How to optimize SQL database queries on RDS?", options: ["Increase storage", "Enable Performance Insights and optimize slow queries", "Use Multi-AZ", "Disable encryption"], answer: 1, explain: "Performance Insights identifies bottlenecks; optimize indexes and queries accordingly." },
      { cat: "design-performant", q: "What provides persistent, shared file storage for EC2 with high throughput?", options: ["EBS", "Instance Store", "Amazon EFS", "S3"], answer: 2, explain: "EFS provides shared NFS storage that scales automatically with high throughput modes." },
      { cat: "design-performant", q: "How to handle traffic spikes for a web application?", options: ["Manual scaling", "Auto Scaling with target tracking", "Single large instance", "Scheduled scaling only"], answer: 1, explain: "Target tracking Auto Scaling automatically adjusts capacity based on metrics like CPU." },
      { cat: "design-performant", q: "What is the fastest way to query large datasets in S3?", options: ["Download and process locally", "S3 Select / Athena", "Transfer to EC2 first", "Use CloudFront"], answer: 1, explain: "S3 Select and Athena query data in-place without full download, improving speed." },
      { cat: "design-performant", q: "How does RDS Proxy improve database performance?", options: ["Query caching", "Connection pooling and multiplexing", "Read replication", "Storage optimization"], answer: 1, explain: "RDS Proxy pools connections, reducing database overhead from many Lambda functions." },

      // Design Cost-Optimized Architectures (16 questions)
      { cat: "design-cost", q: "Most cost-effective option for steady-state, predictable workloads?", options: ["On-Demand Instances", "Spot Instances", "Reserved Instances or Savings Plans", "Dedicated Hosts"], answer: 2, explain: "Reserved Instances and Savings Plans offer up to 72% discount for committed usage." },
      { cat: "design-cost", q: "Cheapest S3 storage class for rarely accessed archive data?", options: ["S3 Standard", "S3 Standard-IA", "S3 Glacier Deep Archive", "S3 One Zone-IA"], answer: 2, explain: "Glacier Deep Archive is cheapest at ~$1/TB/month for long-term archives." },
      { cat: "design-cost", q: "What automatically moves S3 objects to cheaper storage classes?", options: ["S3 Versioning", "S3 Lifecycle Policies", "S3 Replication", "S3 Object Lock"], answer: 1, explain: "Lifecycle policies transition objects based on age (e.g., to IA after 30 days)." },
      { cat: "design-cost", q: "Best use case for Spot Instances?", options: ["Production databases", "Fault-tolerant batch processing", "Mission-critical web servers", "Stateful applications"], answer: 1, explain: "Spot Instances are ideal for interruptible workloads like batch jobs, CI/CD, big data." },
      { cat: "design-cost", q: "What does right-sizing EC2 instances achieve?", options: ["Maximum performance", "Matching resources to actual usage needs", "More availability zones", "Automatic scaling"], answer: 1, explain: "Right-sizing eliminates waste by using appropriately sized instances for workloads." },
      { cat: "design-cost", q: "Which service identifies cost optimization opportunities?", options: ["CloudWatch", "AWS Trusted Advisor", "AWS Config", "Systems Manager"], answer: 1, explain: "Trusted Advisor Cost Optimization checks for idle resources, underutilized instances." },
      { cat: "design-cost", q: "Why is serverless cost-effective for variable workloads?", options: ["Fixed monthly pricing", "Pay only for actual execution time/requests", "Free tier always applies", "Reserved capacity discounts"], answer: 1, explain: "Lambda charges per 1ms of execution; no cost when not running." },
      { cat: "design-cost", q: "Is data transfer between AZs in the same region free?", options: ["Yes, always free", "No, it costs ~$0.01/GB", "Free for EC2 only", "Free with VPC"], answer: 1, explain: "Cross-AZ data transfer is charged; design to minimize unnecessary cross-AZ traffic." },
      { cat: "design-cost", q: "How to reduce NAT Gateway costs for S3/DynamoDB access?", options: ["Larger NAT Gateway", "VPC Gateway Endpoints (free)", "Direct Connect", "Internet Gateway"], answer: 1, explain: "Gateway Endpoints for S3/DynamoDB are free and avoid NAT Gateway charges." },
      { cat: "design-cost", q: "What provides visibility into AWS spending patterns?", options: ["CloudTrail", "AWS Cost Explorer", "CloudWatch", "AWS Config"], answer: 1, explain: "Cost Explorer visualizes spending, forecasts costs, and identifies trends." },
      { cat: "design-cost", q: "How to optimize costs for infrequently accessed EFS data?", options: ["Delete old files", "EFS Infrequent Access storage class", "Move to S3 manually", "Use smaller instances"], answer: 1, explain: "EFS IA reduces storage costs by 92% for files not accessed frequently." },
      { cat: "design-cost", q: "What is the most cost-effective compute for containers?", options: ["EC2 On-Demand", "Fargate Spot", "Dedicated Hosts", "Outposts"], answer: 1, explain: "Fargate Spot provides up to 70% discount for fault-tolerant container workloads." },
      { cat: "design-cost", q: "How to prevent unexpected AWS bills?", options: ["Hope for the best", "AWS Budgets with alerts", "Check console daily", "Disable all services"], answer: 1, explain: "AWS Budgets alerts when spending approaches or exceeds defined thresholds." },
      { cat: "design-cost", q: "What is the benefit of Consolidated Billing?", options: ["Free services", "Volume discounts across accounts", "Automatic refunds", "Unlimited usage"], answer: 1, explain: "Consolidated Billing aggregates usage across accounts for volume pricing tiers." },
      { cat: "design-cost", q: "How to reduce costs for development/test environments?", options: ["Same as production", "Smaller instances, stop when not in use", "No backups needed", "Skip all testing"], answer: 1, explain: "Use smaller instances, stop outside business hours, use Spot for dev/test." },
      { cat: "design-cost", q: "What is S3 Intelligent-Tiering best for?", options: ["Archive data", "Unknown or changing access patterns", "Frequently accessed only", "One-time access"], answer: 1, explain: "Intelligent-Tiering automatically moves objects between tiers based on access patterns." },

      // Udemy Practice Exam - Additional 65 Questions
      // Design Resilient Architectures
      { cat: "design-resilient", q: "A company needs visual, code-free data transformation with profiling and lineage. Which service?", options: ["Amazon Athena", "AWS Glue DataBrew", "AWS Glue Studio", "Amazon AppFlow"], answer: 1, explain: "AWS Glue DataBrew provides visual data preparation with recipes, profiling, and lineage tracking - no code required." },
      { cat: "design-resilient", q: "SNS to Lambda notifications failing during peak 5000 req/sec. What's the issue?", options: ["SNS scalability limit", "Lambda concurrency quota exceeded", "Need more SNS servers", "Need more Lambda servers"], answer: 1, explain: "Lambda has account concurrency limits. Contact AWS support to raise the limit when SNS deliveries are throttled." },
      { cat: "design-resilient", q: "RDS Multi-AZ uses which replication type?", options: ["Asynchronous", "Synchronous", "Semi-synchronous", "Logical"], answer: 1, explain: "Multi-AZ uses synchronous replication for zero data loss. Read Replicas use asynchronous replication." },
      { cat: "design-resilient", q: "ALB routing based on URL path like /orders and /products?", options: ["Host-based routing", "Path-based routing", "Query string routing", "Header-based routing"], answer: 1, explain: "Path-based routing routes requests based on URL path patterns to different target groups." },
      { cat: "design-resilient", q: "SQS FIFO queue processing 1000 msg/sec. What batch size needed?", options: ["2 messages", "4 messages", "10 messages", "No batching needed"], answer: 1, explain: "FIFO supports 300 msg/sec default. With batching of 4, you get 1200 msg/sec (300 x 4)." },
      { cat: "design-resilient", q: "Protect S3 objects from accidental deletion?", options: ["S3 encryption", "Versioning + MFA Delete", "S3 lifecycle", "S3 replication"], answer: 1, explain: "Enable versioning to keep object versions, and MFA Delete to require MFA for permanent deletions." },
      { cat: "design-resilient", q: "Serverless solution to process game score updates in order?", options: ["SQS + EC2", "Kinesis + Lambda + DynamoDB", "SNS + EC2", "SQS + RDS"], answer: 1, explain: "Kinesis Data Streams with Lambda provides serverless, ordered message processing to DynamoDB." },
      { cat: "design-resilient", q: "Auto Scaling group with unbalanced AZs. How does rebalancing work?", options: ["Terminates first, then launches", "Launches first, then terminates", "Simultaneous", "Manual intervention"], answer: 1, explain: "ASG launches new instances before terminating old ones during rebalancing to maintain availability." },
      { cat: "design-resilient", q: "CloudWatch metric filter for CloudTrail to detect illegal API calls?", options: ["Use CloudTrail Insights only", "Create metric filter + alarm + SNS", "Use Athena queries", "Use Trusted Advisor"], answer: 1, explain: "Create CloudWatch metric filter on CloudTrail logs, set alarm on the metric, notify via SNS." },
      { cat: "design-resilient", q: "Government app needs exactly-once message processing. Which service?", options: ["SQS Standard", "SQS FIFO", "SNS", "EventBridge"], answer: 1, explain: "SQS FIFO queues guarantee exactly-once processing and message ordering." },
      { cat: "design-resilient", q: "EC2 maintenance in ASG without replacement. Best approach?", options: ["Delete ASG", "Put instance in Standby state", "Terminate instance", "Disable health checks globally"], answer: 1, explain: "Standby state keeps instance in ASG but excludes from load balancing during maintenance." },
      { cat: "design-resilient", q: "Scheduled Auto Scaling for month-end peak. Set desired capacity to?", options: ["Min count", "Max count", "Desired capacity to 10", "Both min and max to 10"], answer: 2, explain: "Use scheduled action with desired capacity for exact instance count at specific times." },

      // Design Secure Architectures
      { cat: "design-secure", q: "Root user security best practices?", options: ["Share credentials with owner", "Strong password + MFA", "Create access keys always", "Email password to backup"], answer: 1, explain: "Use strong password, enable MFA, never share credentials, avoid creating root access keys." },
      { cat: "design-secure", q: "Restrict live streaming to USA only. Which services?", options: ["Route 53 weighted + failover", "CloudFront geo-restriction + Route 53 geolocation", "VPC security groups", "Route 53 latency routing"], answer: 1, explain: "CloudFront geo-restriction and Route 53 geolocation routing restrict content by country." },
      { cat: "design-secure", q: "Encrypt S3 data with audit trail of key usage?", options: ["SSE-S3", "SSE-KMS", "SSE-C", "Client-side encryption"], answer: 1, explain: "SSE-KMS provides encryption with CloudTrail audit trail showing when and who used the key." },
      { cat: "design-secure", q: "Control maximum permissions developers can grant?", options: ["IAM groups", "Permissions boundary", "Resource policies", "SCPs only"], answer: 1, explain: "Permissions boundaries set maximum permissions that IAM principals can have." },
      { cat: "design-secure", q: "WAF on ALB blocks traffic from which countries?", options: ["Any country via geo match", "USA only", "Cannot block by country", "Requires CloudFront"], answer: 0, explain: "AWS WAF geo match conditions can block or allow traffic based on country of origin." },
      { cat: "design-secure", q: "Delegate cross-account access without sharing credentials?", options: ["Share IAM user", "IAM role with trust policy", "Same root account", "VPC peering"], answer: 1, explain: "IAM roles with cross-account trust policies allow secure temporary access via AssumeRole." },
      { cat: "design-secure", q: "IAM best practices for CloudTrail?", options: ["Disable logging", "Log all IAM actions", "Log root only", "Weekly logging"], answer: 1, explain: "Enable CloudTrail to log all IAM actions for auditing and monitoring." },
      { cat: "design-secure", q: "S3 DeleteObject permission - correct resource ARN?", options: ["arn:aws:s3:::bucket", "arn:aws:s3:::bucket/*", "arn:aws:s3:::bucket*", "arn:aws:s3:::*"], answer: 1, explain: "Object-level permissions require bucket/* ARN format, not just the bucket ARN." },
      { cat: "design-secure", q: "Private DNS resolution from VPC to on-premises?", options: ["Route 53 inbound endpoint", "Route 53 outbound endpoint with forwarding rule", "Private hosted zone", "Hybrid gateway"], answer: 1, explain: "Outbound endpoint forwards DNS queries from VPC to on-premises DNS servers." },
      { cat: "design-secure", q: "Connect to partner's RDS privately without internet?", options: ["VPC peering", "NLB + PrivateLink endpoint", "Public RDS + security group", "Client VPN"], answer: 1, explain: "Partner creates NLB in front of RDS, exposes via PrivateLink. Company uses interface endpoint." },
      { cat: "design-secure", q: "EKS Pod-level permissions following least privilege?", options: ["EC2 instance profile for all", "IRSA with separate service accounts", "Single shared service account", "Kubernetes RBAC only"], answer: 1, explain: "IAM Roles for Service Accounts (IRSA) provides fine-grained Pod-level IAM permissions." },
      { cat: "design-secure", q: "Centrally manage access for developers across AWS accounts with on-prem AD?", options: ["AWS Managed AD", "AD Connector + IAM Identity Center", "Custom IdP on EC2", "Control Tower only"], answer: 1, explain: "AD Connector proxies to on-prem AD. IAM Identity Center provides SSO with permission sets." },
      { cat: "design-secure", q: "Monitor S3 for malicious activity, EC2 for vulnerabilities?", options: ["Inspector for both", "GuardDuty for both", "GuardDuty for S3, Inspector for EC2", "Macie for both"], answer: 2, explain: "GuardDuty monitors threats across S3/accounts. Inspector scans EC2 for vulnerabilities." },
      { cat: "design-secure", q: "EFS access control for EC2 instances?", options: ["Security groups + IAM policies", "NACLs only", "GuardDuty", "S3 bucket policies"], answer: 0, explain: "Use VPC security groups for network control and IAM policies for file system permissions." },
      { cat: "design-secure", q: "Run Kubernetes on-premises with AWS APIs but all data local?", options: ["EKS in cloud", "EKS Anywhere on Outposts", "EKS with Direct Connect", "Snowball Edge"], answer: 1, explain: "AWS Outposts Rack with EKS Anywhere runs Kubernetes on-premises with AWS integration." },

      // Design High-Performing Architectures
      { cat: "design-performant", q: "Faster S3 uploads across continents?", options: ["CloudFront", "S3 Transfer Acceleration + Multipart", "Direct Connect", "VPN"], answer: 1, explain: "S3 Transfer Acceleration uses edge locations. Multipart upload enables parallel transfers." },
      { cat: "design-performant", q: "2GB file upload to S3 - fastest method?", options: ["Single PUT", "Multipart + S3TA", "FTP to EC2 first", "Multipart only"], answer: 1, explain: "Combine multipart upload with Transfer Acceleration for fastest uploads over long distances." },
      { cat: "design-performant", q: "Microsoft DFS migration to AWS?", options: ["FSx for Lustre", "FSx for Windows File Server", "AWS Managed AD", "SQL Server on AWS"], answer: 1, explain: "FSx for Windows supports DFS for organizing shares into folder structures up to hundreds of PB." },
      { cat: "design-performant", q: "Global UDP application with fast regional failover?", options: ["Route 53", "CloudFront", "AWS Global Accelerator", "ELB"], answer: 2, explain: "Global Accelerator supports TCP/UDP, provides static IPs, and fast regional failover." },
      { cat: "design-performant", q: "On-premises dynamic website for Asia users, backend in US?", options: ["S3 + CRR", "CloudFront with custom origin to on-prem", "Route 53 geo-proximity", "CloudFront with Route 53 DNS origin"], answer: 1, explain: "CloudFront caches at edge locations near users, custom origin points to on-premises servers." },
      { cat: "design-performant", q: "Extract ingredients from text files without ML expertise?", options: ["SageMaker custom model", "Amazon Comprehend custom entity recognition", "Amazon Transcribe", "Lookout for Vision"], answer: 1, explain: "Comprehend's custom entity recognition extracts entities from text without ML expertise." },
      { cat: "design-performant", q: "REST API for real-time location analytics?", options: ["API Gateway + Lambda", "API Gateway + Kinesis Data Analytics", "Athena + S3", "QuickSight + Redshift"], answer: 1, explain: "API Gateway receives requests, Kinesis Data Analytics processes real-time streaming data." },
      { cat: "design-performant", q: "Database timeouts during peak - serverless scaling solution?", options: ["Manual EC2 scaling", "RDS Proxy + SQS + Auto Scaling workers", "Larger RDS instance", "Aurora Serverless only"], answer: 1, explain: "RDS Proxy handles connection pooling. SQS decouples. Auto Scaling handles worker capacity." },
      { cat: "design-performant", q: "High random I/O for HPC with replicated data across fleet?", options: ["EBS io2", "Instance Store", "EFS", "S3"], answer: 1, explain: "Instance Store provides high I/O at no extra cost; data replicated by application handles failures." },
      { cat: "design-performant", q: "FSx for Lustre use case?", options: ["Windows file shares", "HPC and ML workloads", "DFS support", "Microsoft AD"], answer: 1, explain: "FSx for Lustre provides sub-millisecond latency for HPC, ML, and video processing." },
      { cat: "design-performant", q: "S3 bucket with 5000+ req/sec hitting scalability issues?", options: ["Use bigger bucket", "Create customer-specific prefixes", "One bucket per customer", "One bucket per day"], answer: 1, explain: "S3 supports 3,500 PUT and 5,500 GET per prefix. Use prefixes to parallelize and scale." },
      { cat: "design-performant", q: "EC2 placement for low-latency HPC?", options: ["Spread placement group", "Partition placement group", "Cluster placement group", "Auto Scaling group"], answer: 2, explain: "Cluster placement groups pack instances close together for low-latency, high-throughput HPC." },
      { cat: "design-performant", q: "EFS shared across regions?", options: ["Not possible", "Inter-region VPC peering", "EFS replication only", "S3 required"], answer: 1, explain: "EFS can be accessed across regions using inter-region VPC peering connections." },
      { cat: "design-performant", q: "AMI copied to Region B creates what in Region B?", options: ["Just AMI", "Just snapshot", "EC2 + AMI", "EC2 + AMI + snapshot"], answer: 3, explain: "AMI copy creates the AMI and underlying snapshot. Launching creates the EC2 instance." },
      { cat: "design-performant", q: "API Gateway stateless vs stateful APIs?", options: ["Both RESTful are stateful", "REST stateless, WebSocket stateful", "Both are stateless", "Both are stateful"], answer: 1, explain: "RESTful APIs are stateless. WebSocket APIs are stateful with full-duplex communication." },
      { cat: "design-performant", q: "EBS volume types that CANNOT be boot volumes?", options: ["gp2 and io1", "st1 and sc1", "gp3 and io2", "All can be boot"], answer: 1, explain: "HDD types (st1 Throughput Optimized, sc1 Cold HDD) cannot be used as boot volumes." },
      { cat: "design-performant", q: "Migrate SQL Server T-SQL to Aurora PostgreSQL with minimal refactoring?", options: ["AWS DMS only", "Babelfish for Aurora PostgreSQL + SCT/DMS", "FSx for Windows", "Manual query rewrite"], answer: 1, explain: "Babelfish enables Aurora PostgreSQL to understand T-SQL. SCT converts schema, DMS migrates data." },
      { cat: "design-performant", q: "In-memory leaderboard for gaming - which services?", options: ["DynamoDB only", "ElastiCache Redis or DynamoDB with DAX", "RDS Aurora", "Neptune"], answer: 1, explain: "ElastiCache Redis provides in-memory data store. DAX provides in-memory caching for DynamoDB." },
      { cat: "design-performant", q: "SQL-based ML in data warehouse without Python?", options: ["Athena ML", "Redshift ML", "RDS ML", "SageMaker only"], answer: 1, explain: "Amazon Redshift ML allows creating, training, and deploying ML models using SQL." },
      { cat: "design-performant", q: "Long-running container tasks with serverless compute?", options: ["Lambda", "ECS with Fargate", "EC2 only", "Lightsail"], answer: 1, explain: "ECS with Fargate provides serverless container compute without managing infrastructure." },
      { cat: "design-performant", q: "Dedicated encrypted low-latency high-throughput connection to AWS?", options: ["Site-to-Site VPN", "Direct Connect + VPN", "Transit Gateway only", "Direct Connect only"], answer: 1, explain: "Direct Connect provides dedicated low-latency connection. Adding VPN provides encryption." },

      // Design Cost-Optimized Architectures
      { cat: "design-cost", q: "Access S3 from Lambda in Account A to EFS in Account B privately?", options: ["S3 bucket in partner account", "EFS resource policy + VPC peering/endpoint", "Lambda layer", "Proxy Lambda"], answer: 1, explain: "EFS resource policies allow cross-account access. Mount via shared VPC or peered VPC." },
      { cat: "design-cost", q: "S3 invalid lifecycle transitions?", options: ["Standard to Intelligent-Tiering", "Intelligent-Tiering to Standard", "Standard-IA to One Zone-IA", "Standard to Glacier"], answer: 1, explain: "Cannot transition TO Standard or Reduced Redundancy. Cannot go from One Zone-IA to Standard-IA." },
      { cat: "design-cost", q: "Re-creatable assets accessed occasionally after first week?", options: ["S3 Standard", "S3 One Zone-IA after 30 days", "S3 Standard-IA after 7 days", "Glacier immediately"], answer: 1, explain: "One Zone-IA is 20% cheaper than Standard-IA. 30-day minimum before lifecycle transition." },
      { cat: "design-cost", q: "Intermediary query results kept 24 hours, heavily referenced?", options: ["S3 Standard", "S3 Standard-IA", "S3 One Zone-IA", "Glacier Instant Retrieval"], answer: 0, explain: "S3 Standard has no minimum duration charge or retrieval fees - cheapest for short-term, frequently accessed data." },
      { cat: "design-cost", q: "60-minute workflow that can be interrupted - most cost-effective?", options: ["On-Demand EC2", "Spot Instances", "Reserved Instances", "Lambda"], answer: 1, explain: "Spot Instances offer up to 90% discount for fault-tolerant, interruptible workloads." },
      { cat: "design-cost", q: "ECS pricing: EC2 launch type vs Fargate?", options: ["Both by vCPU/memory", "Both by EC2/EBS", "EC2 by resources, Fargate by vCPU/memory", "Fargate free"], answer: 2, explain: "EC2 launch type: pay for EC2/EBS. Fargate: pay for vCPU and memory requested by containers." },
      { cat: "design-cost", q: "Hybrid NFS storage with automated tiering to lower-cost classes?", options: ["EFS with lifecycle", "Storage Gateway File Gateway + S3 lifecycle", "Volume Gateway", "FSx for Windows"], answer: 1, explain: "File Gateway presents NFS interface, stores in S3. S3 lifecycle policies tier to cheaper classes." },
      { cat: "design-cost", q: "1GB file storage cost comparison: S3 vs EFS vs EBS 100GB?", options: ["EBS < S3 < EFS", "S3 < EFS < EBS", "EFS < S3 < EBS", "S3 < EBS < EFS"], answer: 1, explain: "S3: ~$0.023/GB. EFS: ~$0.30/GB. EBS gp2 100GB provisioned: $10/month regardless of usage." },
      { cat: "design-cost", q: "S3TA upload didn't accelerate - what's charged?", options: ["Both S3 and S3TA charges", "Only S3TA charges", "Only S3 charges", "No charges (data in is free)"], answer: 3, explain: "Data transfer IN to S3 is free. S3TA only charges when acceleration occurs." },
      { cat: "design-cost", q: "CloudFront vs direct S3 for static content delivery?", options: ["S3 always cheaper", "CloudFront typically more cost-effective", "Same cost", "CloudFront only for video"], answer: 1, explain: "CloudFront can be more cost-effective due to caching, reduced S3 requests, and lower data transfer rates." },


      // Practice Test #1 - 65 Questions (Udemy SAA-C03)
      { cat: "design-resilient", q: "Healthcare analytics company centralizes clinical datasets in S3 data lake. Users need code-free interface for data preparation workflows with data lineage tracking and profiling. Which solution?", options: ["Athena SQL queries to transform on S3", "AWS Glue DataBrew to visually build transformation workflows", "AWS Glue Studio visual canvas for transformations", "AppFlow to move and transform Parquet files"], answer: 1, explain: "DataBrew is serverless data preparation tool with no-code interface. Provides reusable recipes for transformation steps, built-in data profiling, and audit trail for lineage." },
      { cat: "design-secure", q: "IT consultant setting up AWS account. Security recommendations for root user? (Select 2)", options: ["Encrypt access keys and save on S3", "Create strong password for root user", "Enable MFA for root user account", "Create root access keys and share with owner", "Email owner with login details"], answer: [1,2], explain: "Best practices: use strong password, enable MFA, never share credentials, don't create access keys unless absolutely needed." },
      { cat: "design-performant", q: "Gaming company streaming score updates to backend processor for leaderboard. Handle traffic spikes, process in order, store in highly available database. Minimize overhead?", options: ["Kinesis Data Streams with EC2 fleet to process and store in DynamoDB", "Kinesis Data Streams with Lambda to process and store in DynamoDB", "SNS topic with Lambda to process and store in SQL on EC2", "SQS queue with EC2 fleet to process and store in RDS MySQL"], answer: 1, explain: "Kinesis Data Streams handles real-time streaming at scale with ordering. Lambda provides serverless processing. DynamoDB offers high availability and low latency." },
      { cat: "design-secure", q: "Football league distribution rights for USA only. Restrict access from other countries. Which configurations? (Select 2)", options: ["Use CloudFront georestriction to prevent users in specific locations from accessing content", "Use Route 53 weighted routing to restrict distribution", "Use Route 53 geolocation routing to restrict distribution to only locations with rights", "Use Route 53 failover routing to restrict distribution", "Use Route 53 latency routing to restrict distribution"], answer: [0,2], explain: "CloudFront geo restriction (geo-blocking) prevents users in specific countries from accessing content via whitelist/blacklist. Route 53 geolocation routing restricts distribution based on geographic location of DNS queries." },
      { cat: "design-resilient", q: "Fitness company notification system using SNS to Lambda. During peak season (5000 req/sec) many notifications not delivered. What's the issue?", options: ["Need to provision more SNS servers", "SNS message deliveries to Lambda crossed account concurrency quota, contact AWS support to raise limit", "Need to provision more Lambda servers", "SNS hit scalability limit, contact AWS support"], answer: 1, explain: "Lambda has 1000 concurrent executions per account per region by default. If SNS deliveries to Lambda cross this quota, deliveries are throttled. Contact AWS support to raise limit." },
      { cat: "design-cost", q: "News network: branch offices in Europe and Asia report huge delays uploading large video files to S3. Most cost-effective options to improve upload speed? (Select 2)", options: ["Use S3 Transfer Acceleration for faster uploads", "Create multiple Site-to-Site VPN connections for faster uploads", "Create multiple Direct Connect connections for faster uploads", "Use multipart uploads for faster uploads", "Use Global Accelerator for faster uploads"], answer: [0,3], explain: "S3 Transfer Acceleration uses CloudFront edge locations for optimized network path. Multipart upload allows parallel upload of parts, improving throughput for large files." },
      { cat: "design-secure", q: "Financial services company onboarding DevOps engineer. IAM best practices to recommend? (Select 2)", options: ["Enable MFA for privileged users", "Configure CloudTrail to log all IAM actions", "Use user credentials for EC2 instance permissions", "Create minimum accounts and share credentials", "Grant maximum privileges to avoid reassigning"], answer: [0,1], explain: "Best practices: enable MFA for privileged users, use CloudTrail to log all IAM actions for monitoring/audit, don't share credentials, grant least privileges, use roles for EC2." },
      { cat: "design-performant", q: "Data analytics company: daily 2GB compressed file uploaded to S3 for backup. Fastest way to upload?", options: ["Multipart upload", "FTP to EC2 then transfer to S3", "Multipart upload with S3 Transfer Acceleration", "Single operation upload"], answer: 2, explain: "S3 Transfer Acceleration uses CloudFront edge locations for optimized network path. Multipart upload uploads parts in parallel for improved throughput. Combination is fastest." },
      { cat: "design-cost", q: "Biotechnology firm: Lambda in central account needs to access EFS in research partner account. Scalable, cost-efficient, minimal overhead?", options: ["Secondary Lambda in partner account mounts EFS, main Lambda invokes via API Gateway", "S3 bucket in partner account, periodic DataSync from EFS, use S3 Access Points", "Package data as Lambda layer and share across accounts", "Use EFS resource policies for cross-account access via shared/peered VPC, mount in Lambda using access point"], answer: 3, explain: "EFS resource policies allow cross-account access. Lambda can mount file system directly using EFS access point in shared/peered VPC. Native, scalable, cost-effective, minimal overhead." },
      { cat: "design-resilient", q: "DevOps engineer wants to understand RDS Multi-AZ and Read Replicas replication. Which is correct?", options: ["Multi-AZ async, spans 2+ AZs in region. Read replicas async, can be within AZ, Cross-AZ, Cross-Region", "Multi-AZ sync, spans 2+ AZs in region. Read replicas async, can be within AZ, Cross-AZ, Cross-Region", "Multi-AZ async, spans 2+ AZs in region. Read replicas sync, can be within AZ, Cross-AZ, Cross-Region", "Multi-AZ async, spans 1 AZ in region. Read replicas sync, can be within AZ, Cross-AZ, Cross-Region"], answer: 1, explain: "Multi-AZ: synchronously replicates to standby in different AZ, spans 2+ AZs. Read replicas: asynchronous replication, can be within AZ, Cross-AZ, or Cross-Region." },
      { cat: "design-resilient", q: "E-commerce company REST API in Auto Scaling group behind ALB. 90% read requests for common data. Most efficient solution to improve performance?", options: ["ElastiCache Redis for DynamoDB, ElastiCache Memcached for S3", "DynamoDB Accelerator (DAX) for DynamoDB, CloudFront for S3", "ElastiCache Redis for DynamoDB, CloudFront for S3", "DAX for DynamoDB, ElastiCache Memcached for S3"], answer: 1, explain: "DAX is fully managed in-memory cache for DynamoDB, API-compatible, delivers up to 10x performance improvement. CloudFront caches S3 static content at edge locations for low latency." },
      { cat: "design-performant", q: "Large financial institution migrating DFS data to hybrid cloud for data-intensive analytics. Which AWS service?", options: ["FSx for Lustre", "FSx for Windows File Server", "AWS Managed Microsoft AD", "Microsoft SQL Server on AWS"], answer: 1, explain: "FSx for Windows File Server provides fully managed SMB file storage with DFS support. Built on Windows Server with AD integration, can organize shares into single folder structure up to hundreds of PB." },
      { cat: "design-performant", q: "Gaming company flagship app uses UDP, needs fast regional failover if AWS Region goes down. Continue using custom DNS. Which solution?", options: ["Route 53", "Elastic Load Balancing", "AWS Global Accelerator", "CloudFront"], answer: 2, explain: "Global Accelerator is good fit for non-HTTP use cases like UDP. Provides static IPs, deterministic fast regional failover. CloudFront is for HTTP/HTTPS. ELB is regional." },
      { cat: "design-cost", q: "IT department training on S3. Identify INVALID lifecycle transitions. (Select 2)", options: ["S3 Standard-IA to Intelligent-Tiering", "S3 One Zone-IA to Standard-IA", "S3 Standard-IA to One Zone-IA", "S3 Intelligent-Tiering to Standard", "S3 Standard to Intelligent-Tiering"], answer: [1,3], explain: "Invalid transitions: any to Standard, any to Reduced Redundancy, Intelligent-Tiering to Standard-IA, One Zone-IA to Standard-IA or Intelligent-Tiering." },
      { cat: "design-performant", q: "Retail company launching website in Asia, backend in US. Optimize loading times for Asia users. Immediate solution needed?", options: ["Migrate to S3, use S3 CRR between US and Asia", "Route 53 geo-proximity routing to on-premises servers", "CloudFront with custom origin pointing to Route 53 DNS record", "CloudFront with custom origin pointing to on-premises servers"], answer: 3, explain: "CloudFront caches content at edge locations close to users. Custom origin can point to on-premises servers. Provides low latency for Asia users while backend remains in US." },
      { cat: "design-performant", q: "E-commerce manages product catalog in S3. Product descriptions may include ingredients. Extract ingredient names to query DynamoDB for health scores. No ML experts, cost-effective, minimal overhead?", options: ["Lookout for Vision to scan text files and extract entities", "Transcribe to convert synthetic audio to text, keyword matching in Lambda", "S3 Event Notifications trigger Lambda using Comprehend custom entity recognition to extract ingredients", "SageMaker custom NLP model, EventBridge to Lambda forwarding to SageMaker endpoint"], answer: 2, explain: "Comprehend custom entity recognition extracts entities from unstructured text without ML expertise. S3 Event Notifications trigger Lambda for serverless pipeline. Cost-efficient, minimal overhead." },
      { cat: "design-cost", q: "Video analytics company: batch processing workloads generate large log files stored on-premises NFS. Migrate to cloud, minimize costs, retain NFS compatibility, automated tiering?", options: ["Storage Gateway Volume Gateway in cached mode, snapshots in Glacier Deep Archive", "Storage Gateway File Gateway, present NFS share, store in S3, use S3 Lifecycle policies", "EFS One Zone-IA, DataSync to migrate, lifecycle management", "FSx for Windows File Server, data deduplication, move snapshots to Glacier"], answer: 1, explain: "File Gateway presents NFS interface to on-premises apps, stores data in S3. S3 Lifecycle policies automatically transition to lower-cost classes. Cost-effective, NFS-compatible, scalable." },
      { cat: "design-resilient", q: "Government agency permit submission app. Ensure every request processed exactly once with no data loss. Which design?", options: ["API Gateway to Lambda for real-time processing", "EventBridge to send events for asynchronous handling", "SQS FIFO queue to buffer submissions from web app to processing tier", "SQS standard queue to buffer submissions from web app to processing tier"], answer: 2, explain: "SQS FIFO queues provide exactly-once processing with order preservation. Prevents duplicate deliveries, ideal for transactional workflows like permit submissions." },
      { cat: "design-secure", q: "IT security consultancy: protect S3 data from malicious activity, check EC2 vulnerabilities. Which solution?", options: ["Inspector to monitor S3, GuardDuty for EC2 vulnerabilities", "Inspector to monitor S3, Inspector for EC2 vulnerabilities", "GuardDuty to monitor S3, GuardDuty for EC2 vulnerabilities", "GuardDuty to monitor S3, Inspector for EC2 vulnerabilities"], answer: 3, explain: "GuardDuty monitors for malicious activity on S3 data using CloudTrail Events, VPC Flow Logs, DNS Logs. Inspector provides security assessments to check EC2 vulnerabilities." },
      { cat: "design-performant", q: "Logistics company tracking trucks during peak hours. Real-time processing, REST API access for analytics. Which solution?", options: ["Athena with S3", "QuickSight with Redshift", "API Gateway with Lambda", "API Gateway with Kinesis Data Analytics"], answer: 3, explain: "Kinesis Data Analytics transforms and analyzes streaming data in real-time with Apache Flink. API Gateway creates REST API for incoming requests. Handles real-time processing with low latency." },
      { cat: "design-performant", q: "Event-ticketing platform: EC2 with Aurora PostgreSQL. Timeouts during high activity cause failed purchases. Redesign for scalability, cost-efficiency, no database reengineering. (Select 2)", options: ["Publish events to SQS queue, Auto Scaling EC2 workers poll queue and process asynchronously", "ElastiCache to cache queries, store purchases in cache before database", "Read replicas in another Region, EC2 reads/writes from nearest replica", "API Gateway with throttling to slow requests during peaks", "RDS Proxy between app and Aurora, Auto Scaling EC2 to retry transactions"], answer: [0,4], explain: "SQS decouples web tier from processing, buffers load, Auto Scaling workers process based on demand. RDS Proxy manages connection pooling, reduces Aurora stress, Auto Scaling provides elastic compute." },
      { cat: "design-cost", q: "Social media analytics company: dockerized app to AWS. Pricing for ECS with EC2 vs ECS with Fargate?", options: ["Both charged based on EC2 and EBS", "Both charged per hour for ECS used", "Both charged based on vCPU and memory requested", "ECS with EC2 charged on EC2 and EBS. ECS with Fargate charged on vCPU and memory requested"], answer: 3, explain: "ECS with EC2 launch type: pay for EC2 instances and EBS volumes. ECS with Fargate launch type: pay for vCPU and memory resources containerized app requests." },
      { cat: "design-performant", q: "EDA application produces hot data (parallel/distributed processing) and cold data (quick access, low cost). Best service to accelerate chip design?", options: ["AWS Glue", "FSx for Lustre", "FSx for Windows File Server", "EMR"], answer: 1, explain: "FSx for Lustre provides high-performance file system for fast storage. Integrates with S3, presents S3 objects as files. Process hot data in parallel, easily store cold data on S3 for low-cost access." },
      { cat: "design-resilient", q: "Bank migrating to SQS. Peak rate 1000 messages/sec, must process in order. Which option?", options: ["SQS standard queue", "SQS FIFO queue in batch mode of 2 messages per operation", "SQS FIFO queue", "SQS FIFO queue in batch mode of 4 messages per operation"], answer: 3, explain: "FIFO queues preserve order. Default 300 msg/sec. With batching 10 msg/operation, supports 3000 msg/sec. Need 4 msg/operation for 1200 msg/sec to meet 1000 msg/sec peak." },
      { cat: "design-secure", q: "Software company: globally distributed developers need secure AWS access. Multiple accounts under Organizations, on-premises Active Directory. Centrally managed, least operational overhead?", options: ["Control Tower with IAM roles in each account, developers assume roles via CLI", "Deploy AWS Managed Microsoft AD, establish trust with on-premises AD, IAM roles linked to AD groups", "AD Connector to on-premises AD, integrate with IAM Identity Center, permission sets based on AD groups", "Open-source IdP on EC2, synchronize with AD, SAML federation, IAM roles from SAML assertions"], answer: 2, explain: "AD Connector proxies to on-prem AD, no separate directory to manage. IAM Identity Center provides centralized access with permission sets based on AD groups. Low maintenance, scales well." },
      { cat: "design-secure", q: "Healthcare company: web portal on AWS, communicate with on-premises via site-to-site VPN. Resolve private DNS records for on-premises services from VPC?", options: ["Hybrid connectivity gateway, attach on-premises DNS servers to Route 53", "Route 53 Resolver outbound endpoint with forwarding rule to on-premises DNS server", "Route 53 private hosted zone for on-premises domain, associate with VPC", "Route 53 Resolver inbound endpoint with DNS forwarding rule"], answer: 1, explain: "Route 53 Resolver outbound endpoint forwards DNS queries from VPC to on-premises DNS server across VPN. Forwarding rules determine which domains are sent to on-premises DNS." },
      { cat: "design-cost", q: "Audit department generates reports twice yearly using Step Functions. Data in S3 (hundreds of TB), needs millisecond latency. Most cost-effective storage class?", options: ["Glacier Deep Archive", "S3 Standard", "S3 Intelligent-Tiering", "S3 Standard-IA"], answer: 3, explain: "S3 Standard-IA for infrequently accessed data with rapid access when needed. Low per GB storage price, per GB retrieval fee. Step Functions has failover/retry, so 99.9% availability is acceptable." },
      { cat: "design-resilient", q: "Healthcare startup: S3 objects need adequate protection against accidental deletion. Recommendations? (Select 2)", options: ["Change S3 console to require additional confirmation for deletion", "Event trigger on deletion sends SNS notification to IT manager", "Enable MFA delete on S3 bucket", "Establish process for managerial approval", "Enable versioning on S3 bucket"], answer: [2,4], explain: "Versioning preserves all versions, can restore previous versions. MFA delete requires secondary authentication before permanent deletion. Both provide protection against accidental deletion." },
      { cat: "design-performant", q: "Data analytics company: flagship app functions at peak with 50% CPU utilization on EC2 in Auto Scaling group behind ALB. Maintain peak performance?", options: ["Auto Scaling group with simple scaling policy, CPU utilization target 50%", "Auto Scaling group with step scaling policy, CPU utilization target 50%", "Auto Scaling group with CloudWatch alarm on CPU utilization threshold 50%", "Auto Scaling group with target tracking policy, CPU utilization target 50%"], answer: 3, explain: "Target tracking scaling policy maintains specified target value. Creates CloudWatch alarms, calculates scaling adjustment based on metric and target value. Keeps CPU at or close to 50%." },
      { cat: "design-performant", q: "Scientist uploading 3GB nebula image to S3 using S3 Transfer Acceleration. S3TA did not accelerate transfer. What are the charges?", options: ["Pay both S3 and S3TA charges", "Pay only S3TA charges", "Pay only S3 charges", "No transfer charges"], answer: 3, explain: "No S3 data transfer charges when data transferred in from internet. S3TA only charges when transfer is accelerated. No acceleration means no charges." },
      { cat: "design-secure", q: "Financial services company: containerized microservices on Kubernetes on-premises. Data must stay on-premises. Modernize with AWS managed services without migrating data/compute?", options: ["Direct Connect to AWS Region, EKS in cloud connected to local cluster, IAM roles and API Gateway", "Snowball Edge to run EKS-compatible containers on-site, export logs to S3 offline", "Install Outposts rack in data center, use EKS Anywhere on Outposts to run locally while integrating with AWS APIs", "ECS with Fargate in Local Zone, CloudWatch Logs, connect to data center via VPN"], answer: 2, explain: "Outposts brings AWS services into on-premises data center. EKS Anywhere on Outposts runs Kubernetes clusters entirely on-premises with AWS tooling. Data stays local, meets compliance." },
      { cat: "design-resilient", q: "Carmaker: car-as-a-sensor service using fully serverless components, no manual capacity provisioning. Which solution?", options: ["SQS standard queue polled by EC2, writes to auto-scaled DynamoDB", "SQS standard queue polled by Lambda in batches, writes to auto-scaled DynamoDB", "Kinesis Data Firehose directly writes to auto-scaled DynamoDB", "Kinesis Data Streams polled by EC2, writes to auto-scaled DynamoDB"], answer: 1, explain: "SQS is fully managed, no capacity provisioning. Lambda is serverless, pay-per-use. DynamoDB auto-scales. No manual provisioning required. EC2 requires manual management." },
      { cat: "design-performant", q: "File-hosting service: customer uploads fail during peak (>5000 req/sec) under single S3 bucket. Most resource/cost-efficient solution?", options: ["Customer-specific custom prefixes within single S3 bucket, upload to prefixed locations", "New S3 bucket for each customer", "New S3 bucket for each day's data", "Use EFS instead of S3"], answer: 0, explain: "S3 achieves 3500 PUT/5500 GET req/sec per prefix. No limits on number of prefixes. Creating customer-specific prefixes parallelizes reads, scales performance. Most efficient solution." },
      { cat: "design-performant", q: "Digital wallet company: process cash transfers via secure endpoint. Lightweight validation then compute/memory-intensive backend. Fully managed, minimize infrastructure maintenance?", options: ["API Gateway with Step Functions validation, backend on EKS with self-managed nodes, Kubernetes Jobs", "SQS receives payments, EventBridge validation, backend on Lightsail with dynamic scaling", "API Gateway endpoint, Lambda validation, backend on ECS using Fargate launch type", "API Gateway endpoint, Lambda validation, backend on EKS Anywhere on-premises, custom scaling"], answer: 2, explain: "API Gateway exposes REST endpoint. Lambda handles lightweight validation serverlessly. ECS with Fargate is serverless container orchestration, auto-provisions compute/memory. Fully managed, no infrastructure management." },
      { cat: "design-resilient", q: "Healthcare company: legacy Oracle database needing OS customization. Improve availability, minimize maintenance effort?", options: ["RDS Custom for Oracle multi-AZ allows DBA to access/customize database and OS", "RDS for Oracle multi-AZ allows DBA to access/customize database and OS", "RDS for Oracle cross-AZ read-replica allows DBA to access/customize database and OS", "Oracle on multiple EC2 instances across two AZs for high availability and customization"], answer: 0, explain: "RDS Custom for Oracle allows access to database host and OS for customization, special patches, privileged access. Multi-AZ provides high availability. Minimum infrastructure maintenance." },
      { cat: "design-performant", q: "University helping NASA find landing sites using HPC. Which EC2 instance topology?", options: ["Cluster placement group for low latency and high throughput", "Partition placement group for distributed workloads", "Spread placement group for no correlated failures", "Auto Scaling group for high availability"], answer: 0, explain: "Cluster placement groups pack instances close together in single AZ. Recommended for applications needing low network latency, high network throughput for tightly-coupled node-to-node communication typical of HPC." },
      { cat: "design-cost", q: "Media agency: re-creatable assets in S3, heavily accessed first few days then drops. Must remain immediately accessible. Lower storage costs?", options: ["Lifecycle policy to One Zone-IA after 7 days", "Lifecycle policy to Standard-IA after 30 days", "Lifecycle policy to One Zone-IA after 30 days", "Lifecycle policy to Standard-IA after 7 days"], answer: 2, explain: "One Zone-IA for infrequently accessed, re-creatable data with rapid access. Costs 20% less than Standard-IA. Minimum storage duration 30 days before transition from Standard." },
      { cat: "design-secure", q: "Organization delegating access to dev users for prod environment resources in another AWS account. Which approach?", options: ["Create IAM role with required permissions, users assume role to access prod resources", "Not possible to access cross-account resources", "Create new IAM user credentials for prod, share with dev users", "IAM roles and users can be used interchangeably for cross-account access"], answer: 0, explain: "IAM roles allow delegation of access to users/services that normally don't have access. Users/services assume role to obtain temporary security credentials for AWS API calls. No need to share long-term credentials." },
      { cat: "design-secure", q: "Development team needs S3 bucket list and delete permissions. Group not able to delete objects. Policy has ListBucket and DeleteObject on bucket ARN. Add which statement?", options: ["DeleteObject action on bucket/* resource", "* action on bucket/* resource", "*Object action on bucket/* resource", "DeleteObject action on bucket* resource"], answer: 0, explain: "DeleteObject action requires bucket/* resource (objects within bucket). Original policy only has bucket ARN (bucket itself). Need separate statement for object-level permissions." },
      { cat: "design-secure", q: "Gaming company: games table globally accessible, users and games_played tables regional only. Minimal refactoring?", options: ["Aurora Global Database for games, Aurora for users and games_played", "DynamoDB global table for games, DynamoDB for users and games_played", "DynamoDB global table for games, Aurora for users and games_played", "Aurora Global Database for games, DynamoDB for users and games_played"], answer: 0, explain: "Aurora Global Database spans multiple regions for globally distributed apps. Two Aurora clusters needed: one global (games), one local (users, games_played). Minimal refactoring, both Aurora (same API)." },
      { cat: "design-secure", q: "Company uses S3 buckets for sensitive data. Retention periods not working as expected. Valid configurations for retention? (Select 2)", options: ["Bucket default settings override explicit retention mode/period", "Different versions can have different retention modes and periods", "Bucket default settings specify Retain Until Date", "Explicit retention period specifies Retain Until Date", "Cannot place retention period via bucket default setting"], answer: [1,3], explain: "Different object versions can have different retention modes/periods. Explicit retention specifies Retain Until Date. Bucket default specifies duration in days/years, not Retain Until Date." },
      { cat: "design-cost", q: "Retail company REST API in Auto Scaling group behind ALB. 90% reads for common data. Most efficient performance improvement?", options: ["ElastiCache Redis for DynamoDB, ElastiCache Memcached for S3", "DynamoDB Accelerator (DAX) for DynamoDB, CloudFront for S3", "ElastiCache Redis for DynamoDB, CloudFront for S3", "DAX for DynamoDB, ElastiCache Memcached for S3"], answer: 1, explain: "DAX is fully managed in-memory cache for DynamoDB, delivers up to 10x performance improvement. CloudFront caches S3 static content at edge locations, more cost-effective than S3 direct delivery." },
      { cat: "design-resilient", q: "E-commerce REST API with Auto Scaling, ALB. DevOps terminated 2 instances in AZ A, later 1 instance in AZ B detected unhealthy. What happens? (Select 2)", options: ["Resources unbalanced, Auto Scaling rebalances by launching new instances before terminating old ones", "Auto Scaling creates scaling activity to terminate unhealthy instance then launches new instance to replace it", "Resources unbalanced, Auto Scaling rebalances by terminating old instances before launching new ones", "Auto Scaling creates scaling activity to terminate unhealthy and launch new instance simultaneously", "Auto Scaling creates scaling activity to launch new instance then terminates unhealthy instance"], answer: [0,1], explain: "Rebalancing: Auto Scaling launches new before terminating old to maintain performance. Unhealthy instance: Auto Scaling terminates unhealthy first, then launches replacement." },
      { cat: "design-performant", q: "Research group: 60-min workflow on EC2 fleet, high random I/O performance. Dataset replicated across instances, resilient architecture. Most cost-optimal and resource-efficient?", options: ["Instance Store based EC2 instances", "EC2 with S3 storage", "EC2 with EFS mount points", "EBS based EC2 instances"], answer: 0, explain: "Instance Store provides temporary block-level storage on disks physically attached to host. Ideal for replicated data across fleet. High random I/O performance at low cost (included in instance usage cost)." },
      { cat: "design-cost", q: "Video streaming service: S3 data lake staging zone keeps intermediary query results 24 hours, heavily referenced by analytics pipeline. Most cost-effective storage?", options: ["S3 Standard", "S3 One Zone-IA", "S3 Glacier Instant Retrieval", "S3 Standard-IA"], answer: 0, explain: "S3 Standard has no minimum storage duration charge and no retrieval fee. Other classes have 30-90 day minimum and retrieval fees. For 24-hour heavily-referenced data, Standard is most cost-effective." },
      { cat: "design-cost", q: "Company: data processing workflow takes 60 minutes, can withstand disruptions, can be started/stopped multiple times. Most cost-effective?", options: ["EC2 on-demand instances", "EC2 spot instances", "EC2 reserved instances", "Lambda function"], answer: 1, explain: "Spot instances up to 90% off On-Demand. Ideal for flexible start/end times, interruptible workloads. For 60-min 1024MB process, spot is ~20x cheaper than Lambda. Lambda max 15 min anyway." },
      { cat: "design-secure", q: "Biotech research company: access partner's RDS MySQL in partner's VPC. Research company VPC has no internet, Direct Connect, or VPN. Establish secure private connectivity?", options: ["VPC peering, Transit Gateway in partner account to route traffic", "Partner creates NLB in front of RDS, use PrivateLink to expose as interface endpoint in research VPC", "Client VPN in company account, Direct Connect gateway to partner VPC", "Partner enables public access on RDS, company accesses via NAT Gateway over internet"], answer: 1, explain: "PrivateLink with NLB (in front of RDS Proxy or EC2 proxy) provides private cross-account access without internet, VPN, or Direct Connect. Traffic stays within AWS network." },
      { cat: "design-cost", q: "Blogger comparing storage costs. 1GB test file in S3 Standard, 100GB EBS gp2 volume with test file, EFS Standard with test file. Correct cost order?", options: ["S3 < EBS < EFS", "S3 < EFS < EBS", "EBS < S3 < EFS", "EFS < S3 < EBS"], answer: 1, explain: "S3 Standard: $0.023/GB = $0.023. EFS Standard: $0.30/GB = $0.30. EBS gp2: $0.10/GB-month provisioned, 100GB = $10 regardless of usage. S3 < EFS < EBS." },
      { cat: "design-secure", q: "Company: EFS accessed by multiple EC2 instances. Access control to permit only authorized instances? (Select 2)", options: ["IAM policy to control access for clients who can mount file system with required permissions", "IAM policy root credentials to control clients", "GuardDuty to curb unwanted access", "Network ACL to control traffic to/from EC2", "VPC security groups to control network traffic to/from file system"], answer: [0,4], explain: "VPC security groups control network traffic to/from EFS. IAM policy controls which clients can mount EFS and with what permissions. Network ACLs operate at subnet level, not instance level." },
      { cat: "design-resilient", q: "E-commerce DevOps: EC2 instance in Auto Scaling group needs maintenance patch. Instance shows out of service during patch, Auto Scaling provisions replacement. Time/resource efficient steps? (Select 2)", options: ["Put instance in Standby state, apply patch, exit Standby and return to service", "Delete Auto Scaling group, apply patch, create new Auto Scaling group", "Snapshot instance, create AMI, launch new instance with AMI, apply patch, add to Auto Scaling group, terminate old", "Suspend ReplaceUnhealthy process, apply patch, set health to healthy, activate ReplaceUnhealthy", "Suspend ScheduledActions process, apply patch, set health to healthy, activate ScheduledActions"], answer: [0,3], explain: "Standby state: instance part of group but doesn't handle traffic, can apply patch then return to service. Suspend ReplaceUnhealthy: stops replacing unhealthy instances during maintenance." },
      { cat: "design-performant", q: "Software engineering intern documenting EC2 provisioning. Identify volume types that CANNOT be boot volumes. (Select 2)", options: ["Throughput Optimized HDD (st1)", "Cold HDD (sc1)", "Provisioned IOPS SSD (io1)", "Instance Store", "General Purpose SSD (gp2)"], answer: [0,1], explain: "Throughput Optimized HDD (st1) and Cold HDD (sc1) CANNOT be used as boot volumes. SSD volumes and Instance Store can be boot volumes." },
      { cat: "design-resilient", q: "E-commerce company: unusually large number of illegal API queries. Need automated near-real-time warnings if recurs. Best solution?", options: ["Trusted Advisor publishes to CloudWatch, alarm for Service Limits category when quota reached/exceeded", "Configure CloudTrail to stream to Kinesis, use Kinesis metrics in CloudWatch to trigger Lambda error workflow", "Athena SQL queries against CloudTrail logs in S3, QuickSight reports for dashboards", "CloudWatch metric filter processes CloudTrail logs for API errors by error codes, alarm on metric rate sends SNS notification"], answer: 3, explain: "CloudWatch metric filter on CloudTrail logs can monitor API call errors. Create alarm based on metric rate to send SNS notification. Near-real-time automated solution." },
      { cat: "design-performant", q: "Startup: stateful and stateless client-server communication via APIs. Which is correct about API Gateway?", options: ["API Gateway creates RESTful APIs (stateful) and WebSocket APIs (stateful full-duplex)", "API Gateway creates RESTful APIs (stateless) and WebSocket APIs (stateless full-duplex)", "API Gateway creates RESTful APIs (stateless) and WebSocket APIs (stateful full-duplex)", "API Gateway creates RESTful APIs (stateful) and WebSocket APIs (stateless full-duplex)"], answer: 2, explain: "API Gateway creates RESTful APIs that are HTTP-based, enable stateless client-server communication. Also creates WebSocket APIs that adhere to WebSocket protocol, enable stateful full-duplex communication." },
      { cat: "design-secure", q: "IT company: new developer assigned full DynamoDB access, accidentally deleted prod tables. Most effective way to prevent recurrence?", options: ["Only root user should have full database access", "Use permissions boundary to control maximum permissions employees can grant to IAM principals", "Remove full database access for all IAM users", "CTO should review permissions for each new developer"], answer: 1, explain: "Permissions boundary controls maximum permissions employees can grant to IAM principals they create. Employee can attach permissions policy but effective permissions are intersection of boundary and policy." },
      { cat: "design-performant", q: "Enterprise: dedicated encrypted low latency high throughput connection between data center and AWS. Sufficient time for operational overhead. Which solution?", options: ["Direct Connect", "Transit Gateway", "Direct Connect plus VPN", "Site-to-site VPN"], answer: 2, explain: "Direct Connect plus VPN combines AWS managed VPN benefits with low latency, increased bandwidth of Direct Connect, plus end-to-end secure IPsec connection. Provides encryption that Direct Connect alone doesn't provide." },
      { cat: "design-secure", q: "Media company: photo-sharing app accessed across three countries. New regulations: block access from two countries, allow only home country. Which configuration?", options: ["Configure security group on ALB", "Configure security group for EC2 instances", "Use Geo Restriction in CloudFront VPC", "Configure WAF on ALB in VPC"], answer: 3, explain: "WAF with geo match conditions restricts application access based on geographic location. Can whitelist or blacklist countries. Works with ALB in VPC." },
      { cat: "design-performant", q: "In-home fitness company: leaderboard needs high availability, low latency, real-time processing. In-memory data stores? (Select 2)", options: ["DynamoDB (not in-memory)", "Neptune (not in-memory)", "RDS Aurora (not in-memory)", "ElastiCache for Redis (in-memory, real-time)", "DynamoDB with DAX (in-memory caching)"], answer: [3,4], explain: "ElastiCache for Redis: in-memory data store with sub-millisecond latency, ideal for gaming leaderboards. DynamoDB with DAX: DAX provides in-memory caching for DynamoDB with fast performance." },
      { cat: "design-performant", q: "Startup founder: EC2 instance 1A in Region A, snapshot, create AMI in Region A, copy AMI to Region B, provision instance 1B in Region B. What exists in Region B?", options: ["1 EC2 instance and 1 snapshot", "1 EC2 instance and 1 AMI", "1 EC2 instance and 2 AMIs", "1 EC2 instance, 1 AMI and 1 snapshot"], answer: 3, explain: "When AMI is copied from Region A to Region B, it automatically creates snapshot in Region B (AMIs based on snapshots). Instance created from AMI in Region B. So: 1 instance, 1 AMI, 1 snapshot." },
      { cat: "design-performant", q: "E-commerce DevOps: Auto Scaling group spans two AZs (1 instance in AZ A, 4 in AZ B), behind ALB. Two instances in AZ A manually terminated, later one instance in AZ B detected unhealthy. Correct outcomes? (Select 2)", options: ["Resources unbalanced, Auto Scaling rebalances by launching new instances before terminating old ones", "Auto Scaling creates scaling activity to terminate unhealthy instance then launches new instance to replace it", "Resources unbalanced, Auto Scaling rebalances by terminating old instances before launching new ones", "Auto Scaling creates scaling activity to terminate unhealthy and launch new simultaneously", "Auto Scaling creates scaling activity to launch new instance then terminates unhealthy instance"], answer: [0,1], explain: "Rebalancing: launches new before terminating old so rebalancing doesn't compromise performance. Unhealthy instance: creates scaling activity to terminate unhealthy then launches replacement." },
      { cat: "design-performant", q: "Data analytics company: large-scale S3 data lake, daily transform/load to data warehouse for fast queries. Enable analysts to build/train ML models using SQL. Serverless, MPP, reduce overhead?", options: ["Glue job to transform, load to Redshift Serverless (MPP), use Redshift ML for SQL-based ML models", "Glue job to transform, load to RDS PostgreSQL, Aurora ML with SageMaker endpoints", "Glue job to transform, Athena tables in Glue Catalog, Athena ML for SQL predictions on S3 data", "EMR cluster with Spark to transform, load to Redshift provisioned, integrate with SageMaker notebooks"], answer: 0, explain: "Glue provides serverless ETL. Redshift Serverless offers MPP data warehouse that scales compute independently. Redshift ML lets analysts create/train/deploy ML models using SQL (integrates with SageMaker)." },
      { cat: "design-performant", q: "Retail company: SQL Server database, tightly integrated with T-SQL queries. Migrate to Aurora PostgreSQL, avoid major app refactoring. Which actions? (Select 2)", options: ["Deploy Babelfish for Aurora PostgreSQL to support T-SQL commands", "Configure Aurora PostgreSQL custom endpoint emulating SQL Server", "Use Glue to convert T-SQL to PostgreSQL during migration", "Use Schema Conversion Tool (SCT) with Database Migration Service (DMS) to migrate schema and data", "Use Aurora Global Database for cross-region replication"], answer: [0,3], explain: "Babelfish allows Aurora PostgreSQL to understand T-SQL and SQL Server wire protocol, minimal code changes. SCT converts SQL Server schema to PostgreSQL, DMS moves data with minimal downtime." },
      { cat: "design-performant", q: "Sourcing team: spreadsheet on EFS in us-east-1. Teams in other regions want to collaborate. Least operational overhead?", options: ["Hybrid connectivity gateway, attach on-premises DNS to Route 53", "EFS accessed in other regions via inter-region VPC peering connection", "Copy spreadsheet to S3 for access from any region", "Move spreadsheet to RDS MySQL for access from any region"], answer: 1, explain: "EFS is regional service but EC2 instances can access file system across AZs, regions, VPCs via inter-region VPC peering connection. Secure, private connectivity without operational overhead of copying data." },
      { cat: "design-secure", q: "Microservices on EKS with EC2 worker nodes. UI Pods access only DynamoDB, data-processing Pods access only S3. Enforce least privilege?", options: ["Shared service account across all Pods with S3 and DynamoDB full access", "Attach IAM policy to each Pod using annotations", "IAM policies on EC2 instance profile, use Kubernetes RBAC", "Separate service accounts for UI and data services, use IRSA to map each to IAM role with required permissions"], answer: 3, explain: "IAM Roles for Service Accounts (IRSA) provides fine-grained IAM permissions to individual Pods. Separate service accounts ensure each service accesses only designated AWS resource. Pod-level isolation, least privilege." },
      { cat: "design-resilient", q: "Payroll department: computationally intensive workloads on EC2 last day of month at designated hour. Need 10 instances during peak, 2 for normal. Implement solution?", options: ["Scheduled action at designated hour on last day, set min and max to 10", "Target tracking policy, set instance count to 10 at designated hour", "Simple tracking policy, set instance count to 10 at designated hour", "Scheduled action at designated hour on last day, set desired capacity to 10"], answer: 3, explain: "Scheduled scaling allows setting scaling schedule. Scheduled action sets desired capacity to 10 at specified time. Min/max used for range, desired capacity for exact number of instances." },


      // Practice Test #3 - 65 Questions (Udemy SAA-C03)
      { cat: "design-performant", q: "Media company wants low-latency way to distribute live sports results via UDP protocol. Which solution offers BEST performance?", options: ["Auto Scaling group", "Elastic Load Balancing", "AWS Global Accelerator", "Amazon CloudFront"], answer: 2, explain: "Global Accelerator is good fit for non-HTTP use cases like UDP. Routes traffic to optimal endpoint based on performance." },
      { cat: "design-performant", q: "Media startup: users upload/download video files up to 10GB. Cost-effective, scalable, lowest latency solution?", options: ["EC2 with Global Accelerator + S3", "EC2 with ElastiCache + S3", "S3 with S3 Transfer Acceleration", "S3 with CloudFront"], answer: 2, explain: "S3 Transfer Acceleration speeds up transfers 50-500% for large objects over long distances. For objects >1GB, S3TA better than CloudFront." },
      { cat: "design-secure", q: "Standardize AMI across subsidiaries in same/different regions and accounts. Which are CORRECT? (Select 3)", options: ["Copy AMI across regions", "Cannot share AMI with another account", "Share AMI with another account", "Encrypted snapshot copy cannot result in unencrypted target", "Cannot copy AMI across regions", "Encrypted snapshot copy results in unencrypted target"], answer: [0,2,3], explain: "Can copy AMI across regions. Can share AMI with another account. Cannot copy encrypted snapshot to unencrypted." },
      { cat: "design-performant", q: "Real-time vehicle tracking with I/O and throughput intensive workloads on NoSQL. Need 25,000 IOPS per volume. Which EBS type?", options: ["Provisioned IOPS SSD (io1)", "Cold HDD (sc1)", "General Purpose SSD (gp2)", "Throughput Optimized HDD (st1)"], answer: 0, explain: "io1 delivers up to 50 IOPS/GB, max 64,000 IOPS. gp2 max 16,000. sc1 max 250. st1 max 500." },
      { cat: "design-performant", q: "Move on-premises data to S3, EFS, FSx for Windows easily and cost-effectively. Which solution?", options: ["AWS Transfer Family", "Snowball Edge", "AWS DataSync", "File Gateway"], answer: 2, explain: "DataSync automates and accelerates data transfers to S3, EFS, FSx. Up to 10x faster than CLI tools." },
      { cat: "design-performant", q: "Gaming app: users download static assets causing performance issues. Cost-optimal serverless solution?", options: ["CloudFront with DynamoDB", "CloudFront with S3", "Lambda with ElastiCache and RDS", "Lambda with RDS"], answer: 1, explain: "CloudFront caches content at Edge Locations. Data transfer via CloudFront more cost-effective than S3 direct." },
      { cat: "design-resilient", q: "EC2 instances with IAM roles need centralized patch management without disruption. Least overhead?", options: ["Second IAM role with Systems Manager Hybrid Activation", "Enable Default Host Management Configuration", "Replace IAM role with combined permissions", "Manual SSM Agent install with cron"], answer: 1, explain: "Default Host Management Configuration auto-applies SSM permissions, enables patching without altering IAM roles." },
      { cat: "design-performant", q: "RDS MySQL with 3 read replicas. Read replicas must lag <1 second. Falling behind during peaks. Reduce lag with minimal changes?", options: ["MySQL on memory-optimized EC2 + compute-optimized EC2 replicas", "ElastiCache Redis in front of MySQL", "Migrate to DynamoDB with RCUs", "Migrate to Aurora MySQL with Aurora Replicas"], answer: 3, explain: "Aurora Replicas share same data volume. Replication lag in 10s of milliseconds vs seconds for MySQL read replicas." },
      { cat: "design-performant", q: "Hybrid cloud: most frequently accessed logs cached locally, all logs backed up on S3. Which solution?", options: ["Snowball Edge for local cache + S3", "Direct Connect for local cache + S3", "Volume Gateway Stored Volume", "Volume Gateway Cached Volume"], answer: 3, explain: "Cached volumes store full volume in S3, recently accessed data in local cache for low-latency access." },
      { cat: "design-secure", q: "25 VPCs with Direct Connect private VIFs. Want full-mesh connectivity with reduced complexity. Which 2 solutions?", options: ["PrivateLink endpoints to central VPC", "Transit Gateway with all VPCs attached", "Direct Connect gateway per VPC with VGWs", "Transit VIF to Transit Gateway", "Site-to-Site VPN to each VPC"], answer: [1,3], explain: "Transit Gateway centralizes routing. Transit VIF enables on-premises connectivity through single path." },
      { cat: "design-resilient", q: "Database outage on-premises. Want AWS solution minimizing data loss, storing every transaction on 2 nodes. Which solution?", options: ["RDS MySQL with cross-region read replica (sync)", "RDS MySQL with read replica in another AZ (sync)", "EC2 MySQL triggering Lambda to replicate to RDS", "RDS MySQL Multi-AZ"], answer: 3, explain: "Multi-AZ synchronously replicates to standby in different AZ. Automatic failover 60-120 seconds. Read replicas use async replication." },
      { cat: "design-cost", q: "Migrate legacy commercial database to AWS open-source. Handle secondary indexes, foreign keys, stored procedures. Which 2 services?", options: ["Basic Schema Copy", "AWS Glue", "AWS Schema Conversion Tool", "Snowball Edge", "AWS Database Migration Service"], answer: [2,4], explain: "SCT converts schema/code for heterogeneous migrations. DMS migrates data. Basic Schema Copy doesn't migrate indexes/keys/procedures." },
      { cat: "design-performant", q: "NAT instance vs NAT gateway. Which 3 are CORRECT?", options: ["NAT gateway supports port forwarding", "Security Groups with NAT instance", "NAT gateway as bastion", "NAT instance supports port forwarding", "NAT instance as bastion", "Security Groups with NAT gateway"], answer: [1,3,4], explain: "NAT instance: supports port forwarding, can be bastion, allows Security Groups. NAT gateway: none of these." },
      { cat: "design-cost", q: "Website on S3: 300% traffic increase, S3 outbound costs high. Reduce costs with low latency?", options: ["Use EFS", "S3 Batch Operations", "Save on EBS + EC2", "CloudFront to distribute S3 content"], answer: 3, explain: "CloudFront delivery more cost-effective than S3 direct. No data transfer fee S3 to CloudFront." },
      { cat: "design-secure", q: "Data from on-site to AWS accessed by Windows/Mac/Linux via SMB and NFS. Minimize overhead. Which solution?", options: ["FSx for ONTAP", "EFS with Intelligent-Tiering", "EFS with Infrequent Access", "FSx for OpenZFS"], answer: 0, explain: "FSx for ONTAP supports Windows/Mac/Linux with SMB and NFS protocols. EFS not on Windows. OpenZFS doesn't support SMB." },
      { cat: "design-resilient", q: "Windows apps on-premises to AWS. Shared storage with Active Directory integration. Minimal effort?", options: ["EFS", "FSx for Windows File Server", "File Gateway", "FSx for Lustre"], answer: 1, explain: "FSx for Windows provides SMB, Windows Server features, AD integration. EFS only Linux. Lustre is Linux-based." },
      { cat: "design-resilient", q: "ELB with 1 instance in AZ A, 4 in AZ B. Cross-zone enabled vs disabled traffic distribution?", options: ["Enabled: 20% each, Disabled: A gets 0%, B gets 25% each", "Enabled: A gets 0% B gets 25% each, Disabled: A gets 50%, B gets 12.5% each", "Enabled: 20% each, Disabled: A gets 50%, B gets 12.5% each", "Enabled: A gets 50% B gets 12.5% each, Disabled: 20% each"], answer: 2, explain: "Cross-zone enabled: traffic across all AZs = 20% each. Disabled: only within AZ = A 50%, B 12.5% each." },
      { cat: "design-performant", q: "Production app slow when running reports on RDS. Complex queries, multiple joins. CPU/memory/storage at 50%. Cost-effective solution?", options: ["Create read replica for reports", "Migrate to magnetic storage", "Increase RDS instance size", "Multi-AZ, connect reports to different AZ"], answer: 0, explain: "Read replica for read-heavy workloads. Direct reporting queries to replica. Can't read from Multi-AZ standby." },
      { cat: "design-secure", q: "Auto Scaling with SQS queue. Performance drops with order spikes. Which scaling policy?", options: ["Target tracking with custom SQS metric", "Simple scaling with custom SQS metric", "Step scaling with custom SQS metric", "Scheduled scaling with custom SQS metric"], answer: 0, explain: "Target tracking with backlog per instance metric (ApproximateNumberOfMessages / InService instances) scales to exact capacity." },
      { cat: "design-secure", q: "Security group inbound rules. Which is INVALID?", options: ["IP address as source", "IP range (CIDR) as source", "Security group as source", "Internet Gateway ID as source"], answer: 3, explain: "Can use: IP address, CIDR range, security group ID, prefix list ID. CANNOT use Internet Gateway ID." },
      { cat: "design-performant", q: "NLB for millions requests/sec. Instances in public subnet as targets. Routing mechanism?", options: ["Primary private IP address", "Primary elastic IP address", "Primary public IP address", "Instance ID"], answer: 0, explain: "If targets specified by instance ID, traffic routed using primary private IP in primary network interface." },
      { cat: "design-performant", q: "Backend APIs for mobile apps. Enforce rate limiting and throttling per-client with usage quotas. Which solution?", options: ["API Gateway with usage plans and API keys", "NLB with rate-limiting in backend", "Gateway Load Balancer with firewall appliances", "ALB with listener rules"], answer: 0, explain: "API Gateway natively supports rate limiting via usage plans and API keys. Controls requests per second and total over period." },
      { cat: "design-performant", q: "Gaming leaderboard: high elasticity, low latency, real-time processing for millions users. Which 2 support ElastiCache?", options: ["ETL workloads", "Compute-intensive workloads", "Write-heavy workloads", "Read-heavy workloads", "Complex JOIN queries"], answer: [1,3], explain: "ElastiCache improves latency/throughput for read-heavy (gaming, leaderboards) and compute-intensive (recommendations) workloads." },
      { cat: "design-performant", q: "Serverless microservices: authenticate via OIDC, validate JWTs, enforce scope-based access. Fully managed native JWT validation?", options: ["gRPC on ECS Fargate via App Runner", "API Gateway REST API with Lambda validator", "API Gateway HTTP API with JWT authorizer", "API Gateway WebSocket API with Lambda authorizer"], answer: 2, explain: "HTTP APIs support native JWT authorizers for OIDC providers. No custom Lambda logic. More cost-effective than REST APIs." },
      { cat: "design-resilient", q: "Migrate SQS Standard to FIFO with batching. Which 3 in checklist?", options: ["Convert standard to FIFO", "FIFO throughput ‚â§3,000 msg/sec", "FIFO name same as standard", "Delete standard, recreate as FIFO", "FIFO throughput ‚â§300 msg/sec", "FIFO name ends with .fifo"], answer: [1,3,5], explain: "Can't convert standard to FIFO - must delete/recreate. Name must end .fifo. FIFO supports 3,000 msg/sec with batching." },
      { cat: "design-performant", q: "Windows and Linux need shared file system with Windows ACLs, SMB, and cross-platform access. Which solution?", options: ["FSx for Lustre with POSIX client", "S3 with Mountpoint for S3", "FSx for Windows File Server via SMB", "EFS with NFS"], answer: 2, explain: "FSx for Windows supports SMB for both Windows and Linux (via cifs-utils). NTFS permissions, AD integration." },
      { cat: "design-secure", q: "EC2 needs access to DynamoDB in same account. Which solution?", options: ["IAM role, add EC2 to trust relationship", "IAM user credentials in local storage", "IAM user credentials in S3", "IAM role with instance profile"], answer: 3, explain: "Create IAM role with DynamoDB permissions. Use instance profile to assign role to EC2. Never store credentials in S3/local storage." },
      { cat: "design-secure", q: "Portal on EC2 behind ALB suspects DDoS from wide IP range. Need DDoS mitigation, detailed logs, minimal architecture changes?", options: ["Inspector for vulnerability findings", "Shield Advanced with DRT assistance", "GuardDuty to manually block IPs", "CloudFront + WAF with IP filtering"], answer: 1, explain: "Shield Advanced provides DDoS protection for ALBs, detailed telemetry, DRT assistance, logging via CloudWatch and WAF." },
      { cat: "design-cost", q: "EC2 in private subnet reads/writes to S3 in same region via NAT gateway. Most cost-optimal solution?", options: ["Egress-only internet gateway", "Internet gateway in private subnet", "VPC gateway endpoint for S3", "Gateway Load Balancer endpoint for S3"], answer: 2, explain: "VPC gateway endpoint for S3: no additional charge, no data transfer cost within region. No need for NAT gateway." },
      { cat: "design-resilient", q: "Auto-recover EC2 instances if impaired. Which 2 are CORRECT?", options: ["Doesn't retain public IPv4 after recovery", "In-memory data retained during recovery", "Terminated instances can be recovered", "Retains public IPv4 after recovery", "Recovered instance identical to original"], answer: [3,4], explain: "CloudWatch alarm auto-recovers impaired instances. Identical to original including IPs. In-memory data is LOST. Can't recover terminated." },
      { cat: "design-resilient", q: "Custom applications to process and analyze streaming data. Which solution?", options: ["Kinesis Data Streams", "SNS", "Kinesis Data Firehose", "SQS"], answer: 0, explain: "Kinesis Data Streams for real-time processing/analytics in custom apps. Captures gigabytes/sec. SNS/SQS not for streaming. Firehose loads to stores, can't process in custom apps." },
      { cat: "design-resilient", q: "DynamoDB app sometimes writes corrupted data. Remove corrupted data ASAP. What to recommend?", options: ["Point in time recovery", "Global table in another region", "On-demand backup", "DynamoDB Streams"], answer: 0, explain: "PITR backs up continuously with per-second granularity. Restore to any second in last 35 days. On-demand is manual. Streams requires custom coding." },
      { cat: "design-secure", q: "Review resource configurations for compliance and maintain configuration history. Which solution?", options: ["CloudWatch", "Systems Manager", "CloudTrail", "AWS Config"], answer: 3, explain: "Config assesses/audits configurations, provides configuration history, determines compliance. CloudWatch for performance. CloudTrail for API calls. Systems Manager for operations." },
      { cat: "design-secure", q: "VPC-bound components access SQS without public internet. Which solution?", options: ["Internet Gateway", "NAT instance", "VPN connection", "VPC endpoint"], answer: 3, explain: "VPC endpoints powered by PrivateLink access SQS without public IPs or traversing internet. Data stays within AWS network." },
      { cat: "design-secure", q: "IPSec VPN between on-premises and VPC. Correct configuration?", options: ["VGW on-premises, Customer Gateway on AWS", "VGW on AWS, Customer Gateway on-premises", "VGW on both sides", "Customer Gateway on both sides"], answer: 1, explain: "Virtual Private Gateway (VGW) on AWS VPC side. Customer Gateway on on-premises side." },
      { cat: "design-resilient", q: "Monolithic to microservices. Some fast processes, some slow. How to connect?", options: ["Kinesis Data Streams", "SNS", "SQS queue", "EventBridge"], answer: 2, explain: "SQS decouples microservices. Store and replay messages. Fast processes can produce, slow can consume at own pace. SNS is push without storage. EventBridge requires immediate processing." },
      { cat: "design-cost", q: "Route all traffic from covid19survey.com to www.covid19survey.com. Most cost-effective?", options: ["NS record", "Alias record", "CNAME record", "MX record"], answer: 1, explain: "Alias record at zone apex routes to www. Can't create CNAME at zone apex. Route 53 doesn't charge for alias queries." },
      { cat: "design-resilient", q: "Small startup: single EC2, max 10 min downtime. Cost-effective automatic recovery?", options: ["CloudWatch alarm, instance with EBS or instance store", "EventBridge events", "Trusted Advisor health check", "CloudWatch alarm, instance with EBS only"], answer: 3, explain: "CloudWatch alarm auto-recovers impaired instances. Supported only on instances with EBS volumes, NOT instance store." },
      { cat: "design-cost", q: "Weekly 5-minute serverless database rollover Python script. Most cost-efficient?", options: ["Glue job with time-based schedule", "EventBridge cron invoking Lambda", "Scheduled Reserved Instance with cron", "Spot Instance with cron"], answer: 1, explain: "Lambda serverless, pay-per-use. EventBridge supports cron expressions. Glue for ETL. Scheduled RI and Spot not serverless." },
      { cat: "design-secure", q: "Security group inbound rule configuration. Which is INVALID?", options: ["IP address", "CIDR block", "Security group", "Internet Gateway ID"], answer: 3, explain: "Inbound rule sources: IP, CIDR, security group, prefix list. CANNOT use Internet Gateway ID." },
      { cat: "design-performant", q: "ECS tasks output ~20MB each, hundreds running, total <1TB. High-frequency read/write solution?", options: ["EBS volume", "DynamoDB table", "EFS Bursting Throughput", "EFS Provisioned Throughput"], answer: 3, explain: "Provisioned Throughput mode for high throughput to storage ratios. Guarantees high throughput without padding file system. DynamoDB 400KB item limit too small." },
      { cat: "design-performant", q: "Private subnet instances need internet for software updates. Solution?", options: ["NAT gateway in public subnet", "NAT instance in public subnet", "Egress-only internet gateway", "Internet Gateway in private subnet route table"], answer: 0, explain: "NAT gateway in public subnet enables private instances to reach internet. Fully managed. Update private subnet route table to point to NAT gateway." },
      { cat: "design-secure", q: "ECS containers behind ALB. Website slows with traffic spikes. Automated scaling solution?", options: ["Auto Scaling when CloudWatch alarm CPU rises", "Auto Scaling when ECS service CPU rises", "Auto Scaling when ALB CPU rises", "Auto Scaling when ALB target group CPU rises"], answer: 1, explain: "Target tracking scaling policy based on ECS service's CPU utilization. When >75%, scale out adds tasks. When drops, scale in." },
      { cat: "design-cost", q: "Flagship app with static and dynamic content. Cost-effective serverless solution?", options: ["S3 static + EC2/RDS dynamic + CloudFront", "S3 for both static and dynamic + CloudFront", "S3 static + Lambda/DynamoDB dynamic + CloudFront", "EC2/RDS for both + CloudFront"], answer: 2, explain: "Lambda with DynamoDB is serverless. S3 for static. CloudFront for global distribution. EC2 not serverless." },
      { cat: "design-secure", q: "Direct Connect between on-premises and AWS. Resolve DNS in both directions. Which 2 solutions?", options: ["Universal endpoint on Route 53 Resolver", "Inbound endpoint for Route 53 to forward to on-premises", "Outbound endpoint for on-premises to forward to Route 53", "Outbound endpoint for Route 53 to forward to on-premises", "Inbound endpoint for on-premises to forward to Route 53"], answer: [3,4], explain: "Inbound endpoint: on-premises resolvers forward to Route 53. Outbound endpoint: Route 53 conditionally forwards to on-premises." },
      { cat: "design-secure", q: "Multiple AWS Organizations departments need shared centrally-managed VPCs. Which option?", options: ["VPC sharing to share subnets", "VPC peering to share VPC", "VPC peering to share subnets", "VPC sharing to share VPC"], answer: 0, explain: "VPC sharing (RAM) shares one or more subnets with other accounts in organization. Can't share VPC itself. Peering doesn't facilitate centrally managed VPCs." },
      { cat: "design-performant", q: "Run directory-aware SQL Server workloads on AWS with trust relationship for SSO. Which service?", options: ["AWS Managed Microsoft AD", "Cloud Directory", "Simple AD", "Active Directory Connector"], answer: 0, explain: "Managed Microsoft AD runs directory-aware workloads like SQL Server. Supports trust relationships for SSO. AD Connector only for login. Simple AD no trusts. Cloud Directory for hierarchical data." },
      { cat: "design-performant", q: "Consistent resource provisioning across AWS Organizations accounts and regions. Which option?", options: ["CloudFormation stacks", "CloudFormation StackSets", "CloudFormation templates", "Resource Access Manager"], answer: 1, explain: "StackSets create/update/delete stacks across multiple accounts and regions with single operation. Templates are files not deployment. RAM shares resources." },
      { cat: "design-secure", q: "3 AZs with public and private subnets. Internet access for private subnets to download updates. Which option?", options: ["3 egress-only gateways in public subnets", "3 Internet gateways in private subnets", "3 NAT gateways in private subnets", "3 NAT gateways in public subnets"], answer: 3, explain: "NAT gateway in public subnet per AZ. Update route tables in private subnets to point to NAT gateway in same AZ." },
      { cat: "design-resilient", q: "Windows file server clusters to AWS. Full Windows compatibility over SMB. Which 2 services?", options: ["S3", "FSx for Windows File Server", "EBS", "File Gateway", "EFS"], answer: [1,3], explain: "FSx for Windows provides SMB access with Windows features. File Gateway enables SMB protocol to S3. EFS uses NFS not SMB. EBS is block storage." },
      { cat: "design-performant", q: "Video conferencing ASG with Launch Template LT1 (dedicated) + VPC V1 (default). LT2 (default) + VPC V2 (dedicated). Instance tenancy?", options: ["LT1 default, LT2 dedicated", "Both dedicated", "Both default", "LT1 dedicated, LT2 default"], answer: 1, explain: "If either Launch Template OR VPC tenancy is dedicated, instances have dedicated tenancy. LT1: dedicated+default VPC=dedicated. LT2: default+dedicated VPC=dedicated." },
      { cat: "design-secure", q: "On-premises encrypted data to S3. Encrypt each file with different key without splitting data. How to implement?", options: ["Multi-Region keys for client-side encryption", "SSE-S3 server-side encryption", "SSE-KMS with encryption context", "Multiple S3 buckets with SSE-S3"], answer: 1, explain: "SSE-S3 encrypts each object with unique key. No overhead of splitting. S3 now applies SSE-S3 by default. Encryption context doesn't generate unique keys." },
      { cat: "design-cost", q: "Minimize SQS costs. Which option?", options: ["Message timer", "Visibility timeout", "Long polling", "Short polling"], answer: 2, explain: "Long polling: SQS sends response after collecting messages or wait time expires. Reduces cost by reducing empty receives. Short polling responds immediately even if empty." },
      { cat: "design-secure", q: "VPC V1 with Internet Gateway I1, subnet S1, route table R1, EC2 E1 with public IPv4, NAT instance N1. Which entity does NAT for E1?", options: ["NAT instance N1", "Route Table R1", "Internet Gateway I1", "Subnet S1"], answer: 2, explain: "Internet Gateway performs NAT for instances with public IPv4. NAT instance for private subnet instances. Subnet and route table don't perform NAT." },
      { cat: "design-cost", q: "Move nightly batch jobs to spot instances. Which 3 are CORRECT?", options: ["Spot Fleets can maintain target capacity", "Spot Fleets cannot maintain target capacity", "Persistent request opens after Spot Instance interrupted", "Cancel request terminates instance", "Persistent request opens after you stop Spot Instance", "Cancel request does NOT terminate instance"], answer: [0,2,5], explain: "Spot Fleets maintain capacity by launching replacements. Persistent request opens after interruption (not after stop). Cancel doesn't terminate - must terminate manually." },
      { cat: "design-performant", q: "Modernize Python analytics to microservices on AWS. Handles hundreds req/sec. Auto-scale, minimal infrastructure. Which solution?", options: ["App Runner from GitHub", "Fargate task with ECS Service Auto Scaling", "Spot Instances in Auto Scaling group", "Lambda with API Gateway and provisioned concurrency"], answer: 3, explain: "Lambda serverless, natively supports Python. API Gateway for HTTP access. Provisioned concurrency reduces cold starts. Fargate requires containerization. App Runner for long-running apps. Spot unreliable." },
      { cat: "design-secure", q: "Identify sensitive S3 data and monitor/protect against malicious activity. Which solutions?", options: ["Macie for both", "GuardDuty for both", "GuardDuty for malicious activity, Macie for sensitive data", "Macie for malicious activity, GuardDuty for sensitive data"], answer: 2, explain: "GuardDuty continuously monitors and protects S3 against threats. Macie discovers and protects sensitive data (PII) on S3 using ML." },
      { cat: "design-secure", q: "Configured inbound in Security Group and NACL but can't connect to EC2 service. How to fix?", options: ["IAM Role in SG different from NACL", "Never modify NACL rules from CLI", "SGs stateful (inbound enables), NACLs stateless (need both inbound and outbound)", "NACLs stateful, SGs stateless"], answer: 2, explain: "Security Groups stateful - allowing inbound enables connection. NACLs stateless - must allow both inbound and outbound including ephemeral ports (1024-65535)." },
      { cat: "design-performant", q: "150TB sonar data from Snowball to HPC cluster. Need sub-millisecond latency, high-throughput, fast parallel file access. Which solution?", options: ["FSx for Lustre, import data directly", "S3 then FSx for Lustre linked to S3", "S3 then EFS", "S3 then FSx for ONTAP"], answer: 0, explain: "FSx for Lustre purpose-built for HPC. Import data directly during Snowball ingestion. Hundreds GBps throughput, millions IOPS, sub-millisecond latency. Linking to S3 adds latency on first access." },

      { cat: "design-resilient", q: "EC2 in public/private subnets. Database in private needs patch fixes from internet using only IPv4. Fully managed solution?", options: ["NAT gateway in public subnet", "NAT instance in public subnet", "Egress-only internet gateway", "Internet Gateway accessible to private subnet"], answer: 0, explain: "NAT gateway in public subnet enables private instances to connect to internet. Specify Elastic IP. Update route table in private subnet. Egress-only for IPv6. Internet Gateway can't be used directly with private subnet." },
      { cat: "design-resilient", q: "Healthcare company deployed web app on ECS containers behind ALB. Website slows when traffic spikes, configured CloudWatch alarms. Need automated solution?", options: ["Auto Scaling when CloudWatch alarm CPU rises", "Auto Scaling when ECS service CPU rises", "Auto Scaling when ALB CPU rises", "Auto Scaling when ALB target group CPU rises"], answer: 1, explain: "Configure target tracking scaling policy that scales ECS service based on service's CPU utilization. When avg CPU >75%, scale out adds task." },
      { cat: "design-cost", q: "Small business migrate to AWS. Cost-effective serverless solution for app with static and dynamic content?", options: ["S3 static + EC2/RDS dynamic + CloudFront", "S3 for both + CloudFront", "S3 static + Lambda/DynamoDB dynamic + CloudFront", "EC2/RDS both + CloudFront"], answer: 2, explain: "Lambda with DynamoDB is serverless. CloudFront for global distribution. S3 cost-effective for static. EC2 not serverless as instances must be managed." },
      { cat: "design-secure", q: "Retail company connected on-premises to AWS via Direct Connect. Resolve DNS queries for resources in both directions. Which 2 solutions?", options: ["Universal endpoint on Route 53 Resolver", "Inbound endpoint for Route 53 to forward to on-premises", "Outbound endpoint for on-premises to forward to Route 53", "Outbound endpoint for Route 53 to forward to on-premises", "Inbound endpoint for on-premises to forward to Route 53"], answer: [3,4], explain: "Inbound endpoint: on-premises DNS resolvers forward queries to Route 53 Resolver. Outbound endpoint: Route 53 Resolver conditionally forwards queries to on-premises resolvers with Resolver rules." },
      { cat: "design-secure", q: "Company wants shared centrally-managed VPCs for departments in AWS Organizations for high interconnectivity. Which option?", options: ["VPC sharing to share subnets", "VPC peering to share VPC", "VPC peering to share subnets", "VPC sharing to share VPC"], answer: 0, explain: "VPC sharing (Resource Access Manager) allows account owning VPC to share one or more subnets with other accounts in organization. Can't share VPC itself. Peering doesn't facilitate centrally managed VPCs." },
      { cat: "design-performant", q: "Use Microsoft Active Directory on-premises. Extend to AWS hybrid cloud. Run directory-aware SQL Server workloads, configure trust relationship for SSO. Which service?", options: ["AWS Managed Microsoft AD", "Cloud Directory", "Simple AD", "Active Directory Connector"], answer: 0, explain: "Managed Microsoft AD runs directory-aware workloads like SQL Server. Can configure trust relationship with on-premises AD for SSO. AD Connector only allows on-premises users to log in. Simple AD doesn't support trusts." },


      // Practice Test #2 - 65 Questions (Udemy SAA-C03)
      { cat: "design-cost", q: "Data transfer charges for RDS read replicas across regions?", options: ["There are data transfer charges for replicating data within the same Availability Zone", "There are no data transfer charges for replicating data across AWS Regions", "There are data transfer charges for replicating data within the same AWS Region", "There are data transfer charges for replicating data across AWS Regions"], answer: 3, explain: "You are not charged for data transfer between source DB and read replica within same AWS Region. Cross-region replication incurs data transfer charges." },
      { cat: "design-performant", q: "Migrate cron scripts (up to 30 min runtime) to AWS serverless?", options: ["EventBridge Scheduler with Fargate tasks", "AWS Batch with EC2", "Lambda functions", "Step Functions with Wait states"], answer: 0, explain: "EventBridge Scheduler with Fargate handles scripts up to 30 min. Lambda has 15-min limit. Fargate is serverless and scalable." },
      { cat: "design-performant", q: "Global healthcare app with RPO of seconds and RTO of minute using Aurora?", options: ["Aurora multi-master cluster", "Aurora provisioned cluster", "Aurora serverless cluster", "Aurora Global Database"], answer: 3, explain: "Aurora Global Database spans multiple regions with RPO of 1 second and RTO less than 1 minute for global apps." },
      { cat: "design-secure", q: "Prevent developers from escalating privileges to AdministratorAccess?", options: ["IAM permission boundary on each developer", "IAM permission boundary on group", "SCP on AWS account", "IAM policy preventing attachment"], answer: 0, explain: "Permission boundaries set maximum permissions. Apply to users or roles, not groups. Prevents privilege escalation." },
      { cat: "design-secure", q: "Lambda in Account A accessing S3 bucket in Account B?", options: ["Lambda cannot access cross-account", "S3 bucket should be public", "IAM role for Lambda granting S3 access", "IAM role for Lambda + bucket policy granting access"], answer: 3, explain: "Cross-account access requires both IAM role on Lambda and bucket policy granting access to Lambda's execution role." },
      { cat: "design-performant", q: "Migrate on-prem NFS files to EFS using Direct Connect?", options: ["DataSync with S3 gateway endpoint", "DataSync with VPC peering endpoint", "DataSync with PrivateLink interface VPC endpoint via private VIF", "DataSync with public VIF to S3"], answer: 2, explain: "DataSync agent with PrivateLink interface VPC endpoint for EFS using private VIF provides most efficient solution." },
      { cat: "design-resilient", q: "Kubernetes app with AMQP messaging migrate to AWS?", options: ["EKS with Fargate + Amazon MQ", "ECS on EC2 + SNS", "SQS replacing AMQP", "EC2 ASG + self-hosted RabbitMQ"], answer: 0, explain: "EKS with Fargate for managed Kubernetes. Amazon MQ supports AMQP natively for minimal code changes." },
      { cat: "design-resilient", q: "IoT sensors sending location data, prevent data loss during spikes?", options: ["S3 events to SQS, Lambda polls queue", "ECS with internal queue", "IoT Core to SNS, app polls topic", "Data Firehose to S3"], answer: 0, explain: "SQS buffers messages preventing data loss. Lambda processes asynchronously at own pace. Fully managed serverless solution." },
      { cat: "design-cost", q: "Need 4 instances always available with high availability, minimize cost?", options: ["Deploy 2 instances in 1 AZ", "Deploy 2 instances in each of 3 AZs (total 6)", "Deploy 4 instances in each of 2 AZs (total 8)", "Deploy 2 instances in each of 2 AZs (total 4)"], answer: 1, explain: "6 instances across 3 AZs: even if 1 AZ fails, 4 instances remain. Most cost-effective HA solution." },
      { cat: "design-secure", q: "IAM policy: what does aws:RequestedRegion condition do?", options: ["Allows EC2 in eu-west-1 only, API call from anywhere", "Allows EC2 anywhere except eu-west-1", "Allows EC2 in any region when call from eu-west-1", "Allows EC2 in eu-west-1 when call from eu-west-1"], answer: 0, explain: "aws:RequestedRegion is target of API call. Policy allows launching EC2 only in eu-west-1, call can originate anywhere." },
      { cat: "design-cost", q: "Optimize costs: 70 instances always-on, 30 batch jobs?", options: ["70 on-demand, 30 reserved", "70 on-demand, 30 spot", "70 reserved, 30 on-demand", "70 reserved, 30 spot"], answer: 3, explain: "Reserved Instances for steady-state 70 instances. Spot for interruptible batch jobs provides maximum savings." },
      { cat: "design-secure", q: "Block malicious IP attacking CloudFront app?", options: ["Network ACL on instances", "Security groups on instances", "AWS support ticket", "WAF IP match condition"], answer: 3, explain: "AWS WAF with IP match condition blocks up to 10,000 IP addresses. Works with CloudFront distributions." },
      { cat: "design-secure", q: "IAM policy: user can terminate EC2 in which scenario?", options: ["In us-west-1 when source IP is 10.200.200.200", "Any region except us-west-1 when source IP is 10.200.200.200", "Cannot terminate in us-west-1 when source IP is 10.200.200.200", "In us-west-1 when EC2 IP is 10.200.200.200"], answer: 0, explain: "Policy denies EC2 actions outside us-west-1. Allows terminate from specific source IP in us-west-1 region." },
      { cat: "design-resilient", q: "Blue-green deployment for global app, avoid DNS caching issues?", options: ["Route 53 weighted routing", "CodeDeploy deployment options", "AWS Global Accelerator with traffic dials", "Elastic Load Balancing"], answer: 2, explain: "Global Accelerator uses anycast IPs, no DNS caching. Traffic dials shift traffic instantly between blue/green." },
      { cat: "design-cost", q: "ASG terminates instance in us-east-1a with oldest launch config/template?", options: ["Instance A (oldest launch template)", "Instance B (oldest launch configuration)", "Instance C (newest launch configuration)", "Instance D (closest to billing hour)"], answer: 1, explain: "Default termination: oldest launch configuration takes priority over oldest launch template." },
      { cat: "design-performant", q: "Minimize 3-minute application bootstrap time on EC2 start?", options: ["EC2 Instance Hibernate", "EC2 User-Data", "EC2 Meta-Data", "Create AMI"], answer: 0, explain: "Hibernate saves RAM to EBS. On start, instance resumes with application already running, eliminating bootstrap time." },
      { cat: "design-secure", q: "Prevent developers from modifying CloudTrail in their accounts?", options: ["Service-linked role for CloudTrail", "SCP prohibiting CloudTrail changes", "IAM policy on root user", "Configure trails with organization option"], answer: 1, explain: "Service Control Policy (SCP) restricts permissions including root user. Prevents CloudTrail modifications across member accounts." },
      { cat: "design-secure", q: "Security groups for web tier (port 443) and MSSQL database (port 1433)?", options: ["SG A: inbound 443 all, outbound 1433 to SG B; SG B: inbound 1433 from SG A", "SG A: inbound 443 all, outbound 443 to SG B", "SG B: inbound 1433 from all", "SG B: inbound 443 from SG A"], answer: 0, explain: "Web servers listen on 443, communicate to database on 1433. Database accepts connections from web tier SG on 1433." },
      { cat: "design-secure", q: "Enterprise S3 bucket with multiple services accessing different prefixes?", options: ["Separate IAM users with inline policies", "Single bucket policy listing all ARNs", "Amazon Macie for object-level policies", "S3 access points with prefix-level policies"], answer: 3, explain: "S3 Access Points provide scalable, isolated access per service. Each access point has policy restricting to specific prefix." },
      { cat: "design-secure", q: "Restrict API Gateway to specific IP addresses?", options: ["Security group on API Gateway", "Resource policy denying all IPs except allow list", "Deploy to on-premises via Outposts", "Deploy as regional API in public subnet"], answer: 1, explain: "API Gateway resource policies support IpAddress/NotIpAddress conditions. Explicitly deny all except trusted IPs." },
      { cat: "design-resilient", q: "SQL Server with heavy read load, full DB copy causes latency?", options: ["Aurora MySQL Multi-AZ with mysqldump", "Aurora MySQL Multi-AZ restore from automated backups", "RDS MySQL Multi-AZ using standby", "RDS SQL Server with read replicas"], answer: 1, explain: "Aurora automated backups are continuous with no performance impact. Restore dev DB from backups instead of full copy." },
      { cat: "design-performant", q: "Extract text from PDFs and analyze sentiment with minimal overhead?", options: ["Textract to extract, Comprehend for sentiment", "SageMaker custom model", "Lambda to CSV, Athena to query", "Redshift + Rekognition"], answer: 0, explain: "Textract extracts text from PDFs. Comprehend provides pre-trained NLP for sentiment analysis. Fully managed, no custom ML." },
      { cat: "design-resilient", q: "ASG not terminating unhealthy instance - troubleshoot?", options: ["Health check grace period not expired", "ELB health check failed", "Impaired status", "Custom health check failed", "Spot instance cannot terminate", "User increased minimum instances"], answer: 0, explain: "ASG waits for grace period, doesn't terminate Impaired instances immediately, requires ELB health check type configured." },
      { cat: "design-resilient", q: "Minimize downtime for on-premises to AWS failover?", options: ["Route 53 failover with Lambda launching CloudFormation", "Route 53 failover, EC2 in ASG behind ALB, Storage Gateway", "Route 53 failover, CloudFormation via script, ALB, Storage Gateway", "Route 53 failover, Direct Connect, ASG, Lambda creating ALB"], answer: 1, explain: "Pre-provisioned EC2 in ASG behind ALB with Storage Gateway ready. Route 53 failover switches traffic immediately." },
      { cat: "design-cost", q: "Big data: need 80 instances 80% time, spikes to 300, baseline need 20?", options: ["20 on-demand, spot for rest", "80 on-demand, on-demand and spot for spikes", "80 reserved, on-demand and spot for spikes", "80 spot, on-demand for spikes"], answer: 2, explain: "80 Reserved Instances for steady-state 80% workload. Mix of on-demand and spot for spikes provides cost optimization." },
      { cat: "design-resilient", q: "RDS Multi-AZ database engine upgrade causes downtime?", options: ["Standby upgraded then primary, no downtime", "Primary upgraded then standby, no downtime", "Both upgraded simultaneously, no downtime", "Both upgraded simultaneously with downtime"], answer: 3, explain: "Database engine upgrades require downtime. Both primary and standby upgraded simultaneously even in Multi-AZ." },
      { cat: "design-secure", q: "Encrypt unencrypted RDS database?", options: ["Enable encryption on RDS via console", "Enable Multi-AZ, encrypt standby, failover", "Snapshot, copy encrypted, restore from encrypted snapshot", "Read replica encrypted, promote to standalone"], answer: 2, explain: "Cannot enable encryption in-place. Snapshot database, copy snapshot encrypted, restore from encrypted snapshot." },
      { cat: "design-secure", q: "Cost-effective single-tenant hardware for compliance?", options: ["Dedicated Hosts", "On-Demand Instances", "Dedicated Instances", "Spot Instances"], answer: 2, explain: "Dedicated Instances run on single-tenant hardware. More cost-effective than Dedicated Hosts for isolation without license requirements." },
      { cat: "design-secure", q: "Web app with Auto Scaling, WAF protection, high availability?", options: ["EC2 in ASG across 2 AZs, ALB, WAF on ALB", "EC2 in 2 AZs, ALB, WAF", "EC2 in single AZ, Global Accelerator, WAF", "ECS on EC2, ALB, SNS"], answer: 0, explain: "ASG provides automatic scaling. ALB distributes traffic and supports WAF integration. Multi-AZ for availability." },
      { cat: "design-secure", q: "S3 encryption with audit trail and automatic yearly key rotation?", options: ["SSE-C with automatic rotation", "SSE-KMS with manual rotation", "SSE-KMS with automatic rotation", "SSE-S3 with automatic rotation"], answer: 2, explain: "SSE-KMS provides CloudTrail audit trail of key usage. Automatic yearly rotation. Most operationally efficient." },
      { cat: "design-secure", q: "Private hosted zone DNS queries unresolved?", options: ["Remove overlapping namespaces", "Fix NS and SOA records", "Enable DNS hostnames and DNS resolution", "Fix Resolver rule conflicts"], answer: 2, explain: "Private hosted zones require DNS hostnames and DNS resolution enabled on VPC for queries to work." },
      { cat: "design-cost", q: "EC2 instances in multiple accounts communicate privately - cheapest?", options: ["VPC in account, share subnets via RAM", "PrivateLink between instances", "Transit Gateway linking VPCs", "VPC peering between all VPCs"], answer: 0, explain: "Resource Access Manager (RAM) shares subnets across accounts. EC2 instances deployed in shared subnets communicate privately at no extra cost." },
      { cat: "design-secure", q: "Migrate SQL Server to AWS with encryption, minimize management?", options: ["EC2 with encrypted EBS volumes", "Timestream with CloudTrail", "Export to S3 CSV with bucket policies", "RDS for SQL Server Multi-AZ with KMS"], answer: 3, explain: "RDS managed service reduces operational overhead. Multi-AZ for HA. KMS encryption for security and compliance." },
      { cat: "design-secure", q: "Legacy SFTP vendors upload to S3 data lake?", options: ["Transfer Family SFTP to S3 + IAM roles", "Transfer Family with Route 53 subdomains", "AppFlow for SFTP extraction", "EC2 SFTP server with cron jobs"], answer: 0, explain: "AWS Transfer Family provides managed SFTP endpoint to S3. IAM roles map vendors to specific S3 prefixes. Cognito or custom IdP for authentication." },
      { cat: "design-performant", q: "EFS performance mode for big data with high parallelization?", options: ["Provisioned Throughput", "General Purpose", "Max I/O", "Bursting Throughput"], answer: 2, explain: "Max I/O mode scales to higher aggregate throughput for highly parallelized workloads like big data analysis." },
      { cat: "design-secure", q: "S3 encryption with customer-managed key stored on-premises?", options: ["Client-side encryption", "SSE-KMS", "SSE-S3", "SSE-C"], answer: 3, explain: "Server-Side Encryption with Customer-Provided Keys (SSE-C) allows customer to manage keys while S3 manages encryption." },
      { cat: "design-performant", q: "Replace on-premises DFSR for Windows file sharing?", options: ["S3", "FSx for Lustre", "FSx for Windows File Server", "EFS"], answer: 2, explain: "FSx for Windows File Server supports SMB, NTFS, Active Directory, and DFS. Native replacement for Windows DFSR." },
      { cat: "design-resilient", q: "Aurora with high I/O causing latency - separate reads from writes?", options: ["Provision another Aurora database as read replica", "Read replica with reader endpoint", "Multi-AZ standby for reads", "Read-through caching"], answer: 1, explain: "Aurora read replicas with reader endpoint load-balance read traffic across up to 15 replicas. Offloads reads from primary." },
      { cat: "design-cost", q: "Near real-time image processing (3 min, 512MB) as uploaded?", options: ["S3 events to SQS, Lambda processes", "ECS with internal queue", "IoT Core to SNS", "Data Firehose to S3, app scans"], answer: 0, explain: "S3 event notifications to SQS. Lambda polls queue and processes. Serverless, pay-per-use, fits within Lambda limits." },
      { cat: "design-secure", q: "Hub-spoke VPCs with Transit Gateway - reduce cost for shared services?", options: ["Build shared services VPC", "VPCs with Direct Connect", "Transit VPC", "Fully meshed VPC peering"], answer: 0, explain: "Shared services VPC with centralized resources (directory services, VPC endpoints) reduces duplication and costs." },
      { cat: "design-performant", q: "S3 data lake: raw zone (5 years compliance) and refined zone (ad-hoc queries)?", options: ["Lifecycle raw to Glacier Deep Archive after 1 day + Glue compressed format for refined", "Lifecycle refined to Glacier Deep Archive after 1 day", "Lambda delete raw after 1 day", "Glue CSV format for refined"], answer: 0, explain: "Raw zone to Glacier Deep Archive for compliance. Refined zone compressed format reduces storage costs for active queries." },
      { cat: "design-performant", q: "US app with European users experiencing high latency?", options: ["Aurora read replicas in eu-west-1 + EC2 fleet with latency routing", "EC2 fleet with failover routing", "EC2 fleet with geolocation routing", "Aurora Multi-AZ in eu-west-1"], answer: 0, explain: "Aurora cross-region read replicas for database. EC2 fleet in EU region. Route 53 latency-based routing for lowest latency." },
      { cat: "design-secure", q: "HTTP app: security groups for ALB (HTTPS), EC2, and RDS PostgreSQL?", options: ["RDS from EC2 on 5432, EC2 from ALB on 80, ALB from anywhere on 443", "EC2 from RDS on 5432", "ALB from anywhere on 80", "RDS from EC2 on 80"], answer: 0, explain: "ALB terminates HTTPS (443). Forwards to EC2 on HTTP (80). EC2 connects to PostgreSQL (5432) on RDS." },
      { cat: "design-resilient", q: "Rapidly increasing RDS MySQL storage - urgent solution?", options: ["Create read replica", "Enable storage auto-scaling", "Migrate to Aurora with auto-scaling", "Migrate to DynamoDB"], answer: 1, explain: "Enable RDS storage auto-scaling. Automatically scales up storage when free space below 10%. Most operationally efficient." },
      { cat: "design-cost", q: "Monthly 2-hour distributed workload with server failures?", options: ["Dedicated Hosts", "Spot Fleet", "Reserved Instances", "Spot Instances"], answer: 1, explain: "Spot Fleet selects optimal instances with lowestPrice strategy. Maintains target capacity replacing terminated instances." },
      { cat: "design-secure", q: "Read-only access to S3 bucket and contents?", options: ["ListBucket on bucket ARN, GetObject on bucket/*", "ListBucket and GetObject on bucket/*", "ListBucket and GetObject on bucket", "ListBucket on bucket/*, GetObject on bucket"], answer: 0, explain: "ListBucket applies to bucket (arn:aws:s3:::mybucket). GetObject applies to objects (arn:aws:s3:::mybucket/*)." },
      { cat: "design-performant", q: "Video conferencing: global users experience latency to regional NLBs?", options: ["Replace NLBs with ALBs", "Route 53 latency-based routing", "Global Accelerator with NLB endpoints", "CloudFront in front of NLBs"], answer: 2, explain: "Global Accelerator routes traffic through AWS global network to closest healthy NLB. Static anycast IPs reduce latency." },
      { cat: "design-resilient", q: "Single VM legacy app to HA on AWS with MySQL-compatible engine?", options: ["EC2 target group with ALB, RDS MySQL Multi-AZ", "EC2 with NLB, ElastiCache Redis", "EC2 in ASG behind ALB, Aurora Serverless v2", "ECS with ALB, Neptune"], answer: 2, explain: "ASG provides automatic scaling. ALB distributes traffic. Aurora Serverless v2 auto-scales, MySQL-compatible, Multi-AZ HA." },
      { cat: "design-secure", q: "Centralize security event data across AWS accounts with minimal effort?", options: ["Lake Formation with Glue ETL", "Lambda to aggregate logs to S3", "Athena queries on S3", "Amazon Security Lake"], answer: 3, explain: "Security Lake automatically collects security logs from AWS services. Normalizes to OCSF format. Fully managed, minimal development." },
      { cat: "design-performant", q: "Media production SMB file sharing with minimal overhead?", options: ["Volume Gateway with SMB sharing", "S3 with Transfer Acceleration", "FSx for Windows File Server", "EC2 Windows file share"], answer: 2, explain: "FSx for Windows File Server provides managed SMB protocol access. Fully managed, integrates with AD, minimal overhead." },
      { cat: "design-secure", q: "EC2 instances need access to S3 and DynamoDB - most secure?", options: ["Attach IAM role to EC2 instance profile", "AWS credentials in config file", "AWS CLI with IAM user credentials", "Encrypt credentials in secret directory"], answer: 0, explain: "IAM roles provide temporary credentials via instance profile. No credentials stored on instance. Most secure approach." },
      { cat: "design-performant", q: "Global Access Control Management with relational database?", options: ["Aurora Global Database for fast local reads", "EC2 with MySQL in each region", "DynamoDB Global Tables", "Redshift in each region"], answer: 0, explain: "Aurora Global Database spans multiple regions. Low-latency local reads. RPO < 1 second. Supports relational schema." },
      { cat: "design-resilient", q: "US-based app improve availability, need 4 instances always?", options: ["EC2 in 1 AZ, 2 instances", "EC2 in 3 AZs, 2 per AZ behind ELB", "EC2 in 2 AZs, 4 per AZ behind ELB", "EC2 in 2 AZs, 2 per AZ behind ELB"], answer: 1, explain: "EC2 in 2 AZs behind ELB. RDS Multi-AZ for database. ELB distributes traffic. Multi-AZ for both tiers provides HA for US users." },
      { cat: "design-secure", q: "Monitor third-party ACM certificate expiration 30 days before?", options: ["CloudWatch metric for ACM-issued certs", "CloudWatch metric for imported certs", "AWS Config rule for imported certs + SNS", "AWS Config rule for ACM-issued certs"], answer: 2, explain: "AWS Config managed rule checks imported certificates. ACM doesn't auto-renew imported certs. SNS notification when expiring." },
      { cat: "design-secure", q: "Decouple authentication for CloudFront app with ALB?", options: ["Cognito User Pools for CloudFront", "Cognito Identity Pools for ALB", "Cognito User Pools for ALB", "Cognito Identity Pools for CloudFront"], answer: 2, explain: "Application Load Balancer supports Cognito User Pools authentication. Offloads auth from application. Minimal development effort." },
      { cat: "design-secure", q: "Share encrypted RDS snapshot with external auditor?", options: ["Create snapshot in S3, assign IAM role", "Export to text files in S3 with IAM user", "Read replica with IAM auth", "Encrypted snapshot, share snapshot and KMS key"], answer: 3, explain: "Create encrypted snapshot. Share snapshot with auditor account. Grant access to KMS key used for encryption." },
      { cat: "design-cost", q: "Less frequently accessed files for hundreds of EC2 instances, immediate access?", options: ["S3 Standard-IA", "EFS Standard", "EBS", "EFS Standard-IA"], answer: 3, explain: "EFS provides concurrent access for hundreds of EC2. Standard-IA storage class reduces costs for infrequent access with immediate retrieval." },
      { cat: "design-resilient", q: "Users see different videos each login - EBS attached locally?", options: ["Use EFS mounted on all instances", "Use S3 for video storage", "Use DynamoDB for videos", "Use RDS for videos"], answer: 0, explain: "EBS is local to instance. Videos spread across instances. EFS or S3 provides shared storage accessible from all instances." },
      { cat: "design-performant", q: "Process desktop telemetry in order per desktop, scale consumers?", options: ["Kinesis with Partition ID as Desktop ID", "SQS FIFO as-is", "SQS Standard as-is", "SQS FIFO with Group ID as Desktop ID"], answer: 3, explain: "SQS FIFO with Group ID per desktop. Messages per desktop processed in order. Multiple consumers can process different desktops." },
      { cat: "design-secure", q: "Redshift UNLOAD to S3 in different account - bucket owner cannot access?", options: ["By default object owned by uploader, not bucket owner", "Bucket owner gets implicit permissions", "Owner has implicit access, write still in progress", "Both accounts must share bucket policies"], answer: 0, explain: "By default S3 object owned by AWS account that uploaded it. Bucket owner needs cross-account permissions to access." },
      { cat: "design-secure", q: "S3 replication with encryption using same key across regions?", options: ["New bucket with replication + multi-region KMS key + copy data", "Change single-region key to multi-region, enable batch replication", "Enable replication, share KMS key across regions", "CloudWatch + Lambda to copy data with KMS access"], answer: 0, explain: "Cannot convert single-region to multi-region key. Create new bucket with multi-region KMS key. Enable replication. Copy existing data." },
      { cat: "design-performant", q: "EC2 user data default behavior?", options: ["Runs with root privileges + runs only at first boot", "Runs without root + runs every restart", "Runs with root + runs every restart", "Can update while instance running"], answer: 0, explain: "User data runs as root by default. Runs only during first boot unless configured otherwise. Cannot update while running." },
      { cat: "design-secure", q: "IAM policy with SourceIp condition - what does it allow?", options: ["EC2 start when call originates from CIDR block", "EC2 with public IP in CIDR", "EC2 with private IP in CIDR", "EC2 with Elastic IP in CIDR"], answer: 0, explain: "aws:SourceIp represents IP where API call originates. Allows EC2 launch only when caller IP is within CIDR block." },
      { cat: "design-cost", q: "Move on-premises backups to long-term archival - most cost savings?", options: ["Snowball to Glacier Vault", "Snowball to S3, lifecycle to Glacier same day", "Snowball to Glacier Deep Archive Vault", "Snowball to S3, lifecycle to Glacier Deep Archive same day"], answer: 3, explain: "Cannot move directly to Glacier from Snowball. Use S3 first. Zero-day lifecycle to Glacier Deep Archive provides most savings." },
      { cat: "design-performant", q: "Scalable serverless static website with animations?", options: ["Lambda with CloudFront", "S3 static website + CloudFront + Route 53", "EC2 with CloudFront", "On-premises with CloudFront"], answer: 1, explain: "S3 hosts static website. CloudFront CDN for global performance. Route 53 alias to CloudFront. Fully serverless, scalable." },

      // Practice Test #4 - 65 Questions
      { cat: "design-performant", q: "Recommended solution to incorporate RDS best practices into reusable infrastructure?", options: ["Store recommendations in custom Trusted Advisor rule", "Use CloudFormation to manage RDS databases", "Create Lambda function to send emails for misconfigured RDS", "Attach IAM policy to prevent RDS creation"], answer: 1, explain: "CloudFormation provides reusable infrastructure templates with configuration parameters for RDS best practices." },
      { cat: "design-cost", q: "Auto Scaling with predictable patterns and real-time spikes - best strategy?", options: ["Simple scaling with longer cooldowns", "Predictive scaling + dynamic scaling with target tracking", "Scheduled scaling with manual adjustments", "Step scaling based on CPU"], answer: 1, explain: "Predictive scaling forecasts demand using ML. Combined with dynamic target tracking, it handles both patterns and real-time spikes." },
      { cat: "design-cost", q: "Reduce Aurora costs with read-heavy workload, acceptable 24h stale data?", options: ["Enable Lambda In Memory Caching", "Enable API Gateway Caching", "Switch to ALB", "Add Aurora Read Replicas"], answer: 1, explain: "API Gateway caching reduces Aurora calls by caching endpoint responses for up to 24 hours TTL." },
      { cat: "design-resilient", q: "Asynchronously decouple SaaS and third-party integrations?", options: ["Use SNS to communicate between systems", "Use SQS to decouple", "Use EventBridge to decouple", "Use ELB for decoupling"], answer: 2, explain: "EventBridge integrates directly with third-party SaaS partners and AWS services for event-driven architecture." },
      { cat: "design-secure", q: "Only resource-based policy IAM supports?", options: ["Permissions boundary", "Organizations SCP", "Access control list (ACL)", "Trust policy"], answer: 3, explain: "Trust policy is the only resource-based policy for IAM roles, defining which principals can assume the role." },
      { cat: "design-resilient", q: "Most cost-effective to connect VPCs across employees?", options: ["Use Internet Gateway", "Use VPC peering connection", "Use Direct Connect", "Use NAT gateway"], answer: 1, explain: "VPC peering connects VPCs privately without internet gateway, Direct Connect, or NAT gateway costs." },
      { cat: "design-cost", q: "EFS burst throughput for sporadic spikes with low average demand?", options: ["Switch to EFS One Zone", "Enable EFS IA storage class", "Change to provisioned throughput", "Enable burst mode with General Purpose and Standard"], answer: 3, explain: "Burst throughput mode accumulates credits for spikes without manual provisioning, ideal for unpredictable workloads." },
      { cat: "design-performant", q: "Scale infrastructure for 10x flash sale traffic with dynamic content?", options: ["Deploy on S3", "Use CloudFront distribution", "Use Route 53 Multi Value", "Use Auto Scaling Group"], answer: 3, explain: "Auto Scaling Group automatically adjusts EC2 capacity for traffic spikes with dynamic content." },
      { cat: "design-resilient", q: "Robust DR for ElastiCache Redis with minimal downtime and data loss?", options: ["Add read-replicas across AZs", "Schedule daily automatic backups", "Schedule manual backups using AOF", "Multi-AZ with automatic failover"], answer: 3, explain: "Multi-AZ provides automatic failover with low data loss and minimal downtime for Redis." },
      { cat: "design-secure", q: "Two AWS services using Gateway Endpoints? (Select two)", options: ["DynamoDB", "Kinesis", "SNS", "S3", "SQS"], answer: 0, explain: "Only S3 and DynamoDB use Gateway Endpoints. Other services use Interface Endpoints." },
      { cat: "design-performant", q: "Maximize VPN throughput across regions?", options: ["Create virtual private gateway with ECMP", "Use Global Accelerator for VPN", "Create Transit Gateway with ECMP and add VPN tunnels", "Use Transfer Acceleration for VPN"], answer: 2, explain: "Transit Gateway with ECMP enables scaling VPN throughput beyond 1.25 Gbps using multiple tunnels." },
      { cat: "design-performant", q: "Route 53 feature to dynamically alter geographic routing area?", options: ["Weighted routing", "Geoproximity routing", "Geolocation routing", "Latency-based routing"], answer: 1, explain: "Geoproximity routing with bias lets you expand or shrink geographic regions routing traffic to resources." },
      { cat: "design-secure", q: "CloudFormation snippet security group rules analysis? (Select three)", options: ["Lets traffic from one IP on port 22", "Configures outbound rules", "Only allows 0.0.0.0 to HTTP", "Prevents traffic unless from 192.168.1.1", "Configures network ACL inbound", "Allows any IP on HTTP", "Configures security group inbound"], answer: 0, explain: "SecurityGroupIngress configures inbound rules allowing any IP on port 80 and one IP (192.168.1.1) on port 22." },
      { cat: "design-resilient", q: "Reduce time to create Elastic Beanstalk instance from 45 min to under 2 min? (Select two)", options: ["Use EC2 user data to install at boot", "Use EC2 user data to customize dynamic parts at boot", "Store files in S3 for retrieval", "Use Elastic Beanstalk deployment caching", "Create Golden AMI with static components"], answer: 1, explain: "Golden AMI with static components + EC2 user data for dynamic customization minimizes deployment time." },
      { cat: "design-performant", q: "Niche social media app with DynamoDB hot partition - improve performance without refactoring?", options: ["Use ElastiCache", "Use DynamoDB Streams", "Use Global Tables", "Use DynamoDB DAX"], answer: 3, explain: "DAX provides microsecond latency in-memory cache for DynamoDB, eliminating hot partition issues transparently." },
      { cat: "design-resilient", q: "Serverless NoSQL database with single-digit ms latency for ride GPS tracking?", options: ["RDS", "DynamoDB", "Neptune", "ElastiCache"], answer: 1, explain: "DynamoDB provides single-digit millisecond performance, serverless, and horizontal scaling for high-frequency lookups." },
      { cat: "design-resilient", q: "45-min install, RTO 5 min in multiple regions - DR strategy?", options: ["Use EC2 user data", "Store files in S3", "Create AMI and use in other regions", "Create AMI and copy across all regions"], answer: 3, explain: "AMI with pre-installed software copied to all regions enables fast 5-minute recovery across regions." },
      { cat: "design-performant", q: "Move petabytes of tape data to cloud cost-effectively?", options: ["Tape Gateway to move data, then S3 archiving classes", "VPN + EFS for NFS file system", "DataSync to move data to S3", "Direct Connect to transfer to S3"], answer: 0, explain: "Tape Gateway moves tape data to cloud without changing workflows, stores in S3 Glacier cost-effectively." },
      { cat: "design-performant", q: "Managed message broker supporting MQTT protocol?", options: ["Amazon MQ", "Kinesis Data Streams", "SNS", "SQS"], answer: 0, explain: "Amazon MQ supports MQTT, AMQP, STOMP and other messaging protocols for existing applications." },
      { cat: "design-secure", q: "Dedicated private on-prem to AWS connection with encrypted failover? (Select two)", options: ["Site-to-Site VPN as backup", "Direct Connect as primary", "Direct Connect as backup", "Egress Only IGW as backup", "Site-to-Site VPN as primary"], answer: 1, explain: "Direct Connect provides dedicated private connection. Site-to-Site VPN over internet as encrypted backup." },
      { cat: "design-performant", q: "Database for social networking queries like friends who liked videos?", options: ["Neptune", "Redshift", "Aurora", "OpenSearch"], answer: 0, explain: "Neptune is purpose-built graph database for highly connected datasets like social networks." },
      { cat: "design-performant", q: "Connect VPCs and on-prem with least overhead?", options: ["Use Internet Gateway", "Use VPC peering", "Use Direct Connect", "Use Transit Gateway"], answer: 3, explain: "Transit Gateway acts as central hub connecting VPCs and on-premises with single connection point." },
      { cat: "design-cost", q: "Real-time location tracking with frequent RDS reads - reduce read pressure cost-effectively?", options: ["Enable Aurora Serverless v2", "Convert to multi-writer Aurora global", "Integrate ElastiCache Redis for caching", "Add another Aurora read replica"], answer: 2, explain: "ElastiCache Redis caches frequently accessed queries in-memory, reducing repeated RDS reads cost-effectively." },
      { cat: "design-performant", q: "ALB with inconsistent traffic - most scalable solution for firewall IP whitelisting?", options: ["Set up Global Accelerator with ALB, allow static IPs", "Set up NLB in one region with ALB private IPs", "Migrate ALB to NLB in all regions", "Use Lambda to get ALB IPs for firewall"], answer: 0, explain: "Global Accelerator provides two static IPs for ALB endpoints, simplifying firewall configuration globally." },
      { cat: "design-secure", q: "ALB unhealthy instances but accessible via IP - troubleshoot? (Select two)", options: ["Check route table configured with IGW", "Contact AWS support", "Disable Source/Destination check", "Create secondary IGW", "Check security groups allow ping"], answer: 0, explain: "Verify route table has IGW route and security groups allow traffic on health check port." },
      { cat: "design-secure", q: "Enforce 7-year immutable transaction records and 10-year archived compliance data?", options: ["Use Object Lock Governance mode for both", "Use Glacier Vault Lock for both", "Use S3 Standard with Lifecycle for Policy A, Glacier for B", "Use Object Lock Compliance mode for A, Glacier Vault Lock for B"], answer: 3, explain: "Object Lock Compliance mode ensures immutable audit-ready data. Glacier Vault Lock for long-term archived compliance." },
      { cat: "design-performant", q: "EFS mount targets for EC2 across AZs with lowest latency?", options: ["Create mount targets on EC2 in each AZ", "Create EFS mount targets in each AZ", "Use Mountpoint for S3", "Create single mount target in one AZ"], answer: 1, explain: "Mount targets in each AZ ensure EC2 instances access EFS locally within same AZ for lowest latency." },
      { cat: "design-secure", q: "Security group for EC2 instances to only allow ALB traffic?", options: ["Add rule to authorize ALB security group", "Add rule for CIDR 10.0.4.0/22", "Add rule for CIDR 10.0.1.0/24", "Add rule for ASG security group"], answer: 0, explain: "Security group rules can reference another security group, allowing only ALB traffic to EC2 instances." },
      { cat: "design-resilient", q: "DR strategy with scaled-down environment always running in cloud?", options: ["Backup and Restore", "Multi Site", "Warm Standby", "Pilot Light"], answer: 2, explain: "Warm Standby runs scaled-down version of full environment, enabling quick scale-up during disaster." },
      { cat: "design-resilient", q: "ALB host-based routing - *.example.com matches which domain?", options: ["example.test.com", "EXAMPLE.COM", "example.com", "test.example.com"], answer: 3, explain: "*.example.com matches subdomains like test.example.com but not the apex domain example.com." },
      { cat: "design-performant", q: "HPC workload needing high network throughput and low latency?", options: ["Select capacity reservation", "Select cluster placement group", "Select dedicated instance tenancy", "Select Elastic Inference accelerator"], answer: 1, explain: "Cluster placement group packs instances close together for low-latency node-to-node HPC communication." },
      { cat: "design-resilient", q: "Migrate on-prem SQL Server to AWS with maximum availability, minimal overhead?", options: ["Migrate to RDS SQL Server Multi-AZ", "Migrate to EC2 SQL Server Multi-AZ", "Migrate to RDS cross-region Multi-AZ", "Migrate to RDS cross-region read-replica"], answer: 0, explain: "RDS SQL Server Multi-AZ provides automatic failover with minimal operational overhead." },
      { cat: "design-resilient", q: "DynamoDB table with unpredictable spikes that happen quickly - capacity mode?", options: ["On-demand capacity mode", "With global secondary index", "Global table in provisioned mode", "Provisioned with auto-scaling"], answer: 0, explain: "On-demand mode handles unpredictable traffic and quick spikes without capacity planning." },
      { cat: "design-resilient", q: "Prevent future accidental DynamoDB table deletion with minimal overhead?", options: ["Enable point-in-time recovery (PITR)", "Configure CloudTrail + EventBridge + Lambda recovery", "Export to S3 weekly", "Enable deletion protection"], answer: 3, explain: "Deletion protection prevents accidental table deletion proactively with zero operational overhead." },
      { cat: "design-performant", q: "Stream S3 data to Kinesis Data Streams fastest way?", options: ["S3 bucket actions to SNS then Kinesis", "EventBridge events trigger Lambda to Kinesis", "S3 event notification trigger Lambda to Kinesis", "Use DMS as bridge between S3 and Kinesis"], answer: 3, explain: "AWS DMS supports S3 source and Kinesis target, streaming full and CDC files out-of-box without code." },
      { cat: "design-resilient", q: "Route 53 update not redirecting to new Load Balancer - what's wrong?", options: ["Health checks failing", "CNAME Record misconfigured", "Alias Record misconfigured", "TTL still in effect"], answer: 3, explain: "DNS TTL must expire before recursive resolvers query for new Load Balancer address." },
      { cat: "design-performant", q: "Route 53 with 2 NLB nodes (AZ-A: 4 targets, AZ-B: 6 targets), cross-zone disabled - AZ-A traffic distribution?", options: ["Each AZ-A target gets 10%", "Each AZ-B target gets 10%", "Each AZ-A target gets 12.5%", "Each AZ-A target gets 8%"], answer: 2, explain: "Route 53 sends 50% to each NLB node. Without cross-zone, AZ-A's 50% splits across 4 targets = 12.5% each." },
      { cat: "design-performant", q: "Real-time API for streaming analytics from S3 to Kinesis?", options: ["API Gateway + Lambda", "API Gateway + Kinesis Data Analytics", "Athena + S3", "QuickSight + Redshift"], answer: 1, explain: "API Gateway receives requests, Kinesis Data Analytics processes streaming data in real-time." },
      { cat: "design-cost", q: "Cost optimization: EC2 idle/low utilization and instance type recommendations?", options: ["Use Compute Optimizer for purchasing options", "Use Cost Optimization Hub for idle instances + Compute Optimizer for types", "Use Trusted Advisor for auto-renew RI", "Use S3 Storage class analysis with Lifecycle"], answer: 1, explain: "Cost Optimization Hub identifies idle/underutilized resources. Compute Optimizer recommends optimal instance types." },
      { cat: "design-resilient", q: "Bank requirement for whitelisted public IP with high availability?", options: ["Use ALB with Auto Scaling", "Use Classic LB with Auto Scaling", "Use NLB with Auto Scaling", "Use ASG with Dynamic EIPs"], answer: 2, explain: "Network Load Balancer exposes fixed IP addresses that can be whitelisted by bank firewalls." },
      { cat: "design-cost", q: "One-time S3 cross-region copy of 1 PB data? (Select two)", options: ["Use Snowball Edge", "Copy via S3 console", "Set up S3 batch replication then delete config", "Set up S3 Transfer Acceleration", "Use aws s3 sync command"], answer: 2, explain: "S3 batch replication for existing objects one-time copy. AWS S3 sync command for large data transfers." },
      { cat: "design-secure", q: "Centralized SSO with on-prem AD across AWS accounts?", options: ["AWS Managed AD", "AD Connector + IAM Identity Center", "Custom IdP on EC2", "Control Tower only"], answer: 1, explain: "AD Connector proxies to on-prem AD. IAM Identity Center provides centralized SSO with permission sets." },
      { cat: "design-resilient", q: "ASG cross-AZ rebalancing - how does it work?", options: ["Terminates first, then launches", "Launches first, then terminates", "Simultaneous", "Manual intervention"], answer: 1, explain: "ASG launches new instances before terminating old ones during rebalancing to maintain availability." },
      { cat: "design-resilient", q: "Decouple architecture with ALB and Auto Scaling - which scaling strategy? (Select two)", options: ["Set minimum capacity to 2", "Use RIs for minimum capacity", "Use Dedicated hosts", "Set minimum to 3", "Set minimum to 1"], answer: 0, explain: "Minimum 2 instances across different AZs ensures high availability. RIs for minimum capacity reduce costs." },
      { cat: "design-cost", q: "S3 lifecycle - optimize costs for images (45 days) vs thumbnails? (Select two)", options: ["Transition all to Standard IA after 45 days", "Transition all to Glacier after 180 days", "Transition to One Zone IA with prefix after 45 days", "Transition to Standard IA with prefix after 45 days", "Transition to Glacier with prefix after 180 days"], answer: 1, explain: "Use prefix to transition only images to Standard IA after 45 days. All objects to Glacier after 180 days." },
      { cat: "design-performant", q: "Serverless high-traffic API - Lambda chaining choices? (Select three)", options: ["Field level encryption for sensitive data", "CloudFront can route to multiple origins by price class", "Origin group with primary/secondary for failover", "CloudFront routes to origins by content type", "Geo restriction for high availability", "Use KMS encryption in CloudFront"], answer: 0, explain: "CloudFront routes by content type, uses origin groups for failover, and field-level encryption for sensitive data." },
      { cat: "design-cost", q: "io1 volume is 90% of cost, both EC2 and EBS under-utilized with occasional bursts?", options: ["Change EC2 to smaller type", "Convert EBS to gp2", "Don't use CloudFormation", "Keep io1 and reduce IOPS"], answer: 1, explain: "gp2 volumes are cost-effective and support bursting, perfect for occasional I/O spikes." },
      { cat: "design-resilient", q: "Container orchestration serverless solutions? (Select two)", options: ["Use EMR", "Use SageMaker", "Use EKS with Fargate", "Use ECS with Fargate", "Use ECS with EC2"], answer: 2, explain: "EKS and ECS with Fargate provide serverless container orchestration without managing EC2 instances." },
      { cat: "design-secure", q: "Grant S3 bucket access to users in own and another AWS account?", options: ["Use bucket policy or user policy for both", "Use permissions boundary", "Use user policy for both", "Use bucket policy for both"], answer: 3, explain: "Bucket policy is the only way to grant cross-account access to S3 buckets." },
      { cat: "design-performant", q: "Aurora I/O-Optimized vs other storage for high I/O spikes?", options: ["Deploy cached volumes with Storage Gateway", "Implement FSx for Windows over VPN", "Set up S3 Standard-IA with DataSync", "Deploy stored volumes with Storage Gateway"], answer: 0, explain: "Aurora I/O-Optimized provides high throughput with predictable pricing and no I/O-based charges for I/O-intensive apps." },
      { cat: "design-cost", q: "Healthcare hybrid storage with frequent access and no retrieval fees?", options: ["Deploy cached volumes with Storage Gateway", "Implement FSx for Windows", "Set up S3 Standard-IA", "Deploy stored volumes"], answer: 0, explain: "Storage Gateway cached volumes store frequently accessed data locally, all data in S3 without retrieval fees." },
      { cat: "design-resilient", q: "EKS node autoscaling when pod demand exceeds capacity?", options: ["Enable EC2 Auto Scaling with CloudWatch alarms", "Deploy Cluster Autoscaler to integrate with ASG", "Use Fargate to replace nodes", "Implement Lambda function for manual scaling"], answer: 1, explain: "Kubernetes Cluster Autoscaler monitors pending pods and automatically adjusts node count via ASG." },
      { cat: "design-secure", q: "Improve Lambda to RDS PostgreSQL authentication with short-lived credentials? (Select two)", options: ["Deploy Lambda in VPC", "Attach IAM role to Lambda", "Embed credential rotation in Lambda from SSM", "Use IAM authentication to RDS", "Restrict RDS security group to Lambda"], answer: 1, explain: "IAM authentication to RDS PostgreSQL uses IAM roles attached to Lambda for short-lived tokens instead of passwords." },
      { cat: "design-cost", q: "Compress images asynchronously with retries, minimize cost? (Select two)", options: ["SQS", "EC2 On-Demand", "EC2 RIs", "SNS", "EC2 Spot Instances"], answer: 0, explain: "SQS for async job queue with retries. Spot Instances for cost-effective compute for interruptible workloads." },
      { cat: "design-secure", q: "SNI use case for multiple secure domains on ALB?", options: ["Use SNI", "Use wildcard SSL certificate", "Change ELB SSL Security Policy", "Use HTTP to HTTPS redirect"], answer: 0, explain: "SNI allows multiple TLS certificates on same ALB listener for different domains like checkout.mycorp.com and www.mycorp.com." },
      { cat: "design-cost", q: "Archive years of data encrypted at rest with automatic annual key rotation?", options: ["Client-side encryption with imported KMS key", "SSE-S3 with built-in rotation", "CloudHSM with manual workflow", "Customer managed KMS key with automatic rotation + S3 default encryption"], answer: 3, explain: "Customer managed KMS key with auto rotation and S3 default encryption meets compliance with annual rotation." },
      { cat: "design-resilient", q: "1TB file multi-part upload to S3?", options: ["Use S3 Versioning", "Use multi-part upload", "Use Snowball", "Use Direct Connect"], answer: 1, explain: "Multi-part upload required for files >5GB, recommended for >100MB for resiliency and performance." },
      { cat: "design-secure", q: "Hybrid global expansion with Direct Connect - connect both regions and on-prem?", options: ["Establish inter-Region VPC peering", "Deploy EC2 VPN mesh", "Create private VIFs with foreign-region VPCs", "Connect both DX links to shared DX gateway"], answer: 3, explain: "Direct Connect gateway enables VPCs in multiple regions to connect to on-premises via single DX gateway." },
      { cat: "design-secure", q: "Configure RDS to encrypt data in transit?", options: ["Create security group blocking SSH", "Use IAM authentication instead of password", "Create network ACL blocking SSH", "Configure RDS to use SSL"], answer: 3, explain: "SSL/TLS encrypts data in transit between applications and RDS PostgreSQL database." },
      { cat: "design-performant", q: "Stream S3 data to Kinesis then analyze with Lambda - architecture?", options: ["SQS to capture, Lambda to analyze", "Kinesis Data Streams to capture, Kinesis Data Analytics to analyze, Firehose to persist", "Kinesis to capture, Firehose to persist, Athena to analyze", "Kinesis to capture, QuickSight to analyze, Firehose to persist"], answer: 1, explain: "Kinesis Data Streams captures data, Kinesis Data Analytics analyzes in real-time, Firehose persists to S3." },

      // Practice Test #5 - 65 Questions
      { cat: "design-resilient", q: "Two-step job handling with EC2 Auto Scaling - prevent job loss during scaling?", options: ["Configure ASG max size during peak hours with CloudWatch CPUUtilization", "Set up two SQS queues, scale based on notifications from each queue", "Set up two SQS queues, scale based on number of messages in each queue", "Set up single SQS queue for both stages, scale based on messages"], answer: 2, explain: "Two SQS queues decouple job intake and processing stages. Scale Auto Scaling groups based on number of messages in each queue for reliability and scalability." },
      { cat: "design-performant", q: "News agency with remote offices - improve S3 upload/download performance?", options: ["Move S3 to EFS with inter-region VPC peering", "Create S3 buckets in every region", "Enable S3 Transfer Acceleration", "Use CloudFront with S3 origin", "Spin up EC2 in each region with EBS"], answer: 2, explain: "S3 Transfer Acceleration speeds uploads/downloads. CloudFront CDN speeds downloads by caching at edge locations. Both options improve performance." },
      { cat: "design-secure", q: "Interconnect 5 VPCs in hub-spoke model - VPC A peering to all others but connectivity fails?", options: ["Use AWS Transit Gateway", "Establish VPC peering between all VPCs", "Use VPC endpoint", "Use internet gateway"], answer: 0, explain: "Transit Gateway acts as network transit hub to interconnect VPCs. VPC peering doesn't support transitive routing, so hub-spoke model won't work." },
      { cat: "design-secure", q: "Archive patient health records with compliance controls on data access?", options: ["Use S3 Glacier with S3 ACL", "Use S3 Glacier vault with vault lock policy", "Use S3 Glacier with lifecycle policy", "Use S3 Glacier vault with S3 ACL"], answer: 1, explain: "S3 Glacier vault lock policy enforces compliance controls like WORM. Vault lock policies can be locked from future edits for regulatory compliance." },
      { cat: "design-secure", q: "Protect EC2 application from cyber-attacks using WAF?", options: ["Configure WAF on Application Load Balancer or API Gateway with EC2", "Create CloudFront distribution for EC2, deploy WAF on CloudFront", "Configure WAF directly on EC2 instances", "Configure ALB, then CloudFront from ALB since WAF can't be on ALB"], answer: 1, explain: "WAF can be deployed on CloudFront, ALB, and API Gateway. Creating CloudFront distribution with WAF provides protection for EC2-hosted applications." },
      { cat: "design-secure", q: "Connect on-premises to AWS with encrypted network and session layers, restrict access?", options: ["Use AWS Client VPN for individual connections", "Use Direct Connect with route tables and security groups", "Use bastion host in public subnet with SSH", "Use Site-to-Site VPN with route tables, security groups, and network ACLs"], answer: 3, explain: "Site-to-Site VPN uses IPsec for network-layer encryption. Security groups and NACLs provide granular traffic control between on-premises and AWS." },
      { cat: "design-performant", q: "Caching solution for relational database supporting geospatial data?", options: ["Use AWS Global Accelerator", "Use ElastiCache for Memcached", "Use ElastiCache for Redis", "Use DynamoDB Accelerator (DAX)"], answer: 2, explain: "ElastiCache for Redis supports geospatial data with purpose-built commands. Redis offers sub-millisecond response times and rich features for caching." },
      { cat: "design-performant", q: "Financial services - share transactions with multiple apps, remove sensitive data, store in DynamoDB?", options: ["Kinesis Data Firehose with Lambda, store in DynamoDB, apps consume from Firehose", "DynamoDB with rule to update transactions, use DynamoDB Streams", "Batch process to S3, Lambda triggered by S3 events, DynamoDB Streams", "Kinesis Data Streams with Lambda, store in DynamoDB, apps consume from stream"], answer: 3, explain: "Kinesis Data Streams supports multiple consumers. Lambda processes and cleanses transactions for DynamoDB. Apps consume raw transactions from stream." },
      { cat: "design-resilient", q: "Prevent accidental deletion of EBS snapshots with recovery period?", options: ["Set IAM policy to deny snapshot deletion", "Set up 7-day EBS snapshot retention rule in Recycle Bin", "Enable AWS Backup Vault Lock", "Lambda-based backup to S3 Glacier Deep Archive"], answer: 1, explain: "EBS Recycle Bin retains deleted snapshots for fixed duration (7 days) before permanent deletion. Provides recovery from accidental deletion with minimal effort." },
      { cat: "design-cost", q: "Archive 5 PB on-premises data to durable long-term storage - most cost-optimal?", options: ["Snowball Edge to S3 Glacier", "Snowball Edge to S3, lifecycle policy to Glacier", "Direct Connect to S3 Glacier", "Site-to-Site VPN to S3 Glacier"], answer: 1, explain: "Snowball Edge for petabyte-scale data transfer. Copy to S3 first, then use lifecycle policy to transition to Glacier. Can't directly copy to Glacier from Snowball." },
      { cat: "design-resilient", q: "Legacy single EC2 app - modernize for high availability and read performance?", options: ["Migrate MySQL to Aurora, use Auto Scaling with EC2 across multiple AZs in single Region with ALB", "Auto Scaling across AZs in two Regions with ALB", "Use CloudFront with Lambda@Edge in different Regions", "Additional EC2 in different Region with Route 53 failover"], answer: 0, explain: "Aurora MySQL cluster with read replicas in multiple AZs improves read performance and availability. Auto Scaling with ALB distributes traffic across AZs." },
      { cat: "design-performant", q: "Global TCP and UDP workloads across Regions - improve performance?", options: ["Create NLB in each Region, configure ALBs for UDP to on-premises", "Direct Connect for all traffic through single Region", "Configure Global Accelerator for TCP workloads, create NLB for UDP to on-premises IP targets", "Deploy PrivateLink for UDP through NLB endpoints"], answer: 2, explain: "Global Accelerator improves TCP performance globally. NLB supports both TCP and UDP, can route to on-premises IP targets in different Regions." },
      { cat: "design-performant", q: "SQS-based workload with unpredictable spikes - cost-effective EC2 strategy?", options: ["Reserved Instances for peak capacity", "Spot Instances exclusively with Auto Scaling", "Reserved for baseline, On-Demand for spikes", "Reserved for baseline, Spot for spikes"], answer: 3, explain: "Reserved Instances for baseline provides cost savings. Spot Instances for spikes offers deep discounts for fault-tolerant, interruptible workloads." },
      { cat: "design-resilient", q: "RDS PostgreSQL disaster recovery - which features help? (Select two)", options: ["Use RDS Provisioned IOPS", "Use database cloning", "Enable automated backup in multi-AZ in single Region", "Use cross-Region Read Replicas", "Enable automated backup in multi-AZ across multiple Regions"], answer: 3, explain: "Cross-Region Read Replicas enable regional failover. Multi-AZ automated backups across Regions support disaster recovery with point-in-time restore." },
      { cat: "design-cost", q: "EFS Standard-IA for project files - optimize storage costs without refactoring?", options: ["Replace EFS with FSx for NetApp ONTAP with tiering", "AWS Backup daily exports to S3, keep EFS Standard-IA", "Replace EFS with FSx for Lustre", "Create S3 bucket with Intelligent-Tiering, update app to use S3 API"], answer: 3, explain: "S3 Intelligent-Tiering automatically optimizes costs by moving data between access tiers. Lower cost than EFS for archival workloads." },
      { cat: "design-secure", q: "Reduce AWS KMS costs for S3 SSE-KMS with frequent access?", options: ["Enable S3 Bucket Keys for SSE-KMS", "Switch to SSE-S3", "Use client-side encryption with local key", "Configure VPC endpoint for S3"], answer: 0, explain: "S3 Bucket Keys reduce KMS request costs by up to 99% by using bucket-level key instead of individual KMS data keys per object." },
      { cat: "design-performant", q: "PostgreSQL on EC2 with consistent high IOPS - optimal EBS volume type?", options: ["General Purpose SSD (gp2)", "Provisioned IOPS SSD (io1)", "Cold HDD (sc1)", "Throughput Optimized HDD (st1)"], answer: 1, explain: "Provisioned IOPS SSD (io1) provides consistent IOPS performance for critical database workloads requiring sustained high IOPS." },
      { cat: "design-performant", q: "Accelerated migration of hundreds of TB from on-premises to S3 with ongoing updates?", options: ["DataSync to migrate, File Gateway for ongoing updates", "S3 Transfer Acceleration to migrate, DataSync for updates", "File Gateway to migrate, S3 Transfer Acceleration for updates", "DataSync to migrate and access for updates"], answer: 0, explain: "DataSync automates and accelerates online data transfer to S3. File Gateway provides on-premises low-latency access to migrated S3 data." },
      { cat: "design-cost", q: "On-premises rendering engine needs low-latency access to S3 media - cost-effective?", options: ["On-premises storage that fetches from S3", "FSx for Lustre with DataSync over VPN", "Set up S3 File Gateway", "Use Mountpoint for S3 on-premises"], answer: 2, explain: "S3 File Gateway caches frequently accessed S3 data locally on-premises. Provides low-latency access while keeping data in cost-effective S3." },
      { cat: "design-cost", q: "Temporary high-performance IOPS for processing files before S3 upload?", options: ["EBS Throughput Optimized HDD (st1)", "EC2 Instance Store", "EBS Provisioned IOPS SSD (io1)", "EBS General Purpose SSD (gp2)"], answer: 1, explain: "Instance Store provides high random I/O performance with very low latency for temporary storage. Included in instance cost." },
      { cat: "design-cost", q: "Hundreds of S3 buckets with suboptimal lifecycle policies - reduce costs with minimal effort?", options: ["Use S3 One Zone-IA", "Configure EFS", "Use S3 Outposts", "Use S3 Intelligent-Tiering"], answer: 3, explain: "S3 Intelligent-Tiering automatically moves data to most cost-effective access tier based on access patterns. Small monitoring fee per object." },
      { cat: "design-resilient", q: "Streaming app on single EC2 - scalable solution for unpredictable traffic spikes?", options: ["EventBridge to re-deploy in different AZ when CPU > 70%", "Clone EC2, use two On-Demand with ALB", "Build AMI, create Auto Scaling group with Spot Instances and ALB", "Containerize with single Fargate task, CloudWatch alarm to increase resources"], answer: 2, explain: "Auto Scaling with Spot Instances provides cost-effective scalability. AMI ensures consistency. ALB distributes traffic across instances." },
      { cat: "design-resilient", q: "Route 53 failover to S3 static error page if ALB unhealthy?", options: ["Active-active failover routing", "Active-passive failover routing", "Weighted routing with minimum weight to S3", "Latency-based routing to S3"], answer: 1, explain: "Active-passive failover keeps primary (ALB) available majority of time. Route 53 includes secondary (S3) only when primary unhealthy." },
      { cat: "design-resilient", q: "Lambda writes to Aurora, order-writes missed during peak, high CPU/memory - improve? (Select two)", options: ["Handle reads via reader endpoint of Aurora cluster", "Increase Lambda concurrency", "Use EC2 behind ALB to write to Aurora", "Create standby Aurora in another AZ", "Create replica Aurora in another AZ"], answer: 0, explain: "Reader endpoint spreads read load across Aurora Replicas. Aurora Replica in another AZ serves as failover target, improving availability." },
      { cat: "design-performant", q: "Analytics platform - query S3 data with SQL, encrypt at rest, cross-Region replication?", options: ["S3 bucket with SSE-KMS multi-Region keys, enable CRR, use Athena", "Enable CRR, use SSE-S3, use Athena on replicated data", "Enable CRR, use SSE-KMS multi-Region keys, use Athena", "S3 with SSE-S3, enable CRR, use Redshift Spectrum"], answer: 0, explain: "Create S3 bucket with SSE-KMS multi-Region keys, enable CRR. Athena provides serverless SQL queries on S3 data with minimal overhead." },
      { cat: "design-resilient", q: "ALB removes unhealthy EC2 but ASG doesn't provision replacement?", options: ["Both ASG and ALB use ALB health check", "Both use EC2 health check", "ASG uses EC2 health check, ALB uses ALB health check", "ASG uses ALB health check, ALB uses EC2"], answer: 2, explain: "If ASG uses EC2 health check and ALB uses its own, ALB can fail health check while ASG passes. ASG won't replace instance." },
      { cat: "design-performant", q: "Auto Scaling instances - debug terminated instances, log files on EC2?", options: ["Disable Termination from ASG when issue reported", "Use Lambda to SSH and copy logs to S3", "Install CloudWatch Logs agent to send logs to CloudWatch", "Snapshot EC2 before termination"], answer: 2, explain: "CloudWatch Logs agent automatically sends log files from EC2 to CloudWatch for analysis. Logs persist after instance termination." },
      { cat: "design-secure", q: "CloudFront for S3 uploads with custom domain - enable HTTPS? (Select two)", options: ["Create CloudFront with S3 static website endpoint", "Request ACM certificate in us-east-1 for CloudFront", "Request ACM certificate in eu-west-2", "Custom origin request policy with signed URL", "Set up S3 to accept uploads from CloudFront using OAC"], answer: 1, explain: "ACM certificates for CloudFront must be in us-east-1. Origin Access Control (OAC) allows CloudFront to upload to S3 bucket securely." },
      { cat: "design-performant", q: "Users upload images to S3 - generate thumbnails automatically, low-cost?", options: ["S3 event notification to Lambda to create thumbnail, store in second bucket", "Fargate container polls S3 every minute", "Glue jobs on interval to scan and generate thumbnails", "S3 Access Analyzer calls Lambda for new images"], answer: 0, explain: "S3 event notification triggers Lambda function for each upload. Lambda creates thumbnail and stores in second bucket. Serverless and cost-effective." },
      { cat: "design-performant", q: "DynamoDB for global users - low-latency, high availability, cost-efficient?", options: ["DynamoDB global tables with provisioned capacity and auto scaling", "Separate tables per Region, Data Pipeline to sync", "Enable DAX in one Region, Lambda to replicate", "Separate tables with on-demand, custom replication via Streams and Lambda"], answer: 0, explain: "DynamoDB global tables provide multi-Region replication with low latency. Provisioned capacity with auto scaling optimizes cost based on throughput." },
      { cat: "design-performant", q: "CRM app - frequent sign-in requests due to unhealthy servers losing session data?", options: ["Use RDS for session management", "Use ALB sticky sessions", "Use DynamoDB for session management", "Use ElastiCache for session management"], answer: 3, explain: "ElastiCache provides distributed in-memory cache for session management. Supports Redis and Memcached for session stores with high performance." },
      { cat: "design-secure", q: "Fastest encrypted network connectivity between on-premises and AWS?", options: ["Use DataSync", "Use Site-to-Site VPN", "Use Direct Connect", "Use Secrets Manager"], answer: 1, explain: "Site-to-Site VPN establishes encrypted network connectivity using IPSec. Fastest to set up compared to Direct Connect which takes over a month." },
      { cat: "design-resilient", q: "Patch EC2 instances behind ALB with Systems Manager - remove from ALB during patching? (Select two)", options: ["Configure Maintenance Windows to coordinate patching and ALB removal", "CloudWatch Logs Insights to monitor, manually adjust ALB", "Use IAM permission boundaries for EC2 unless tag present", "Enable Config rules, Systems Manager Automation to reapply tags", "Create SCP denying ec2:RunInstances without tag, SCP denying ec2:DeleteTags"], answer: 0, explain: "Systems Manager Maintenance Windows coordinate patching. AWSEC2-PatchLoadBalancerInstance document manages removing/re-registering instances from ALB." },
      { cat: "design-secure", q: "EC2 instance cannot connect to internet via Internet Gateway - fix? (Select two)", options: ["Subnet associated with multiple route tables", "Subnet not public, no internet access", "Network ACL must allow inbound and outbound traffic", "Subnet not associated with any route table", "Route table must have route to Internet Gateway"], answer: 2, explain: "Network ACL must have rules allowing inbound/outbound traffic. Route table must have route to Internet Gateway for internet connectivity." },
      { cat: "design-performant", q: "Analyze customer service call audio for sentiment via SQL queries?", options: ["Kinesis to read audio, Alexa to convert, Kinesis Analytics, QuickSight", "Transcribe to convert audio to text, QuickSight for SQL analysis", "Kinesis to read audio, ML to convert and analyze", "Transcribe to convert audio to text, Athena for SQL analysis"], answer: 3, explain: "Transcribe converts audio to text (ASR). Athena performs SQL-based analysis on text data stored in S3 for sentiment analysis." },
      { cat: "design-performant", q: "Global order processing - updates under 1 second, globally consistent?", options: ["Aurora MySQL with read-only nodes in other Regions", "DynamoDB global table, deploy app in each Region", "RDS MySQL with cross-Region read replica", "Neptune clusters in each Region with Lambda and SQS"], answer: 1, explain: "DynamoDB global tables provide multi-Region, multi-writer with sub-second replication. Each Region has local replica for low-latency access." },
      { cat: "design-resilient", q: "Monitor EC2 streaming app during live event with 2-minute intervals?", options: ["EventBridge for EC2 state changes to SNS", "Enable detailed monitoring on EC2, use CloudWatch metrics", "Stream logs to OpenSearch for real-time indexing", "CloudWatch agent for high-resolution metrics, analyze with Athena"], answer: 1, explain: "Detailed monitoring provides CloudWatch metrics at 1-minute intervals (vs 5-minute default). Native EC2 integration without complex setup." },
      { cat: "design-cost", q: "Files frequently accessed first 30 days, rarely after, store 5 years - most cost-effective?", options: ["S3 Standard to Glacier Flexible after 30 days, delete after 5 years", "S3 Standard to One Zone-IA after 30 days, delete after 5 years", "S3 Standard to Standard-IA after 30 days, archive to Glacier Deep Archive after 5 years", "S3 Standard to Standard-IA after 30 days, delete after 5 years"], answer: 3, explain: "S3 Standard-IA for infrequent access with rapid retrieval. Lifecycle policy transitions after 30 days and deletes after 5 years." },
      { cat: "design-secure", q: "Application errors 'connection timed out' to RDS MySQL in private subnet - root cause?", options: ["Database credentials incorrect", "Database security group doesn't allow inbound from application servers", "Application security group doesn't allow inbound from database", "Database user doesn't have required privilege"], answer: 1, explain: "Security group for database instance must have inbound rules allowing connections from application servers' security group." },
      { cat: "design-performant", q: "Multiple Kinesis Data Streams consumers - performance lag between producers and consumers?", options: ["Swap to Kinesis Data Firehose", "Swap to SQS FIFO queues", "Use Enhanced Fanout feature", "Swap to SQS Standard queues"], answer: 2, explain: "Enhanced fan-out gives each consumer their own 2MB/sec throughput per shard. Scales automatically with number of shards." },
      { cat: "design-resilient", q: "Streaming data for real-time search and analytics - efficient solution?", options: ["Glue streaming ETL to Redshift, use Redshift search, QuickSight visualizations", "Kinesis Data Streams to OpenSearch for search, QuickSight for visualizations", "ECS with Fargate to DynamoDB, CloudWatch dashboards", "EC2 to S3, Athena to search, Managed Grafana for dashboards"], answer: 1, explain: "Kinesis Data Streams ingests streaming data. OpenSearch Service provides real-time search. QuickSight builds interactive dashboards." },
      { cat: "design-cost", q: "Athena queries on data lake - cost-effective and easy to maintain?", options: ["Use Athena to run SQL on S3 data", "Load incremental data into RDS hourly, run SQL checks", "Load incremental data into EMR Spark hourly, use SparkSQL", "Load incremental data into Redshift hourly, run SQL checks"], answer: 0, explain: "Athena provides serverless, interactive SQL queries directly on S3 data. Pay only for queries run, no infrastructure to manage." },
      { cat: "design-resilient", q: "2 EC2 instances manage workload, peak to 6 instances - reliable ambulance service configuration?", options: ["Min capacity 4 (2 per AZ in 2 AZs), max 6", "Min capacity 4 (2 per AZ in 2 Regions), max 6", "Min capacity 2 (1 per AZ in 2 AZs), max 6", "Min capacity 2, max 6 in single AZ"], answer: 0, explain: "ASG distributes instances evenly across AZs. Min capacity 4 ensures 2 instances in each of 2 AZs for high availability." },
      { cat: "design-performant", q: "Oracle database replication from on-premises to RDS Oracle with auto-scaling?", options: ["Deploy DMS on EC2 with custom Auto Scaling scripts", "Configure DMS Serverless replication task", "Use Glue to extract data to RDS Oracle on demand", "Use Lambda to capture changes and write to RDS"], answer: 1, explain: "DMS Serverless automatically provisions and scales compute based on workload. Supports ongoing replication including CDC with minimal management." },
      { cat: "design-performant", q: "Global users access APIs in us-west-2 - improve performance cost-effectively?", options: ["API Gateway in multiple Regions with Lambda proxy", "Route 53 latency routing to API copies in each Region", "Global Accelerator with HTTPS listeners, endpoint groups for regions", "CloudFront in front of API with CachingOptimized policy"], answer: 2, explain: "Global Accelerator routes traffic through AWS global network, reducing latency. Supports HTTPS, routes to us-west-2 endpoint from edge locations globally." },
      { cat: "design-secure", q: "Prevent EC2 launch without dataClassification tag, prevent tag deletion? (Select two)", options: ["Define tag policy in Organizations enforcing dataClassification key with specific values", "Lambda function to monitor and notify about missing tags", "IAM permission boundaries restricting EC2 actions unless tag present", "Config rules to detect and reapply missing tags", "Create SCP denying ec2:RunInstances without tag, SCP denying ec2:DeleteTags"], answer: 0, explain: "Tag policy enforces dataClassification key and values across Organization. SCP denies RunInstances without tag and denies DeleteTags on EC2." },
      { cat: "design-resilient", q: "SQS message processing failures - handle failures?", options: ["Use dead-letter queue", "Use short polling", "Use long polling", "Use temporary queue"], answer: 0, explain: "Dead-letter queues handle messages that can't be processed successfully. Useful for debugging and isolating problematic messages." },
      { cat: "design-resilient", q: "Multi-AZ RDS primary instance goes down - what happens?", options: ["CNAME updated to point to standby", "Email sent for manual intervention", "Application down until primary recovers", "URL changes to standby"], answer: 0, explain: "In Multi-AZ, Amazon RDS flips CNAME to point to standby which is promoted to primary. Failover is automatic with same URL." },
      { cat: "design-performant", q: "10 TB high I/O performance, 450 TB durable storage, 900 TB archival?", options: ["S3 Standard for performance, S3 Intelligent-Tiering for durable, Glacier Deep Archive for archival", "EBS for performance, S3 for durable, Glacier for archival", "EC2 instance store for performance, S3 for durable, Glacier for archival", "Instance store for performance, Storage Gateway for on-premises, Glacier Deep Archive for archival"], answer: 2, explain: "Instance store provides maximum I/O performance. S3 for durable storage. S3 Glacier for low-cost archival." },
      { cat: "design-secure", q: "SQL injection and cross-site scripting attacks on CloudFront app?", options: ["Use Route 53 with CloudFront", "Use WAF with CloudFront distribution", "Use Firewall Manager with CloudFront", "Use Security Hub with CloudFront"], answer: 1, explain: "WAF blocks common attack patterns like SQL injection and cross-site scripting. Integrates with CloudFront for web application protection." },
      { cat: "design-secure", q: "EBS encrypted volume capabilities? (Select three)", options: ["Snapshots from volume are encrypted", "Snapshots from volume are NOT encrypted", "Data at rest NOT encrypted", "Data moving between volume and instance is encrypted", "Data at rest is encrypted", "Data moving between volume and instance is NOT encrypted"], answer: 0, explain: "Encrypted EBS volumes encrypt: data at rest, data in transit to instance, and snapshots created from volume." },
      { cat: "design-secure", q: "Enforce WORM retention - prevent deletion even by administrators?", options: ["S3 Object Lock Governance Mode allows privileged users to override", "S3 Lifecycle to Glacier Deep Archive for immutability", "S3 Object Lock Compliance Mode prevents all users from modifying/deleting", "S3 Versioning with bucket policy denying s3:DeleteObject"], answer: 2, explain: "S3 Object Lock Compliance Mode enforces strict retention. No user including root can override or delete during retention period." },
      { cat: "design-performant", q: "Feedback spikes to thousands per hour - automate collection, sentiment analysis, 1-year retention?", options: ["API Gateway to SQS, Lambda processes with Comprehend, store in DynamoDB with TTL", "Kinesis Data Streams, Lambda with Translate, OpenSearch with ISM policies", "EventBridge to Step Functions, Transcribe to audio, RDS with lifecycle", "EC2 service receives data to DynamoDB, invoke Comprehend, apply TTL"], answer: 0, explain: "API Gateway with SQS buffers spikes. Lambda analyzes sentiment with Comprehend. DynamoDB TTL auto-expires data after 365 days." },
      { cat: "design-cost", q: "Direct Connect to AWS - query 60MB data warehouse, 600KB webpage - lowest egress cost?", options: ["Visualization tool in same Region, access over internet", "Visualization on-premises, query over internet", "Visualization on-premises, query over Direct Connect", "Visualization tool in same Region, access over Direct Connect"], answer: 3, explain: "Deploy visualization in same Region as data warehouse. Only pay for 600KB webpage DTO vs 60MB query response if on-premises." },
      { cat: "design-secure", q: "EC2 in public subnet uploads to S3 - avoid public endpoint?", options: ["Create gateway VPC endpoint for S3, update route table", "Provision Direct Connect link", "NAT gateway to route S3 traffic", "S3 access point with policy"], answer: 0, explain: "Gateway VPC endpoint for S3 routes traffic privately within AWS network. Update route table to direct S3 traffic through endpoint." },
      { cat: "design-performant", q: "Global users, regional ELB malfunction caused outage - reduce latency with automatic failover?", options: ["Set up Global Accelerator with endpoints in different regions", "Set up Direct Connect as backbone", "Create S3 buckets in regions, CloudFront picks nearest edge", "Set up Route 53 geoproximity routing"], answer: 0, explain: "Global Accelerator provides static anycast IPs from edge locations. Automatically redirects to healthy endpoints across Regions within seconds." },
      { cat: "design-secure", q: "Detect IAM roles and S3 buckets shared externally or publicly accessible?", options: ["Use Inspector for over-permissive policies", "Use IAM Access Analyzer to identify resources shared outside account/org", "Use Config to track and infer resource-sharing", "Use IAM Access Advisor for external access analysis"], answer: 1, explain: "IAM Access Analyzer evaluates resource-based policies to identify resources accessible from outside account/organization." },
      { cat: "design-performant", q: "Analytics workload on EBS - minimize time to clone production data for testing with high I/O?", options: ["Create EBS AMIs, launch instances, use instance store", "Take snapshots, enable fast snapshot restore, create volumes from snapshots", "Use io2 Multi-Attach to attach same volume to production and test", "Create new volumes, use AWS Backup to restore"], answer: 1, explain: "EBS fast snapshot restore eliminates initialization delay. Snapshots ensure isolation. FSR provides immediate full performance." },
      { cat: "design-performant", q: "Enable temporary SSH access to EC2 with public IP - ephemeral, auditable?", options: ["EC2 Instance Connect with SSM disabled, private IP via proxy", "Instance Connect Endpoint required for all SSH sessions", "Use EC2 Instance Connect to inject temporary public key via public IP", "Instance Connect with static key via private IP from internet"], answer: 2, explain: "EC2 Instance Connect injects one-time public key for temporary SSH access via public IP. Auditable via CloudTrail without long-term keys." },
      { cat: "design-performant", q: "Kinesis Data Streams - ProvisionedThroughputExceededException, messages sent one by one at high rate?", options: ["Decrease Stream retention duration", "Use batch messages", "Increase number of shards", "Use Exponential Backoff"], answer: 1, explain: "Batch messages to reduce overhead and increase throughput. Efficiently uses shards without increasing cost." },
      { cat: "design-resilient", q: "ECS Fargate microservices - shared POSIX file system across AZs, 8-hour RPO with cross-Region backup?", options: ["Use EFS Standard with AWS Backup for cross-Region backups", "Use FSx for NetApp ONTAP Multi-AZ with AWS Backup", "Configure S3 Standard with Mountpoint for S3, use AWS Backup", "Deploy FSx for Lustre with AWS Backup"], answer: 0, explain: "EFS provides multi-AZ POSIX file system. AWS Backup supports cross-Region backups with scheduled intervals for 8-hour RPO." },
      { cat: "design-cost", q: "Instance freeze regularly - automated reboot cost-optimal and resource-efficient?", options: ["EventBridge to Lambda to reboot every 5 minutes", "EventBridge to Lambda to check status, reboot on failure", "CloudWatch alarm for health, SNS to Lambda to reboot", "CloudWatch alarm for health, EC2 Reboot Alarm Action"], answer: 3, explain: "CloudWatch alarm monitors instance health. EC2 Reboot Alarm Action automatically reboots on Instance Health Check failure without Lambda." },
      { cat: "design-secure", q: "Transfer Family SFTP for on-premises partners - high IOPS, IP restrictions, POSIX permissions?", options: ["Use EFS encrypted, Transfer Family SFTP in VPC with EIPs, security group restricts IPs, POSIX mappings", "Use FSx for Lustre, Transfer Family public endpoint, security group", "Use S3 encrypted, Transfer Family VPC endpoint in private subnet, security group", "Use Storage Gateway file gateway, Transfer Family public endpoint, WAF for IP lists"], answer: 0, explain: "EFS provides high IOPS shared storage. Transfer Family SFTP in VPC with EIPs allows IP restrictions via security groups. POSIX identity mappings for permissions." },

      // Practice Test #6 - 65 Questions
      { cat: "design-cost", q: "Python nightly process 30 min runtime, withstands interruptions - most cost-effective?", options: ["Run on Spot Instance with persistent request type", "Run on AWS Lambda", "Run on Application Load Balancer", "Run on Amazon EMR"], answer: 0, explain: "Spot Instances available at steep discounts. Persistent request reopens after interruption. Process can withstand interruptions and restart." },
      { cat: "design-resilient", q: "EC2 in private subnets across 2 AZs need internet access - highly available NAT setup?", options: ["NAT gateway N1 in public subnet PU1 in AZ A1, NAT gateway N2 in public subnet PU2 in AZ A2", "One NAT gateway N1 in public subnet PU1 in any AZ", "Two NAT gateways N1 and N2 in single public subnet PU1", "NAT gateway N1 in private subnet PR1, NAT gateway N2 in private subnet PR2"], answer: 0, explain: "Create NAT gateway in public subnet of each AZ for high availability. If one AZ fails, resources in other AZ can still access internet through local NAT gateway." },
      { cat: "design-resilient", q: "Legacy virtualized workloads cannot be containerized - high availability on EC2?", options: ["AMI backups to S3, manual restoration", "Containerize to ECS Fargate with ALB across AZs", "Generate AMI, launch 2 EC2 in different AZs, NLB for traffic routing and health checks", "AMIs with ASG min/max=1, ALB for failover"], answer: 2, explain: "Create AMI for each legacy server. Launch two instances in different AZs. NLB routes traffic and monitors health for automatic failover without modifying core design." },
      { cat: "design-secure", q: "EC2 in private subnet access S3 and DynamoDB without internet?", options: ["Gateway endpoint for DynamoDB, OAI for S3 with private IP", "Gateway endpoint for S3, interface endpoint for DynamoDB in route table", "Separate gateway endpoint for S3 and DynamoDB each in route table", "Separate interface endpoint for S3 and DynamoDB in route table"], answer: 2, explain: "S3 and DynamoDB support gateway endpoints. Create gateway endpoint for each service and add as targets in route table for private VPC access." },
      { cat: "design-cost", q: "Monitor Compute Savings Plans coverage and alert when below threshold?", options: ["CloudWatch dashboard to track usage with metric math", "Compute Optimizer for coverage notifications", "Custom script queries API, push to S3, QuickSight weekly reports", "AWS Budgets daily coverage budget with threshold notifications"], answer: 3, explain: "AWS Budgets tracks Savings Plans coverage percentage. Configure daily monitoring and SNS alerts when coverage drops below threshold with no custom scripting." },
      { cat: "design-performant", q: "S3 static site - global users experience latency on uploads/downloads?", options: ["Global Accelerator on S3 bucket for uploads/downloads", "Multiple S3 buckets per region, CloudFront uploads to nearest", "Migrate to EC2 in multiple regions with ALB and Global Accelerator", "CloudFront distribution for downloads, S3 Transfer Acceleration for uploads"], answer: 3, explain: "CloudFront CDN improves download speeds via edge locations. S3 Transfer Acceleration optimizes uploads through edge locations to AWS backbone network." },
      { cat: "design-resilient", q: "OLTP application with relational queries, unpredictable usage spikes?", options: ["DynamoDB Provisioned with Auto Scaling", "Aurora Serverless", "ElastiCache", "DynamoDB On-Demand"], answer: 1, explain: "Aurora Serverless auto-scales based on application needs. Supports relational queries for OLTP. Scales down to zero and up automatically for unpredictable workloads." },
      { cat: "design-secure", q: "Configured inbound in Security Group and NACL but cannot connect to EC2 service?", options: ["NACLs stateful allow inbound, Security Groups stateless need both directions", "Security Groups stateful allow inbound, NACLs stateless need both inbound and outbound", "NACL rules modified from CLI blocks and causes errors", "IAM Role in Security Group differs from NACL"], answer: 1, explain: "Security Groups are stateful - allowing inbound enables connection. NACLs are stateless - must allow both inbound and outbound including ephemeral ports." },
      { cat: "design-resilient", q: "Aurora MySQL in us-east-2, DR in us-west-2 with RPO ‚â§5min, RTO ‚â§15min?", options: ["Convert to Aurora global database with secondary in us-west-2, managed failover", "Aurora read replica in us-west-2, manual promotion", "Separate Aurora cluster in us-west-2, AWS DMS continuous replication", "Lambda exports snapshots to us-west-2 every 5 minutes"], answer: 0, explain: "Aurora global database replicates with <1 second lag meeting RPO. Managed failover promotes secondary cluster quickly meeting RTO with minimal overhead." },
      { cat: "design-secure", q: "Single-tenant hardware for compliance - most cost-effective isolation?", options: ["Spot Instances", "Dedicated Instances", "On-Demand Instances", "Dedicated Hosts"], answer: 1, explain: "Dedicated Instances run on hardware dedicated to single customer. More cost-effective than Dedicated Hosts. Physically isolated from other AWS accounts." },
      { cat: "design-resilient", q: "Multi-tier app on EC2 behind ALB with Aurora - handle periodic read spikes?", options: ["Use AWS Shield", "Use Direct Connect", "Use Aurora Replica", "Use CloudFront in front of ALB", "Use Global Accelerator"], answer: 2, explain: "Aurora Replicas scale read operations. CloudFront caches content at edge locations reducing load. Both help handle spikes in request rates." },
      { cat: "design-cost", q: "Predictable workloads on EC2, Lambda, Fargate, SageMaker - long-term cost optimization with fewest plans?", options: ["Hybrid deployment discount for AWS and on-premises", "Compute Savings Plan for EC2, Fargate, Lambda", "EC2 Instance Savings Plan for EC2 and Fargate", "Reserved Instances per EC2 with Support monitoring", "SageMaker Savings Plan for training, inference, notebooks"], answer: 1, explain: "Compute Savings Plan covers EC2, Fargate, Lambda. SageMaker Savings Plan covers SageMaker workloads. Two plans provide broad coverage with minimal overhead." },
      { cat: "design-secure", q: "200 IAM users, 50 need write access to S3 bucket - least time minimal changes?", options: ["Create policy, assign manually to 50 users", "Update S3 bucket policy", "Create group, attach policy, place users in group", "Create MFA user with read/write, link 50 IAM to MFA"], answer: 2, explain: "Create IAM group with write permissions. Add 50 users to group. Users automatically inherit group permissions - easiest to manage and scale." },
      { cat: "design-performant", q: "Instance Store key characteristics for EC2?", options: ["Can't detach instance store from one instance and attach to another", "AMI from instance doesn't preserve instance store data", "Instance store reset on stop/terminate, preserved during hibernation", "Instance store is network storage", "Specify instance store when launching or restarting"], answer: 0, explain: "Instance store volumes can only be specified at launch. Cannot detach and reattach. Data not preserved in AMIs. Data persists during reboot only." },
      { cat: "design-secure", q: "EC2 instance querying IP addresses for cryptocurrency mining - prevent unauthorized behavior?", options: ["GuardDuty", "Firewall Manager", "Shield Advanced", "WAF"], answer: 0, explain: "GuardDuty detects malicious activity including cryptocurrency mining. Uses machine learning to identify EC2 querying crypto-related IPs. Finding: CryptoCurrency:EC2/BitcoinTool." },
      { cat: "design-secure", q: "Multiple VPCs in various accounts connect in star network with on-premises via Direct Connect?", options: ["Virtual Private Gateway", "VPC Peering", "PrivateLink", "Transit Gateway"], answer: 3, explain: "Transit Gateway acts as central hub connecting VPCs and on-premises networks. Simplifies network topology. Integrates with Direct Connect Gateway for on-premises connectivity." },
      { cat: "design-cost", q: "Two EC2 in different AZs with synchronous replication using public IPs - decrease replication cost?", options: ["Use Elastic Fabric Adapter", "Create PrivateLink between instances", "Use EC2 private IPs for replication", "Assign Elastic IPs for replication"], answer: 2, explain: "Using private IPs keeps traffic within AWS private network avoiding internet data transfer costs. No charges for data transfer between AZs using private IPs." },
      { cat: "design-cost", q: "Frequently and infrequently accessed images in S3 - most cost-effective?", options: ["S3 Standard-IA", "S3 Intelligent-Tiering", "EC2 monitoring app with CloudWatch changing to Standard-IA/Standard", "EC2 monitoring app with CloudWatch changing to One Zone-IA/Standard"], answer: 1, explain: "S3 Intelligent-Tiering automatically moves objects between access tiers based on usage patterns. Optimizes costs without performance impact or operational overhead." },
      { cat: "design-secure", q: "Multi-account isolation with centralized networking and guardrails - minimal overhead?", options: ["Service Catalog VPC templates with Config conformance packs", "Organizations with shared VPC via RAM, manual SCPs", "Control Tower with GWLB for centralized inspection", "Control Tower, centralized VPC in networking account, share subnets via RAM"], answer: 3, explain: "Control Tower automates account creation with guardrails. Centralized VPC shared via RAM reduces duplication. Combines governance, networking efficiency, and compliance." },
      { cat: "design-secure", q: "Corporate HQ has Direct Connect, branch offices have Site-to-Site VPN - branches communicate with each other and HQ?", options: ["VPC Endpoint", "Software VPN", "VPN CloudHub", "VPC Peering"], answer: 2, explain: "VPN CloudHub enables communication between sites with Site-to-Site VPN. Works with Direct Connect. Hub-and-spoke model for branch office connectivity." },
      { cat: "design-cost", q: "On-premises data to POSIX file storage on AWS, accessed one week per year?", options: ["S3 Standard-IA", "S3 Standard", "EFS Infrequent Access", "EFS Standard"], answer: 2, explain: "EFS IA provides POSIX-compliant file storage. 92% lower cost than EFS Standard. Enable Lifecycle Management to transition files automatically." },
      { cat: "design-resilient", q: "RDS MySQL for app and analytics - analytics slows down app performance?", options: ["Read replica with half capacity/storage", "Multi-AZ standby with same capacity, point analytics there", "Read replica with same capacity/storage for analytics", "Multi-AZ standby with half capacity, point analytics there"], answer: 2, explain: "Read replicas offload read traffic. Create with same compute/storage as primary. Route analytics queries to read replica to reduce load on primary." },
      { cat: "design-resilient", q: "ELB configuration NOT allowed?", options: ["Four EC2 in AZ B of us-west-1", "Four EC2 in AZ A of us-east-1", "Two EC2 in AZ A of us-east-1, two in AZ B of us-west-1", "Four EC2 across two AZs of us-east-1"], answer: 2, explain: "ELB cannot distribute traffic across different regions. Must be within same region across one or more AZs." },
      { cat: "design-cost", q: "10MB datasets frequently accessed first month then rarely, 4-year retention, immediate retrieval?", options: ["Lifecycle to Glacier Instant Retrieval after 30 days, delete after 4 years", "Lifecycle to Glacier Flexible Retrieval after 30 days, delete after 4 years", "Lifecycle to One Zone-IA after 30 days, delete after 4 years", "Lifecycle to Standard-IA after 30 days, delete after 4 years"], answer: 3, explain: "S3 Standard-IA for infrequent access with immediate retrieval. Lower storage cost than Standard. Lifecycle policy automates transition and deletion." },
      { cat: "design-performant", q: "DynamoDB caching layer for high read volumes, millions of requests per second?", options: ["RDS", "OpenSearch", "DAX", "ElastiCache", "Redshift"], answer: 2, explain: "DAX provides in-memory acceleration for DynamoDB. 10x performance improvement. ElastiCache also works as front-end cache for DynamoDB." },
      { cat: "design-resilient", q: "Cache relational database queries with joins - service supports multi-threading?", options: ["ElastiCache for Memcached", "ElastiCache for Redis", "DAX", "Global Accelerator"], answer: 0, explain: "Memcached supports multi-threading. Simple model for caching objects. Can scale out/in by adding/removing nodes. Redis doesn't support multi-threading." },
      { cat: "design-cost", q: "S3 storage class analysis capabilities?", options: ["Recommendations for Standard to Glacier Deep Archive", "Recommendations for Standard to One-Zone IA", "Recommendations for Standard to Glacier Flexible Retrieval", "Recommendations for Standard to Standard-IA"], answer: 3, explain: "Storage class analysis observes access patterns. Only provides recommendations for Standard to Standard-IA transitions. Helps improve lifecycle configurations." },
      { cat: "design-resilient", q: "Migrate from self-managed RabbitMQ message brokers - quick easy migration?", options: ["SQS FIFO", "SQS Standard", "SNS", "Amazon MQ"], answer: 3, explain: "Amazon MQ is managed message broker for Apache ActiveMQ and RabbitMQ. Easy migration path from existing RabbitMQ to cloud." },
      { cat: "design-secure", q: "On-premises to AWS with low bandwidth, quick setup - most cost-effective?", options: ["Direct Connect", "Internet Gateway", "Bastion host on EC2", "Site-to-Site VPN"], answer: 3, explain: "Site-to-Site VPN provides secure connection quickly. Two VPN tunnels for availability. More cost-effective and faster setup than Direct Connect for low bandwidth." },
      { cat: "design-cost", q: "AWS Organizations - enforce budget limits with automatic response and minimal overhead?", options: ["Cost Explorer with daily emails and dashboards", "Lambda analyzes Cost Explorer API, Config remediation", "AWS Budgets with alerts and DenyAll policy action when threshold crossed", "Service Catalog with pricing limits, Lambda stops resources daily"], answer: 2, explain: "AWS Budgets tracks spending with alerts. Budgets actions automatically apply IAM policy when threshold exceeded. Serverless and low maintenance enforcement." },
      { cat: "design-performant", q: "Real-time streaming app with 30-min jobs, high latency from large data - scalable serverless solution?", options: ["EC2 Auto Scaling to process", "Lambda with Step Functions", "DMS to ingest data", "Kinesis Data Streams to ingest", "Fargate with ECS to process"], answer: 3, explain: "Kinesis Data Streams captures real-time data at scale. Fargate with ECS processes 30-min jobs serverlessly. Both scale automatically without server management." },
      { cat: "design-resilient", q: "SQS consuming components need additional time - postpone delivery for seconds?", options: ["Dead-letter queues", "Delay queues", "Visibility timeout", "FIFO queues"], answer: 1, explain: "Delay queues postpone delivery of new messages for several seconds. Default delay 0s, max 15 minutes. Messages remain invisible during delay period." },
      { cat: "design-secure", q: "S3 buckets across Regions/accounts - identify all without versioning enabled?", options: ["S3 Multi-Region Access Point to check versioning metadata", "S3 Storage Lens with advanced metrics, filter versioning status", "IAM Access Analyzer to identify unversioned buckets", "CloudTrail with EventBridge for versioning API calls, Lambda reports"], answer: 1, explain: "S3 Storage Lens provides organization-wide view including versioning status. Advanced metrics show per-bucket insights across all regions and accounts." },
      { cat: "design-resilient", q: "Single EC2 and RDS MySQL - build highly available architecture minimal maintenance?", options: ["ASG with 2 EC2 across 2 AZs, ALB, RDS Multi-AZ", "Second EC2 in another AZ, second RDS in another AZ, Route 53 distribution, custom sync script", "ASG with 2 EC2 across 2 AZs, ALB, RDS read replica in another AZ", "ASG with 2 EC2 in single AZ, ALB, RDS Multi-AZ"], answer: 0, explain: "ASG with EC2 across AZs provides compute HA. ALB distributes traffic and health checks. RDS Multi-AZ provides database HA with automatic failover." },
      { cat: "design-cost", q: "Spot Instance and Spot Fleet characteristics?", options: ["Spot fleet only Spot Instances for target capacity", "Spot fleet consists of Spot and optionally On-Demand instances", "Spot fleets are spare capacity with 2-min notification", "Spot instances are spare capacity up to 90% off with 2-min notification", "Spot fleets allow 1-6 hour requests"], answer: 1, explain: "Spot instances save up to 90% with 2-min interruption notice. Spot fleet can contain both Spot and On-Demand instances to meet target capacity." },
      { cat: "design-resilient", q: "EC2 in same AZ - shared data access using EBS Multi-Attach?", options: ["General-purpose SSD", "Cold HDD", "Provisioned IOPS SSD", "Throughput Optimized HDD"], answer: 2, explain: "EBS Multi-Attach only supported on Provisioned IOPS SSD (io1/io2). Attach single volume to multiple instances in same AZ with full read/write permissions." },
      { cat: "design-secure", q: "Sign confidential contracts with proprietary encryption algorithm - recommend encryption?", options: ["Client Side Encryption", "SSE-C", "SSE-S3", "SSE-KMS"], answer: 0, explain: "Client-side encryption uses customer's proprietary algorithm. Encrypt data locally before sending to S3. S3 doesn't play role in encryption/decryption process." },
      { cat: "design-secure", q: "CloudFront distribution with S3 - users only access through CloudFront not directly?", options: ["Bucket policy for IAM role on CloudFront", "Create OAI and update S3 bucket policy", "Make S3 public", "S3 security groups for CloudFront"], answer: 1, explain: "Create Origin Access Identity and associate with CloudFront. Configure S3 bucket policy to allow only OAI access. Users can only access via CloudFront URL." },
      { cat: "design-cost", q: "Move on-premises to AWS with long-term server-bound licenses - most cost-effective?", options: ["On-Demand instances", "Reserved Instances", "Dedicated Hosts", "Dedicated Instances"], answer: 2, explain: "Dedicated Hosts allow use of existing server-bound software licenses. Physical server dedicated for your use. Visibility and control over instance placement." },
      { cat: "design-performant", q: "HPC workflows for genome analysis - networking component for EC2?", options: ["Elastic IP", "ENI", "ENA", "EFA"], answer: 3, explain: "EFA accelerates HPC and ML applications. Provides OS-bypass for direct hardware communication. Includes all ENA functionality plus low-latency inter-instance communication." },
      { cat: "design-resilient", q: "CloudFront deliver restricted content to subscribers?", options: ["CloudFront signed URLs", "HTTPS between CloudFront and custom origin", "HTTPS with ECDSA/RSA ciphers", "CloudFront signed cookies", "HTTPS between CloudFront and S3"], answer: 0, explain: "Signed URLs control access with expiration dates. Signed cookies provide access to multiple restricted files. Both restrict content to authorized users." },
      { cat: "design-performant", q: "Highly available bastion host solution?", options: ["Public ALB to bastion EC2 in ASG", "VPC Endpoint for bastion EC2 in ASG", "Elastic IP assigned to all bastion EC2 in ASG", "Public NLB to bastion EC2 in ASG"], answer: 3, explain: "NLB operates at Layer 4 supporting SSH (TCP port 22). Bastion hosts in ASG across AZs. NLB routes to healthy instances providing high availability." },
      { cat: "design-resilient", q: "Photo app with pro and lite users - prioritize pro user photos?", options: ["One SQS queue, set pro visibility to zero, prioritize by visibility", "Two FIFO queues, lite short polling, pro long polling", "Two standard queues, EC2 prioritizes polling pro queue over lite", "Two standard queues, lite short polling, pro long polling"], answer: 2, explain: "Separate queues provide work prioritization. Configure EC2 to poll pro queue before lite queue. Standard queues appropriate for prioritization use case." },
      { cat: "design-secure", q: "Firewall Manager can configure rules on which resources?", options: ["WAF", "Route Table", "Shield Advanced", "GuardDuty", "Security Group", "Inspector"], answer: 0, explain: "Firewall Manager centrally configures WAF rules, Shield Advanced, VPC Security Groups, Network Firewalls, Route 53 Resolver DNS Firewall across accounts." },
      { cat: "design-performant", q: "High-throughput request-response pattern - save development time and costs?", options: ["Delay queues", "FIFO queues", "Temporary queues", "Dead-letter queues"], answer: 2, explain: "Temporary queues for request-response patterns. Maps multiple temporary queues onto single SQS queue. High-throughput, cost-effective, auto cleanup." },
      { cat: "design-resilient", q: "Monolith app on single server - auto-recover from AZ failure most cost-efficient?", options: ["ALB and target group with ASG instances", "EC2 Instance Role for API calls", "ASG across 2 AZs min=1 max=1 desired=1", "Elastic IP with user-data script to attach", "Spot Fleet", "ASG across 2 AZs min=1 max=2 desired=2"], answer: 1, explain: "ASG across 2 AZs recreates instance if AZ fails. Elastic IP provides static address. EC2 Instance Role allows instance to attach EIP via user-data script." },
      { cat: "design-cost", q: "RDS PostgreSQL with analytics workload - analytics slows e-commerce app?", options: ["Read Replica in another Region", "Multi-AZ, run analytics on standby", "Read Replica in same Region for analytics", "Multi-AZ standby in another Region for analytics"], answer: 2, explain: "Read Replica in same Region - no cross-region data transfer charges. Offload analytics queries to read replica. Same region keeps costs minimal." },
      { cat: "design-cost", q: "S3 data queried in Redshift - data rarely queried after 30 days, preserve SQL capability, save costs?", options: ["Migrate Redshift storage to S3 IA", "Smaller Redshift cluster with cold data", "Move to S3 Standard-IA after 30 days", "Move to Glacier Deep Archive after 30 days", "Analyze with Athena"], answer: 2, explain: "Move data to S3 Standard-IA after 30 days. Use Athena to query S3 data with SQL. Serverless, low cost, immediate query capability without Redshift cluster." },
      { cat: "design-resilient", q: "RDS Multi-AZ correct characteristics?", options: ["Updates asynchronously replicated to standby", "Maintenance on standby, promote to primary, maintain old primary", "I/O suspended on primary during backups", "Multi-AZ standby serves read requests", "Maintenance upgrades both instances simultaneously"], answer: 1, explain: "Synchronous replication to standby. Maintenance on standby first then promote. Automatic failover to standby if primary fails. Backups from standby." },
      { cat: "design-secure", q: "Attackers perform 100 requests/sec, normal users 5/sec - efficiently prevent?", options: ["Shield Advanced with rate-based rule", "NACL on ALB", "WAF with rate-based rule", "Sticky Sessions on ALB"], answer: 2, explain: "WAF integrates with ALB. Rate-based rules block excessive requests. Control traffic patterns like 100 requests/sec to prevent attacks." },
      { cat: "design-performant", q: "Order processing: web tier, EC2 processing tier, SQS decoupling, DynamoDB - improve responsiveness during unpredictable surges?", options: ["Scheduled Auto Scaling for processing tier based on past peaks", "EventBridge scheduled batch processing every 10 minutes", "ASG with target tracking on SQS ApproximateNumberOfMessages", "Add Kinesis Data Streams with enhanced fan-out"], answer: 2, explain: "Auto Scaling target tracking policy monitors SQS queue depth. Scales EC2 processing tier as messages accumulate. Responsive to real-time demand without manual intervention." },
      { cat: "design-secure", q: "On-premises to S3 using Direct Connect - access S3 from data center?", options: ["Private VIF with VPC endpoint to S3", "VPN over internet instead of Direct Connect", "Public VIF to access S3 public IPs", "Transit Gateway with Direct Connect Gateway for private S3 IPs"], answer: 2, explain: "Public VIF on Direct Connect accesses AWS public services like S3. Routes to S3 public IPs over dedicated connection, not public internet." },
      { cat: "design-performant", q: "Image processing on-prem to AWS - auto-scale, no servers, workflow automation?", options: ["Lambda and Spot Instances, store in FSx", "AWS Batch with Step Functions, store in S3", "EC2 ASG with Step Functions, store in EBS", "EKS with self-managed EC2 nodes, SQS, store in EBS"], answer: 1, explain: "AWS Batch auto-provisions compute for jobs. Step Functions orchestrates workflow serverlessly. S3 stores large output files. Fully managed with minimal overhead." },
      { cat: "design-secure", q: "Multi-account AWS Organizations - critical alerts missed at root email - route to appropriate teams?", options: ["Assign root email to designated member per department", "Root email to department list, IAM notifications by service, no alternate contacts", "Root email alias to centralized mailbox, alternate contacts for billing/security/operations", "Email forwarding service with keyword rules for triage"], answer: 2, explain: "Root email alias to monitored mailbox ensures oversight. Alternate contacts route billing, security, operations notifications to team distribution lists. Scalable and secure." },
      { cat: "design-resilient", q: "Private hosted zone for internal domain - VPC settings to enable?", options: ["enableDnsHostnames", "enableDnsSupport", "enableVpcHostnames", "enableVpcSupport", "enableDnsDomain"], answer: 0, explain: "For Route 53 private hosted zone, enable enableDnsHostnames and enableDnsSupport on each VPC associated with hosted zone." },
      { cat: "design-secure", q: "Active Directory for directory-aware workloads on AWS, trust with on-premises AD?", options: ["AWS Managed Microsoft AD", "Transit Gateway", "Simple AD", "AD Connector"], answer: 0, explain: "AWS Managed Microsoft AD runs directory-aware workloads. Configure trust relationship with on-premises Microsoft AD. Supports SSO across domains." },
      { cat: "design-resilient", q: "Web app on EC2 in multiple AZs, documents need high availability and immediate retrieval?", options: ["Three Provisioned IOPS Instance Store volumes mounted to multiple EC2", "EBS as root volume, S3 as document store", "Regular EBS snapshots, build volumes in additional AZs", "EBS as root volume, S3 Glacier as document store"], answer: 1, explain: "EBS for EC2 root volume. S3 provides high availability and immediate access for documents. S3 accessible from all AZs without cross-AZ dependencies." },
      { cat: "design-performant", q: "Legacy VMs to AWS lift-and-shift - rapid migration without refactoring?", options: ["AWS MGN, install Replication Agent on VMs", "Perform initial replication, launch test instances, validate before cutover", "Launch cutover instance after testing and replication up-to-date", "CloudEndure DR for continuous replication and production promotion", "EC2 Auto Scaling to recreate VMs with matching configs", "Shut down VMs, provision EC2 with manual AMI"], answer: 0, explain: "AWS MGN for lift-and-shift migrations. Replication Agent replicates VMs. Test instances validate migration. Cutover instances go live after testing." },
      { cat: "design-secure", q: "Public web app with TLS termination offloaded from EC2 - most secure setup?", options: ["NLB in private subnet, ASG in private", "NLB in public subnet, ASG in public", "NLB in public subnet, ASG in private", "NLB in private subnet, ASG in public"], answer: 2, explain: "NLB in public subnet as internet-facing entry point. TLS termination on NLB. ASG with EC2 in private subnet avoids direct internet access, strengthening security." },
      { cat: "design-performant", q: "IAM Identity Center with federated access - granular RDS/S3 access by job role with least overhead?", options: ["IAM Identity Center with permission sets, map groups to permission sets", "IAM identity provider with SAML, manually assign roles with inline policies", "Individual IAM users with role-based policies, IAM Access Analyzer", "Organizations with SCPs on OU for RDS/S3 access boundaries"], answer: 0, explain: "IAM Identity Center integrates with directory. Permission sets define granular access. Map user groups to permission sets. Centralized, scalable, least privilege with minimal overhead." },
      { cat: "design-secure", q: "Private subnet app uses Cognito user pools - authenticated users upload to S3 securely?", options: ["Lambda proxy for S3 uploads after login", "Cognito identity pool for temporary AWS credentials with S3 access", "S3 bucket policy with custom header for Cognito user ID", "Cognito user pool to directly grant S3 permissions", "S3 VPC endpoint for private connectivity"], answer: 1, explain: "Cognito identity pool generates temporary AWS credentials. IAM roles grant fine-grained S3 access. S3 VPC endpoint enables private network access to S3 from VPC." },
      { cat: "design-performant", q: "Clickstream data with unpredictable spikes - scalable serverless real-time ingestion and processing?", options: ["Kinesis Data Firehose to S3, Athena scheduled queries", "SNS to SQS, Glue jobs at fixed intervals", "EC2 Kafka cluster with manual scaling, Athena queries", "Kinesis Data Streams on-demand, Lambda consumer for real-time processing"], answer: 3, explain: "Kinesis Data Streams on-demand mode auto-scales for unpredictable traffic. Lambda processes events in real-time serverlessly. Low-latency ingestion and processing." },
      { cat: "design-resilient", q: "Custom scripts run once during EC2 launch - best way with minimal effort?", options: ["User data scripts on EC2", "Update config to ensure user data runs only at boot", "Use CLI to run user data once at launch", "Instance metadata scripts"], answer: 0, explain: "User data scripts run automatically during first boot when launching instance. No extra configuration needed for one-time execution. Default behavior runs once." },
      { cat: "design-cost", q: "Backend in private subnet accesses S3, compliance prohibits internet traffic - cost-effective?", options: ["VPC peering with another VPC, proxy EC2 for S3 access", "S3 interface VPC endpoint with security group", "Gateway VPC endpoint for S3, update route table", "S3 bucket policy allowing NAT gateway Elastic IP"], answer: 2, explain: "Gateway VPC endpoint for S3 routes traffic privately over AWS network. No internet access needed. Free of hourly charges. Update route table for private subnet." },
      { cat: "design-performant", q: "Build index of S3 files (100K files, 50TB) reading first 250 bytes - efficient?", options: ["Traverse bucket, Byte Range Fetch first 250 bytes, store in RDS", "Traverse bucket, S3 Select Byte Range Fetch first 250 bytes", "RDS Import from S3, SQL query to build index", "Traverse bucket, read all files, extract first 250 bytes"], answer: 0, explain: "Byte Range Fetch retrieves only specified bytes. Fetch first 250 bytes of each object efficiently. Avoids reading entire 50TB. Store metadata in RDS for index." }
    ];

    // AWS Services Reference
    const awsServices = [
      { name: "EC2", desc: "Virtual servers in the cloud", cat: "Compute" },
      { name: "Lambda", desc: "Serverless compute - run code without servers", cat: "Compute" },
      { name: "ECS/EKS", desc: "Container orchestration (Docker/Kubernetes)", cat: "Compute" },
      { name: "Fargate", desc: "Serverless containers", cat: "Compute" },
      { name: "S3", desc: "Object storage with 11 9s durability", cat: "Storage" },
      { name: "EBS", desc: "Block storage for EC2 instances", cat: "Storage" },
      { name: "EFS", desc: "Managed NFS file system", cat: "Storage" },
      { name: "Glacier", desc: "Low-cost archive storage", cat: "Storage" },
      { name: "RDS", desc: "Managed relational databases", cat: "Database" },
      { name: "Aurora", desc: "High-performance MySQL/PostgreSQL compatible", cat: "Database" },
      { name: "DynamoDB", desc: "NoSQL key-value with single-digit ms latency", cat: "Database" },
      { name: "ElastiCache", desc: "In-memory caching (Redis/Memcached)", cat: "Database" },
      { name: "Redshift", desc: "Data warehouse for analytics", cat: "Database" },
      { name: "VPC", desc: "Isolated virtual network", cat: "Networking" },
      { name: "CloudFront", desc: "Content delivery network (CDN)", cat: "Networking" },
      { name: "Route 53", desc: "DNS and domain registration", cat: "Networking" },
      { name: "API Gateway", desc: "Create and manage APIs", cat: "Networking" },
      { name: "Direct Connect", desc: "Dedicated network to AWS", cat: "Networking" },
      { name: "ELB", desc: "Load balancing across targets", cat: "Networking" },
      { name: "IAM", desc: "Identity and access management", cat: "Security" },
      { name: "KMS", desc: "Encryption key management", cat: "Security" },
      { name: "Shield", desc: "DDoS protection", cat: "Security" },
      { name: "WAF", desc: "Web application firewall", cat: "Security" },
      { name: "GuardDuty", desc: "Threat detection with ML", cat: "Security" },
      { name: "CloudWatch", desc: "Monitoring and observability", cat: "Management" },
      { name: "CloudTrail", desc: "API activity logging", cat: "Management" },
      { name: "Config", desc: "Resource configuration tracking", cat: "Management" },
      { name: "SQS", desc: "Message queuing service", cat: "Integration" },
      { name: "SNS", desc: "Pub/sub messaging", cat: "Integration" },
      { name: "EventBridge", desc: "Event bus for applications", cat: "Integration" }
    ];

    // State
    let currentCert = DB.getOne('currentCert') || 'clf';
    let currentCategory = 'all';
    let questions = currentCert === 'clf' ? clfQuestions : saaQuestions;
    let filteredQuestions = [...questions];
    let currentQuestionIndex = 0;
    let quizStats = DB.getOne('quizStats_' + currentCert) || { correct: 0, total: 0, bestStreak: 0, currentStreak: 0, byCategory: {} };
    let answeredQuestions = DB.get('answeredQuestions_' + currentCert) || [];

    // Exam State
    let examQuestions = [];
    let examIndex = 0;
    let examAnswers = [];
    let examTimer = null;
    let examTimeLeft = 0;

    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function switchCert() {
      currentCert = document.getElementById('certSelector').value;
      DB.setOne('currentCert', currentCert);
      questions = currentCert === 'clf' ? clfQuestions : saaQuestions;
      quizStats = DB.getOne('quizStats_' + currentCert) || { correct: 0, total: 0, bestStreak: 0, currentStreak: 0, byCategory: {} };
      answeredQuestions = DB.get('answeredQuestions_' + currentCert) || [];
      filteredQuestions = [...questions];
      shuffleArray(filteredQuestions);
      currentQuestionIndex = 0;
      currentCategory = 'all';
      updateUI();
      loadQuestion();
    }

    function updateUI() {
      const cert = certifications[currentCert];
      document.getElementById('currentCertName').textContent = cert.name;
      document.getElementById('certBadge').textContent = cert.code;
      document.getElementById('certBadge').className = 'cert-badge ' + currentCert;
      document.getElementById('passScore').textContent = cert.passScore + '%';
      document.getElementById('examQuestions').textContent = cert.questions;
      document.getElementById('examTime').textContent = cert.time + ' min';
      document.getElementById('quizCertTitle').textContent = 'AWS ' + cert.name;
      document.getElementById('examQCount').textContent = cert.questions;
      document.getElementById('examTCount').textContent = cert.time;
      document.getElementById('examPScore').textContent = cert.passScore + '%';

      // Update category buttons
      const btnContainer = document.getElementById('categoryBtns');
      btnContainer.innerHTML = `<button class="btn btn-primary category-btn" data-cat="all" onclick="setCategory('all')">All Domains</button>`;
      cert.domains.forEach(d => {
        btnContainer.innerHTML += `<button class="btn btn-secondary category-btn" data-cat="${d}" onclick="setCategory('${d}')">${cert.domainLabels[d]}</button>`;
      });

      // Update domain progress
      const progContainer = document.getElementById('domainProgress');
      progContainer.innerHTML = '';
      cert.domains.forEach(d => {
        const stats = quizStats.byCategory[d] || { correct: 0, total: 0 };
        const pct = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
        const progClass = pct >= 70 ? 'good' : pct >= 40 ? 'medium' : 'low';
        progContainer.innerHTML += `
          <div>
            <label>${cert.domainLabels[d]}</label>
            <div class="progress-bar"><div class="progress-fill ${progClass}" style="width:${pct}%"></div></div>
            <span style="font-size:.75rem;color:var(--muted)">${stats.correct}/${stats.total} (${pct}%)</span>
          </div>
        `;
      });

      updateDashboard();
    }

    function setCategory(cat) {
      currentCategory = cat;
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('btn-primary');
        btn.classList.add('btn-secondary');
        if (btn.dataset.cat === cat) {
          btn.classList.add('btn-primary');
          btn.classList.remove('btn-secondary');
        }
      });
      filteredQuestions = cat === 'all' ? [...questions] : questions.filter(q => q.cat === cat);
      shuffleArray(filteredQuestions);
      currentQuestionIndex = 0;
      loadQuestion();
    }

    function loadQuestion() {
      if (filteredQuestions.length === 0) {
        document.getElementById('quizQuestion').textContent = 'No questions in this category!';
        document.getElementById('quizOptions').innerHTML = '';
        document.getElementById('floatingTips').style.display = 'none';
        return;
      }
      const q = filteredQuestions[currentQuestionIndex];
      const cert = certifications[currentCert];

      // Store current question for tips modal
      window.currentQuestion = q;

      document.getElementById('quizCategory').textContent = cert.domainLabels[q.cat] || q.cat;
      document.getElementById('quizQuestion').textContent = q.q;
      document.getElementById('questionCounter').textContent = `(${currentQuestionIndex + 1}/${filteredQuestions.length})`;
      document.getElementById('quizOptions').innerHTML = q.options.map((opt, i) => `
        <div class="quiz-option" onclick="checkAnswer(${i})">${opt}</div>
      `).join('');
      document.getElementById('quizExplanation').style.display = 'none';
      document.getElementById('nextQuizBtn').style.display = 'none';

      // Show floating tips button only for SAA-C03
      document.getElementById('floatingTips').style.display = currentCert === 'saa' ? 'block' : 'none';
    }

    function checkAnswer(selected) {
      const q = filteredQuestions[currentQuestionIndex];
      const options = document.querySelectorAll('#quizOptions .quiz-option');
      options.forEach((opt, i) => {
        opt.style.pointerEvents = 'none';
        if (i === q.answer) opt.classList.add('correct');
        if (i === selected && selected !== q.answer) opt.classList.add('incorrect');
      });

      quizStats.total++;
      if (!quizStats.byCategory[q.cat]) quizStats.byCategory[q.cat] = { correct: 0, total: 0 };
      quizStats.byCategory[q.cat].total++;

      if (selected === q.answer) {
        quizStats.correct++;
        quizStats.currentStreak++;
        quizStats.byCategory[q.cat].correct++;
        if (quizStats.currentStreak > quizStats.bestStreak) quizStats.bestStreak = quizStats.currentStreak;
      } else {
        quizStats.currentStreak = 0;
        answeredQuestions.push({ q: q.q, cat: q.cat, correct: false, date: new Date().toISOString() });
      }

      DB.setOne('quizStats_' + currentCert, quizStats);
      DB.set('answeredQuestions_' + currentCert, answeredQuestions.slice(-200));

      const explainEl = document.getElementById('quizExplanation');
      explainEl.innerHTML = `<strong>${selected === q.answer ? '‚úÖ Correct!' : '‚ùå Incorrect'}</strong><br>${q.explain}`;
      explainEl.style.display = 'block';
      explainEl.style.borderLeftColor = selected === q.answer ? 'var(--success)' : 'var(--danger)';

      document.getElementById('nextQuizBtn').style.display = 'inline-block';
      updateUI();
    }

    function nextQuestion() {
      currentQuestionIndex = (currentQuestionIndex + 1) % filteredQuestions.length;
      if (currentQuestionIndex === 0) shuffleArray(filteredQuestions);
      loadQuestion();
    }

    function resetQuiz() {
      if (confirm('Reset all progress for ' + certifications[currentCert].name + '?')) {
        quizStats = { correct: 0, total: 0, bestStreak: 0, currentStreak: 0, byCategory: {} };
        answeredQuestions = [];
        DB.setOne('quizStats_' + currentCert, quizStats);
        DB.set('answeredQuestions_' + currentCert, []);
        updateUI();
      }
    }

    function updateDashboard() {
      document.getElementById('totalAnswered').textContent = quizStats.total;
      document.getElementById('totalAccuracy').textContent = quizStats.total > 0 ? Math.round((quizStats.correct / quizStats.total) * 100) + '%' : '--%';
      document.getElementById('bestStreak').textContent = quizStats.bestStreak;

      const accuracy = quizStats.total > 0 ? (quizStats.correct / quizStats.total) * 100 : 0;
      const cert = certifications[currentCert];
      const ready = accuracy >= cert.passScore && quizStats.total >= 30;
      document.getElementById('examReady').textContent = ready ? 'Yes!' : 'No';
      document.getElementById('examReady').style.color = ready ? 'var(--success)' : 'var(--danger)';

      // Weak areas
      const container = document.getElementById('weakAreas');
      const wrongByCat = {};
      answeredQuestions.filter(a => !a.correct).forEach(a => {
        wrongByCat[a.cat] = (wrongByCat[a.cat] || 0) + 1;
      });
      const weakCats = Object.entries(wrongByCat).sort((a, b) => b[1] - a[1]).slice(0, 3);

      if (weakCats.length === 0) {
        container.innerHTML = '<div class="insight positive">No weak areas yet - keep practicing!</div>';
      } else {
        container.innerHTML = weakCats.map(([cat, count]) => `
          <div class="data-item" onclick="document.querySelector('[data-tab=quiz]').click(); setCategory('${cat}')">
            <div class="data-item-info">
              <div class="data-item-title">${cert.domainLabels[cat] || cat}</div>
              <div class="data-item-meta">${count} incorrect - Click to practice</div>
            </div>
            <div class="data-item-value" style="color:var(--danger)">${count}</div>
          </div>
        `).join('');
      }
    }

    // Exam Functions
    function startExam() {
      const cert = certifications[currentCert];
      examQuestions = [...questions];
      shuffleArray(examQuestions);
      examQuestions = examQuestions.slice(0, cert.questions);
      examIndex = 0;
      examAnswers = new Array(cert.questions).fill(-1);
      examTimeLeft = cert.time * 60;

      document.getElementById('examStart').style.display = 'none';
      document.getElementById('examInProgress').style.display = 'block';
      document.getElementById('examResults').style.display = 'none';

      loadExamQuestion();
      examTimer = setInterval(updateExamTimer, 1000);
    }

    function loadExamQuestion() {
      const q = examQuestions[examIndex];
      document.getElementById('examProgress').textContent = `Question ${examIndex + 1} of ${examQuestions.length}`;
      document.getElementById('examQuestion').textContent = q.q;
      document.getElementById('examOptions').innerHTML = q.options.map((opt, i) => `
        <div class="quiz-option ${examAnswers[examIndex] === i ? 'selected' : ''}" onclick="selectExamAnswer(${i})" style="${examAnswers[examIndex] === i ? 'border-color:var(--aws-orange)' : ''}">${opt}</div>
      `).join('');
    }

    function selectExamAnswer(i) {
      examAnswers[examIndex] = i;
      loadExamQuestion();
    }

    function examNext() {
      if (examIndex < examQuestions.length - 1) {
        examIndex++;
        loadExamQuestion();
      } else {
        endExam();
      }
    }

    function updateExamTimer() {
      examTimeLeft--;
      const mins = Math.floor(examTimeLeft / 60);
      const secs = examTimeLeft % 60;
      document.getElementById('examTimer').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
      if (examTimeLeft <= 0) endExam();
    }

    function endExam() {
      clearInterval(examTimer);
      let correct = 0;
      examQuestions.forEach((q, i) => {
        if (examAnswers[i] === q.answer) correct++;
      });
      const score = Math.round((correct / examQuestions.length) * 100);
      const cert = certifications[currentCert];
      const passed = score >= cert.passScore;

      document.getElementById('examInProgress').style.display = 'none';
      document.getElementById('examResults').style.display = 'block';
      document.getElementById('examScore').textContent = score + '%';
      document.getElementById('examCorrect').textContent = correct + '/' + examQuestions.length;
      document.getElementById('examResult').textContent = passed ? '‚úÖ PASSED' : '‚ùå FAILED';
      document.getElementById('examResult').style.color = passed ? 'var(--success)' : 'var(--danger)';
    }

    function restartExam() {
      document.getElementById('examStart').style.display = 'block';
      document.getElementById('examResults').style.display = 'none';
    }

    // Services
    function loadServices() {
      document.getElementById('serviceGrid').innerHTML = awsServices.map(s => `
        <div class="service-card">
          <div class="service-name">${s.name}</div>
          <div class="service-desc">${s.desc}</div>
          <span style="font-size:.75rem;background:var(--card);padding:.25rem .5rem;border-radius:4px">${s.cat}</span>
        </div>
      `).join('');
    }

    function filterServices() {
      const search = document.getElementById('serviceSearch').value.toLowerCase();
      const filtered = awsServices.filter(s =>
        s.name.toLowerCase().includes(search) ||
        s.desc.toLowerCase().includes(search) ||
        s.cat.toLowerCase().includes(search)
      );
      document.getElementById('serviceGrid').innerHTML = filtered.map(s => `
        <div class="service-card">
          <div class="service-name">${s.name}</div>
          <div class="service-desc">${s.desc}</div>
          <span style="font-size:.75rem;background:var(--card);padding:.25rem .5rem;border-radius:4px">${s.cat}</span>
        </div>
      `).join('');
    }

    // Initialize
    document.getElementById('certSelector').value = currentCert;
    shuffleArray(filteredQuestions);
    updateUI();
    loadQuestion();
    loadServices();
  </script>
</body>
</html>
